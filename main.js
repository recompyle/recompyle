/*
 * Copyright (C) 2023 Recompyle - Damien Galan
 * All Rights Reserved.
 * 
 * Unauthorized copying of this file, via any medium is strictly prohibited.
 * Proprietary and confidential.
 */

(()=>{"use strict";var __webpack_modules__={"./dist/tsbuild/app/handlers/babel/ast/empty-ast.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getEmptyAst:()=>function(){return{type:"File",start:0,end:0,loc:{start:{line:1,column:0},end:{line:1,column:0}},errors:[],program:{type:"Program",start:0,end:0,loc:{start:{line:1,column:0},end:{line:1,column:0}},sourceType:"module",interpreter:null,body:[],directives:[]},comments:[]}}})},"./dist/tsbuild/app/handlers/babel/ast/empty-const-data-ast.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getEmptyConstData:()=>function(){return{type:"File",start:0,end:16,loc:{start:{line:1,column:0},end:{line:1,column:16}},errors:[],program:{type:"Program",start:0,end:16,loc:{start:{line:1,column:0},end:{line:1,column:16}},sourceType:"module",interpreter:null,body:[{type:"VariableDeclaration",start:0,end:16,loc:{start:{line:1,column:0},end:{line:1,column:16}},declarations:[{type:"VariableDeclarator",start:6,end:15,loc:{start:{line:1,column:6},end:{line:1,column:15}},id:{type:"Identifier",start:6,end:10,loc:{start:{line:1,column:6},end:{line:1,column:10},identifierName:"data"},name:"data"},init:{type:"ObjectExpression",start:13,end:15,loc:{start:{line:1,column:13},end:{line:1,column:15}},properties:[]}}],kind:"const"}],directives:[]},comments:[]}}})},"./dist/tsbuild/app/handlers/babel/astToCode.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{astToCode:()=>function(ast,fileType="js"){var{code:ast,map:fileType}=_babel_generator__WEBPACK_IMPORTED_MODULE_0___default()(ast,{filename:"file."+fileType,retainLines:!0});return{code:ast,map:fileType}},parseBlockBabelToCode:()=>function(ast,fileType="js"){ast=(0,_babel__WEBPACK_IMPORTED_MODULE_2__.addNodeToEmptyAst)(ast),ast=_babel_generator__WEBPACK_IMPORTED_MODULE_0___default()(ast,{filename:"file."+fileType,retainLines:!1}).code;return ast},parseExpressionToCode:()=>function(code){code=(0,_babel_parser__WEBPACK_IMPORTED_MODULE_1__.parseExpression)(code,{});return code}});var __webpack_exports__=__webpack_require__("@babel/generator"),_babel_generator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_babel_parser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("@babel/parser"),_babel__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/babel/babel.js")},"./dist/tsbuild/app/handlers/babel/babel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{addNodeToEmptyAst:()=>addNodeToEmptyAst,getAstFromPath:()=>function(babelAst,babelPath){babelAst=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(babelAst,babelPath);return this.addNodeToEmptyAst(babelAst)},traverseNode:()=>function(ast,opts){ast=addNodeToEmptyAst(ast);return(0,_babel_core__WEBPACK_IMPORTED_MODULE_1__.traverse)(ast,opts)}});var _ast_empty_ast__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/babel/ast/empty-ast.js"),lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash"),_babel_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("@babel/core");function addNodeToEmptyAst(node){var ast=(0,_ast_empty_ast__WEBPACK_IMPORTED_MODULE_2__.getEmptyAst)();return(0,lodash__WEBPACK_IMPORTED_MODULE_0__.set)(ast,"program.body",[node]),ast}},"./dist/tsbuild/app/handlers/babel/fileToAstWithBabel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{codeStringToAstWithBabelSync:()=>function(fileAsString,fileType){return _babel_core__WEBPACK_IMPORTED_MODULE_0__.parse(fileAsString,{filename:"file."+fileType,presets:getPresets(fileType),plugins:[[_babel_plugin_proposal_decorators_lib_index__WEBPACK_IMPORTED_MODULE_2__,{legacy:!0}],[_babel_plugin_proposal_class_properties_lib_index__WEBPACK_IMPORTED_MODULE_3__,{loose:!0}]]})},filePathToAst:()=>function(filePath,fileType,cb){filePath=fs__WEBPACK_IMPORTED_MODULE_7___default().readFileSync(filePath).toString();!function(fileAsString,fileType,cb){"vue"==fileType?(0,_vue__WEBPACK_IMPORTED_MODULE_8__.codeVueToAstWithBabel)(fileAsString,cb):parseCodeToAst(fileAsString,fileType,cb)}(filePath,fileType,cb)},getFileType:()=>function(filePath){let fileType="js";fs__WEBPACK_IMPORTED_MODULE_7___default().readFileSync(filePath).toString();filePath.endsWith(".ts")?fileType="ts":filePath.endsWith(".tsx")?fileType="tsx":filePath.endsWith(".jsx")?fileType="jsx":filePath.endsWith(".flow")?fileType="flow":filePath.endsWith(".vue")&&(fileType="vue");return fileType},parseCodeToAst:()=>parseCodeToAst});var _babel_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@babel/core"),_babel_preset_typescript_lib_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("@babel/preset-typescript/lib/index"),_babel_plugin_proposal_decorators_lib_index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("@babel/plugin-proposal-decorators/lib/index"),_babel_plugin_proposal_class_properties_lib_index__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("@babel/plugin-proposal-class-properties/lib/index"),_babel_preset_env_lib_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("@babel/preset-env/lib/index"),_babel_preset_react_lib_index__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("@babel/preset-react/lib/index"),_babel_preset_flow_lib_index__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("@babel/preset-flow/lib/index"),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(__webpack_exports__),_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/handlers/babel/vue.js");function parseCodeToAst(fileAsString,fileType,cb){_babel_core__WEBPACK_IMPORTED_MODULE_0__.parse(fileAsString,{filename:"file."+fileType,presets:getPresets(fileType),plugins:[[_babel_plugin_proposal_decorators_lib_index__WEBPACK_IMPORTED_MODULE_2__,{legacy:!0}],[_babel_plugin_proposal_class_properties_lib_index__WEBPACK_IMPORTED_MODULE_3__,{loose:!0}]]},function(err,result){cb(err,result)})}function getPresets(fileType){var presets=[_babel_preset_env_lib_index__WEBPACK_IMPORTED_MODULE_4__];return"ts"==fileType?presets.push(_babel_preset_typescript_lib_index__WEBPACK_IMPORTED_MODULE_1__):"jsx"==fileType?presets.push(_babel_preset_react_lib_index__WEBPACK_IMPORTED_MODULE_5__):"tsx"==fileType?(presets.push(_babel_preset_react_lib_index__WEBPACK_IMPORTED_MODULE_5__),presets.push([_babel_preset_typescript_lib_index__WEBPACK_IMPORTED_MODULE_1__])):"flow"==fileType&&presets.push(_babel_preset_flow_lib_index__WEBPACK_IMPORTED_MODULE_6__),presets}},"./dist/tsbuild/app/handlers/babel/recast.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{astRecastToCode:()=>function(ast){return recast__WEBPACK_IMPORTED_MODULE_0__.print(ast).code},parseBlockCodeToNode:()=>function(code){code=recast__WEBPACK_IMPORTED_MODULE_0__.parse(code);return code.program.body[0]},parseRecast:()=>function(file,fileType){var parsers={js:recast_parsers_babel__WEBPACK_IMPORTED_MODULE_1__,ts:recast_parsers_typescript__WEBPACK_IMPORTED_MODULE_2__};return recast__WEBPACK_IMPORTED_MODULE_0__.parse(file,{parser:parsers[fileType]})}});var recast__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("recast"),recast_parsers_babel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("recast/parsers/babel"),recast_parsers_typescript__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("recast/parsers/typescript")},"./dist/tsbuild/app/handlers/babel/vue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{codeVueToAstWithBabel:()=>function(fileAsString,done){(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({parseVue:cb=>{var parsed=(0,_vue_compiler_sfc__WEBPACK_IMPORTED_MODULE_0__.parse)(fileAsString);null!=parsed?.descriptor?.script?.content||null!=parsed?.descriptor?.scriptSetup?.content?cb(null,parsed):null===parsed?.descriptor?.script?cb("File has no script"):cb("Error parse vue file")},codeWithOffsetLines:(parseVue,cb)=>{var parseVue=parseVue.descriptor;let updatedContent=null;null!=parseVue?.script?.content&&(updatedContent=makeStringForScript(parseVue.script)),null!=parseVue?.scriptSetup?.content&&(parseVue=makeStringForScript(parseVue.scriptSetup),updatedContent=null==updatedContent?parseVue:function(str1,str2){var lines1=str1.split("\n"),lines2=str2.split("\n"),maxLength=Math.max(lines1.length,lines2.length),mergedLines=[];for(let i=0;i<maxLength;i++){var line1=lines1[i]||"",line2=lines2[i]||"";mergedLines.push(line1+line2)}return mergedLines.join("\n")}(updatedContent,parseVue)),cb(null,updatedContent)},parseCodeAst:(codeWithOffsetLines,cb)=>{(0,_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_1__.parseCodeToAst)(codeWithOffsetLines,"ts",cb)}},(err,res)=>{console.error(err),done(err,res?.parseCodeAst)})}});var _vue_compiler_sfc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@vue/compiler-sfc"),_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/babel/fileToAstWithBabel.js"),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async");function makeStringForScript(script){var scriptContent=script.content,script=script.loc.start.line-1;return"\n".repeat(script)+scriptContent}},"./dist/tsbuild/app/handlers/event-service/loading.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getLoadIngService:()=>function(){return loadingService},initLoadingService:()=>function(){loadingService.subscribe(isLoading=>{_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__.mSocketServer?.socketApp.emit("loading",isLoading)})},loadingServiceIsLoaded:()=>function(){loadingService.next(!1)},loadingServiceIsLoading:()=>function(){loadingService.next(!0)},sendLoadingStatus:()=>function(){_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__.mSocketServer.socketApp.emit("loading",loadingService.getValue())}});var __webpack_exports__=__webpack_require__("rxjs"),_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js");const loadingService=new __webpack_exports__.BehaviorSubject(!0)},"./dist/tsbuild/app/handlers/event-service/play-stop.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getIsRunning:()=>function(){return isRunning}});__webpack_exports__=__webpack_require__("rxjs");const isRunning=new __webpack_exports__.BehaviorSubject(!0)},"./dist/tsbuild/app/handlers/externalApp.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExternalApp:()=>ExternalApp,killPidWithPort:()=>async function(port){try{var pids=await find_pid_from_port__WEBPACK_IMPORTED_MODULE_1___default()(port);null!=pids?.all?.[0]&&(pids.all[0],process.kill(pids.all[0],"SIGKILL"),await new Promise(resolve=>setTimeout(resolve,300)))}catch(e){}},killPort:()=>killPort,killProcessWithPort:()=>function(port,cb){find_pid_from_port__WEBPACK_IMPORTED_MODULE_1___default()(port).then(pids=>{1<=pids?.all?.length()&&pids.all.forEach(pid=>{try{process.kill(pid,"SIGKILL")}catch(ex){}}),cb()}).catch(()=>{cb()})}});var __webpack_exports__=__webpack_require__("ps-tree"),ps_tree__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("find-pid-from-port"),find_pid_from_port__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__);class ExternalApp{childProcess;close(){null!=this.childProcess&&(this.childProcess.stdout.pause(),this.childProcess.stderr.pause(),this.childProcess.kill(),killPort(this.childProcess.pid))}}function killPort(pid,callback){callback=callback||function(){};ps_tree__WEBPACK_IMPORTED_MODULE_0___default()(pid,function(err,children){[pid].concat(children.map(function(p){return p.PID})).forEach(function(tpid){try{process.kill(tpid,"SIGKILL")}catch(ex){}}),callback()})}},"./dist/tsbuild/app/handlers/helpers/filesExtensions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{allowedExtensions:()=>allowedExtensions,allowedExtensionsPatternWithMap:()=>function(){return".{ts,js,mjs,cjs,map,jsx,tsx,vue,flow}"},allowedExtensionsPatternWithoutMap:()=>function(){return".{ts,js,mjs,cjs,jsx,tsx,vue,flow}"},fileEndWithExtension:()=>fileEndWithExtension,getTypeScriptExtension:()=>function(){return[".ts",".tsx"]},isAllowedFileExtension:()=>function(filePath){return fileEndWithExtension(filePath,allowedExtensions())}});var _prototype__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/prototype.js");function allowedExtensions(){return[".ts",".js",".mjs",".cjs",".jsx",".tsx",".vue",".flow"]}function fileEndWithExtension(filePath,extensions){return!!(0,_prototype__WEBPACK_IMPORTED_MODULE_0__.endsWithAny)(extensions,filePath)}},"./dist/tsbuild/app/handlers/libs/line-column-path.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{extractFileDetails:()=>function(stack){var regex=/\((\/.*\.js):(\d+):(\d+)\)| at (\/.*\.js):(\d+):(\d+)/g,files=[];let match=regex.exec(stack);for(;null!=match;){var filePath=match[1]||match[4],line=parseInt(match[2]||match[5]),column=parseInt(match[3]||match[6]);files.push({filePath:filePath,line:line,column:column}),match=regex.exec(stack)}return files}})},"./dist/tsbuild/app/handlers/sockets/SocketApp.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SocketAppClass:()=>SocketAppClass});var _status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_event_service_loading__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/event-service/loading.js");class SocketAppClass{ss;mSocketApp;nsp;prevStatusUi;bufferOffline=[];consoleQueue=[];debounceTime=10;timeoutID=null;constructor(ss){this.ss=ss}get socketApp(){return null!=this.mSocketApp?this.mSocketApp:{emit:(...args)=>{"loading"!==args[0]&&this.bufferOffline.push(args)}}}listen(){this.nsp=this.ss.io.of("/app"),this.nsp.on("connection",this.onConnection.bind(this)),this.nsp.on("disconnect",this.onDisconnect.bind(this))}onConnection(socket){this.mSocketApp=socket,this.mSocketApp.on("get-status",this.onGetStatus.bind(this)),this.mSocketApp.on("set-status",this.onSetStatus.bind(this)),this.sendBuffer()}onDisconnect(){}sendBuffer(){this.bufferOffline?.forEach(arg=>{this.mSocketApp.emit(arg[0],...arg.slice(1))}),this.bufferOffline=[]}onGetStatus(data){this.sendStatus()}onSetStatus(data){(0,_status_status__WEBPACK_IMPORTED_MODULE_0__.updateStatus)(data),this.sendStatus()}sendStatus(){try{var statusUi=(0,_status_status__WEBPACK_IMPORTED_MODULE_0__.getAppStatusForUI)();this.prevStatusUi!=statusUi&&((0,_event_service_loading__WEBPACK_IMPORTED_MODULE_1__.sendLoadingStatus)(),this.prevStatusUi=statusUi,this.socketApp.emit("status",statusUi))}catch(e){console.error(e)}}close(){this.nsp?.off("connection",this.onConnection),this.mSocketApp?.offAnyOutgoing(),this.mSocketApp?.disconnect(!0)}clearBuffer(){this.bufferOffline=[]}addConsoleMessage(consoleMsg){this.consoleQueue.push(consoleMsg),this.debounceAndSendConsole()}debounceAndSendConsole(){this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>{0<this.consoleQueue.length&&(this.consoleQueue.length,this.socketApp.emit("cdp-console",this.consoleQueue),this.consoleQueue=[])},this.debounceTime)}}},"./dist/tsbuild/app/handlers/sockets/SocketIde.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SocketIdeClass:()=>SocketIdeClass});var _routes_ide_plugin_event__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/routes/ide-plugin/event.js"),_services_tracer_target_files_onOpenedFiles__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/onOpenedFiles.js"),_status_status__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_services_handle_status_breakpoints_ide_breakpointsIde__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/handle-status/breakpoints-ide/breakpointsIde.js"),_common_logger__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/common/logger.js");class SocketIdeClass{ss;scIde;nsp;lastPing=0;checkPing;constructor(ss){this.ss=ss,this.listenIde()}listenIde(){this.nsp=this.ss.io.of("/ide"),this.nsp.on("connection",this.onConnection.bind(this))}onConnection(socket){this.scIde=socket,this.scIde.on("ev",this.onEvent.bind(this)),this.scIde.on("opened-files",this.onOpenedFiles.bind(this)),this.scIde.on("ping",this.onPing.bind(this)),this.scIde.on("breakpoints",this.onBreakpoint.bind(this)),this.sendTargetProject(),this.intervalCheckPing()}intervalCheckPing(){this.doCheckPing(),this.clearCheckPing(),this.checkPing=setInterval(()=>{this.doCheckPing()},1e3)}doCheckPing(){this.lastPing>Date.now()-4e3&&null!=_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.project?(0,_status_status__WEBPACK_IMPORTED_MODULE_2__.updateStatusAndSendUpdateToUi)("socket.ide.connected",!0):(0,_status_status__WEBPACK_IMPORTED_MODULE_2__.updateStatusAndSendUpdateToUi)("socket.ide.connected",!1)}clearCheckPing(){null!=this.checkPing&&(clearInterval(this.checkPing),this.checkPing=null)}onEvent(ev){_common_logger__WEBPACK_IMPORTED_MODULE_4__.default.info(ev),(0,_routes_ide_plugin_event__WEBPACK_IMPORTED_MODULE_0__.socketEvent)(ev)}onPing(ev){this.lastPing=Date.now()}onBreakpoint(projectRoot,bps){bps?.length;let bpsArray=bps;"string"==typeof bps&&(bpsArray=JSON.parse(bps)),(0,_services_handle_status_breakpoints_ide_breakpointsIde__WEBPACK_IMPORTED_MODULE_3__.updateBreakpointsIde)(bpsArray)}onOpenedFiles(...files){_common_logger__WEBPACK_IMPORTED_MODULE_4__.default.info("On Opened Files - "+files?.length),(0,_services_tracer_target_files_onOpenedFiles__WEBPACK_IMPORTED_MODULE_1__.onOpenedFiles)(files)}sendTargetProject(){this.scIde.emit("target-project",_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.project?.appRoot)}close(){this.clearCheckPing(),this.nsp.off("connection",this.onConnection),this.scIde?.offAnyOutgoing(),this.scIde?.disconnect(!0)}}},"./dist/tsbuild/app/handlers/sockets/SocketServer.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SocketServer:()=>SocketServer});var socket_io__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("socket.io"),_SocketIde_class__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/SocketIde.class.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),_SocketApp_class__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/SocketApp.class.js"),_common_logger__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/common/logger.js");class SocketServer{io;socketIde;socketAppClass=new _SocketApp_class__WEBPACK_IMPORTED_MODULE_3__.SocketAppClass(this);constructor(){this.initServer(),setTimeout(()=>{this.socketAppClass.listen(),this.initSocketIde()},1)}initSocketIde(){this.socketIde=new _SocketIde_class__WEBPACK_IMPORTED_MODULE_1__.SocketIdeClass(this)}get socketApp(){return this.socketAppClass.socketApp}onError(err){err.message}onConnect(ev){}onConnection(ev){}onDisconnect(ev){}close(){this.io?.close(),this.socketIde?.close(),this.socketAppClass?.close()}sendStatus(){null!=this.socketAppClass.mSocketApp&&this.socketAppClass?.sendStatus()}initServer(){var wsPort=nconf__WEBPACK_IMPORTED_MODULE_2___default().get("app:websocketPort");this.io=new socket_io__WEBPACK_IMPORTED_MODULE_0__.Server({transports:["polling","websocket"],cors:{origin:"*",methods:["GET","POST"]},connectTimeout:3e3,pingInterval:1e3,pingTimeout:3e3}),this.io.listen(wsPort),_common_logger__WEBPACK_IMPORTED_MODULE_4__.default.info("IDE port : "+wsPort),this.io.on("connect_error",this.onError.bind(this)),this.io.on("connect",this.onConnect.bind(this)),this.io.on("connection",this.onConnection.bind(this)),this.io.on("disconnect",this.onDisconnect.bind(this))}}},"./dist/tsbuild/app/handlers/sockets/checkPortInUse.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{checkPortInUse:()=>function(port,callback){const server=(0,net__WEBPACK_IMPORTED_MODULE_0__.createServer)();server.once("error",err=>{"EADDRINUSE"===err.code?callback(!0):callback(!1)}),server.once("listening",()=>{server.close(),callback(!1)}),server.listen(port)}});var net__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("net")},"./dist/tsbuild/app/handlers/sockets/initSocket.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SocketServer:()=>_SocketServer_class__WEBPACK_IMPORTED_MODULE_0__.SocketServer,initFakeSocketServer:()=>function(){mSocketServer={socketApp:{emit:txt=>{}},sendStatus:()=>{}}},initSocketServer:()=>function(cb){mSocketServer?function(cb){mSocketServer.close(),setTimeout(()=>{mSocketServer=null,setTimeout(()=>{cb()},100)},100)}(()=>{createSocketServer(cb)}):createSocketServer(cb)},mSocketServer:()=>mSocketServer});var _SocketServer_class__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/SocketServer.class.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),_checkPortInUse__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/checkPortInUse.js"),_common_logger__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/common/logger.js");let mSocketServer;function createSocketServer(cb){(0,_checkPortInUse__WEBPACK_IMPORTED_MODULE_2__.checkPortInUse)(nconf__WEBPACK_IMPORTED_MODULE_1___default().get("app:websocketPort"),portInUse=>{0==portInUse?(mSocketServer=new _SocketServer_class__WEBPACK_IMPORTED_MODULE_0__.SocketServer,cb()):(portInUse="Port "+nconf__WEBPACK_IMPORTED_MODULE_1___default().get("app:websocketPort")+" is already used",_common_logger__WEBPACK_IMPORTED_MODULE_3__.default.error(portInUse),cb(portInUse))})}},"./dist/tsbuild/app/handlers/status/status.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{appCache:()=>appCache,appStatus:()=>appStatus,getAppStatusForUI:()=>function(){return JSON.parse(JSON.stringify({...appStatus,project:appCache.project}))},initAppStatus:()=>initAppStatus,initStatus:()=>function(done){(0,async__WEBPACK_IMPORTED_MODULE_3__.autoInject)({appStatus:cb=>{initAppStatus(),(0,_common_config_isAppDev__WEBPACK_IMPORTED_MODULE_8__.isAppDev)()?appStatus.rootPath=path__WEBPACK_IMPORTED_MODULE_0__.join(__dirname,"../../../../"):appStatus.rootPath=path__WEBPACK_IMPORTED_MODULE_0__.join(__dirname,"./"),appStatus.defaultFilesPath=path__WEBPACK_IMPORTED_MODULE_0__.join(appStatus.rootPath,nconf__WEBPACK_IMPORTED_MODULE_2___default().get("defaultFilesPath")),cb()},selectedFile:(appStatus,cb)=>{!function(cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_7__.orm.SelectedFileModel.findOneSelected((err,res)=>{res?.appRoot?(appCache.selectedFile=res,appCache.selectedFile._id=String(appCache.selectedFile._id),cb()):cb("no Selected File")})}(cb)},fileInterface:(selectedFile,cb)=>{!function(cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_7__.orm.FileInterfaceModel.findWithIdSelectLean(appCache.selectedFile.file,null,(err,res)=>{res?._id?(appCache.fileInterface=res,cb(null,!0)):cb("no fileInterface")})}(cb)},project:(fileInterface,selectedFile,cb)=>{!function(cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_7__.orm.ProjectModel.findOneWithWithId(appCache.selectedFile.project,(error,result)=>{null!=result?._id&&(null==appCache.project&&(appCache.project={}),appCache.project._id=String(result._id),appCache.project.appRoot=result.appRoot,appCache.project.ideRoot=result.ideRoot),cb(null,!0)})}(cb)},paths:(project,cb)=>{(0,_services_handle_status_status_change_makePaths__WEBPACK_IMPORTED_MODULE_6__.makePaths)({filePath:appCache.selectedFile.filePath,ideRoot:appCache.project.ideRoot},cb)}},err=>{done(err)})},setAppCache:()=>function(data){for(const key in data)(0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(appCache,key,data[key])},setAppStatus:()=>function(data){for(const key in data)(0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(appStatus,key,data[key])},updateStatus:()=>function(data){var canUpdate=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.pick)(data,["mode","basePath","activeProject","elementsLocked","breakpointCondition","isRunning"]);for(const key in canUpdate)(0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(appStatus,key,canUpdate[key]),"isRunning"==key&&(0,_event_service_play_stop__WEBPACK_IMPORTED_MODULE_4__.getIsRunning)().next(canUpdate[key])},updateStatusAndSendUpdateToUi:()=>function(key,value){var currentValue=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.get)(appStatus,key);null!=value&&currentValue!=value&&((0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(appStatus,key,value),_sockets_initSocket__WEBPACK_IMPORTED_MODULE_5__.mSocketServer.sendStatus())}});var path__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("path"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lodash"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),async__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("async"),_event_service_play_stop__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/event-service/play-stop.js"),_sockets_initSocket__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),_services_handle_status_status_change_makePaths__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/makePaths.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js"),_common_config_isAppDev__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/common/config/isAppDev.js");let appStatus,appCache;function initAppStatus(){appCache={fileInterface:null,selectedFile:{cursor:null},project:null},appStatus={CDP:{"target-debug-app":{}},socket:{ide:{connected:!1}},mode:"tracer",elementsLocked:{file:!1,cursor:!1},activeProject:{isDebugAppSameAsSelectedFile:!1},isRunning:!0}}initAppStatus()},"./dist/tsbuild/app/handlers/update-notifier/borderedText.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=text=>{var text=text.split("\n"),width=Math.max(...text.map(l=>l.length)),res=[`┌${"─".repeat(width+2)}┐`];for(const line of text)res.push(`│ ${line.padEnd(width)} │`);return res.push(`└${"─".repeat(width+2)}┘`),res.join("\n")}},"./dist/tsbuild/app/handlers/update-notifier/cache.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{createConfigDir:()=>createConfigDir,getLastUpdate:()=>getLastUpdate,saveLastUpdate:()=>saveLastUpdate});var __webpack_exports__=__webpack_require__("os"),__webpack_exports__=__webpack_require__.n(__webpack_exports__),path__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("path"),path__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__),path__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__),__webpack_require__=__webpack_exports__().homedir();const configDir=process.env.XDG_CONFIG_HOME||path__WEBPACK_IMPORTED_MODULE_1___default().join(__webpack_require__,".config","simple-update-notifier"),getConfigFile=packageName=>path__WEBPACK_IMPORTED_MODULE_1___default().join(configDir,packageName.replace("@","").replace("/","__")+".json"),createConfigDir=()=>{fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(configDir)||fs__WEBPACK_IMPORTED_MODULE_2___default().mkdirSync(configDir,{recursive:!0})},getLastUpdate=packageName=>{packageName=getConfigFile(packageName);try{if(fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(packageName))return JSON.parse(fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(packageName,"utf8")).lastUpdateCheck}catch{}},saveLastUpdate=packageName=>{packageName=getConfigFile(packageName);fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(packageName,JSON.stringify({lastUpdateCheck:(new Date).getTime()}))}},"./dist/tsbuild/app/handlers/update-notifier/getDistVersion.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var __webpack_exports__=__webpack_require__("https"),https__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__);const __WEBPACK_DEFAULT_EXPORT__=async(packageName,distTag)=>{const url=`https://registry.npmjs.org/-/package/${packageName}/dist-tags`;return new Promise((resolve,reject)=>{https__WEBPACK_IMPORTED_MODULE_0___default().get(url,res=>{let body="";res.on("data",chunk=>body+=chunk),res.on("end",()=>{try{var version=JSON.parse(body)[distTag];version||reject(new Error("Error getting version")),resolve(version)}catch{reject(new Error("Could not parse version response"))}})}).on("error",err=>reject(err))})}},"./dist/tsbuild/app/handlers/update-notifier/hasNewVersion.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var __webpack_exports__=__webpack_require__("semver"),semver__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_cache__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/update-notifier/cache.js"),_getDistVersion__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/update-notifier/getDistVersion.js");const __WEBPACK_DEFAULT_EXPORT__=async({pkg,updateCheckInterval=864e5,distTag="latest",alwaysRun,debug})=>{(0,_cache__WEBPACK_IMPORTED_MODULE_1__.createConfigDir)();var lastUpdateCheck=(0,_cache__WEBPACK_IMPORTED_MODULE_1__.getLastUpdate)(pkg.name);if(alwaysRun||!lastUpdateCheck||lastUpdateCheck<(new Date).getTime()-updateCheckInterval){alwaysRun=await(0,_getDistVersion__WEBPACK_IMPORTED_MODULE_2__.default)(pkg.name,distTag);if((0,_cache__WEBPACK_IMPORTED_MODULE_1__.saveLastUpdate)(pkg.name),semver__WEBPACK_IMPORTED_MODULE_0___default().gt(alwaysRun,pkg.version))return alwaysRun;debug&&console.error(`Latest version (${alwaysRun}) not newer than current version (${pkg.version})`)}else debug&&console.error(`Too recent to check for a new update. simpleUpdateNotifier() interval set to ${updateCheckInterval}ms but only ${(new Date).getTime()-lastUpdateCheck}ms since last check.`);return!1}},"./dist/tsbuild/app/handlers/update-notifier/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _isNpmOrYarn__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/update-notifier/isNpmOrYarn.js"),_hasNewVersion__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/update-notifier/hasNewVersion.js"),_borderedText__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/update-notifier/borderedText.js");const __WEBPACK_DEFAULT_EXPORT__=async args=>{if(args.alwaysRun||process.stdout.isTTY&&(!_isNpmOrYarn__WEBPACK_IMPORTED_MODULE_0__.default||args.shouldNotifyInNpmScript))try{var latestVersion=await(0,_hasNewVersion__WEBPACK_IMPORTED_MODULE_1__.default)(args);latestVersion&&console.error((0,_borderedText__WEBPACK_IMPORTED_MODULE_2__.default)(`New version of ${args.pkg.name} available!
Current Version: ${args.pkg.version}
Latest Version: `+latestVersion))}catch(err){args.debug&&err instanceof Error&&console.error("Unexpected error in simpleUpdateNotifier():",err)}else args.debug&&console.error("Opting out of running simpleUpdateNotifier()")}},"./dist/tsbuild/app/handlers/update-notifier/isNpmOrYarn.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var __webpack_exports__=__webpack_require__("process"),__webpack_require__=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__().env.npm_package_json,__webpack_require__=__webpack_require__().env.npm_config_user_agent,isNpm6=Boolean(__webpack_require__&&__webpack_require__.startsWith("npm")),__webpack_exports__=Boolean(__webpack_exports__&&__webpack_exports__.endsWith("package.json")),isNpm6=isNpm6||__webpack_exports__,__webpack_exports__=Boolean(__webpack_require__&&__webpack_require__.startsWith("yarn"));const __WEBPACK_DEFAULT_EXPORT__=isNpm6||__webpack_exports__},"./dist/tsbuild/app/handlers/update-notifier/run-app-notifier.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{runUpdateNotifier:()=>function(){{var packageJsonPath;(0,_common_config_isAppDev__WEBPACK_IMPORTED_MODULE_0__.isAppDev)()||(packageJsonPath=__dirname+"/package.json",null!=(packageJsonPath=(0,fs__WEBPACK_IMPORTED_MODULE_1__.readFileSync)(packageJsonPath)?.toString())&&(packageJsonPath=JSON.parse(packageJsonPath),(0,_index__WEBPACK_IMPORTED_MODULE_2__.default)({pkg:packageJsonPath,name:packageJsonPath.name,version:packageJsonPath.version,shouldNotifyInNpmScript:!0,alwaysRun:!1,debug:!1}).then(()=>{})))}}});var _common_config_isAppDev__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/common/config/isAppDev.js"),fs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fs"),_index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/update-notifier/index.js")},"./dist/tsbuild/app/initServices.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{appServices:()=>appServices,initServices:()=>function(callback){_common_logger__WEBPACK_IMPORTED_MODULE_16__.default.info("***** INIT SERVICES *****"),(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({appServices:cb=>{appServices(cb)},authentication:cb=>{(0,_services_authentication_authentication__WEBPACK_IMPORTED_MODULE_15__.authentication)(cb)},renewAuthentication:(authentication,cb)=>{(0,_services_authentication_authentication__WEBPACK_IMPORTED_MODULE_15__.renewAuthentication)(cb)},projectServices:(appServices,authentication,cb)=>{projectServices(cb)}},(err,data)=>{console.error(err),(0,_handlers_event_service_loading__WEBPACK_IMPORTED_MODULE_8__.loadingServiceIsLoaded)(),callback()})},projectServices:()=>projectServices});var __webpack_exports__=__webpack_require__("node-graceful"),__webpack_exports__=__webpack_require__.n(__webpack_exports__),node_process__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("node:process"),node_process__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(node_process__WEBPACK_IMPORTED_MODULE_1__),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async"),_models_mongo_init__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js"),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_services_ts_config_tsConfig__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/ts-config/tsConfig.js"),_handlers_event_service_loading__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/handlers/event-service/loading.js"),_services_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/services/tracer/tab-session/get-tab-session.js"),_services_tracer_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/target-files-mgt.js"),_common_server__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./dist/tsbuild/common/server.js"),_services_project_files_init_project_add_recompyle_folder_and_files__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./dist/tsbuild/app/services/project-files/init-project/add-recompyle-folder-and-files.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js"),node_process__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("nconf"),node_process__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__.n(node_process__WEBPACK_IMPORTED_MODULE_1__),_services_authentication_authentication__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./dist/tsbuild/app/services/authentication/authentication.js"),_common_logger__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./dist/tsbuild/common/logger.js");function appServices(callback){_common_logger__WEBPACK_IMPORTED_MODULE_16__.default.info("***** INIT APP SERVICE *****"),(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({db:cb=>{(0,_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_13__.initOrm)(cb)},socket:cb=>{(0,_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_4__.initSocketServer)(cb)},loading:(socket,cb)=>{(0,_handlers_event_service_loading__WEBPACK_IMPORTED_MODULE_8__.initLoadingService)(),cb()}},err=>{callback(err)})}function projectServices(callback){_common_logger__WEBPACK_IMPORTED_MODULE_16__.default.info("***** INIT PROJECT SERVICE *****"),(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({status:cb=>{(0,_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__.initStatus)(cb)},project:(status,cb)=>{null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__.appCache.project?._id?cb():cb("no project selected")},addRecompyleFolder:(project,cb)=>{(0,_services_project_files_init_project_add_recompyle_folder_and_files__WEBPACK_IMPORTED_MODULE_12__.addRecompyleFolderAndFiles)(cb)},checkPackage:(addRecompyleFolder,cb)=>{cb()},tsCompiler:(checkPackage,cb)=>{cb()},tabSession:(project,cb)=>{(0,_services_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_9__.initTabSession)(cb)},targetFiles:(tsCompiler,project,cb)=>{(0,_services_tracer_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_10__.initTargetFiles)(cb)},rteInstances:(tabSession,targetFiles,tsCompiler,project,cb)=>{(0,_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__.rteInstancesInit)(cb)}},(err,result)=>{console.error(err),callback(err,result)})}function killAppServices(){(0,_common_server__WEBPACK_IMPORTED_MODULE_11__.getExpressServer)().close(),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_4__.mSocketServer?.close(),(0,_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__.closeAllPorts)(),(0,_models_mongo_init__WEBPACK_IMPORTED_MODULE_3__.disconnectMongo)(),_services_ts_config_tsConfig__WEBPACK_IMPORTED_MODULE_7__.tsCompiler?.close()}__webpack_exports__().captureExceptions=!0,__webpack_exports__().captureRejections=!0,__webpack_exports__().on("exit",(signal,error)=>new Promise(resolve=>{console.error("\n\n\nEXIT APP",signal),console.error(error),killAppServices(),setTimeout(()=>resolve(1),500)})),"dev"==node_process__WEBPACK_IMPORTED_MODULE_1__().get("env")&&((__webpack_exports__=__webpack_require__("segfault-handler")).registerHandler("crash.log"),__webpack_exports__.registerHandler("crash.log",function(signal,address,stack){console.error("segfault",signal,address,stack)}),["SIGINT","SIGUSR1","SIGUSR2","SIGTERM","exit"].forEach(eventType=>{node_process__WEBPACK_IMPORTED_MODULE_1___default().on(eventType,(reason,p)=>{console.error("%% SHUTDOWN %% "+eventType),console.error("Error",reason),killAppServices()})}))},"./dist/tsbuild/app/middlewares/async-try-catch.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{tryCatch:()=>function(tasks){return tasks},tryCatch2:()=>function(tasks){var newTasks={};for(const tasksKey in tasks)newTasks[tasksKey]=(...args)=>{try{tasks[tasksKey](...args)}catch(e){console.error("TRY-CATCH-2 :"),console.error(e),args[args.length-1](e)}};return newTasks}})},"./dist/tsbuild/app/middlewares/checkHasProject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{hasProject:()=>function(req,res,next){null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project?._id?next():res.status(500).send({error:"no project selected"})}});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js")},"./dist/tsbuild/app/middlewares/error.handler.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>function(err,req,res,next){req.originalUrl.startsWith("/socket.io/")||(console.error(req.originalUrl),console.error(err));req=err.errors||[{message:err.message}];res.status(err.status||500).json({errors:req})}})},"./dist/tsbuild/app/middlewares/log-routes.handler.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{logRoutes:()=>function(req,res,next){_common_logger__WEBPACK_IMPORTED_MODULE_0__.default.info("API : "+req.method+"   "+req.originalUrl),next()}});var _common_logger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/common/logger.js")},"./dist/tsbuild/app/middlewares/response.handler.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>function(req,res,next){res.sendResponse=function(err,data){null==err&&null!=data?"string"==typeof data?res.send({status:"ok",message:data}):(data.status="ok",res.send(data)):null!==err?res.send({status:"err",err:err}):res.send({status:"ok"})},next()}})},"./dist/tsbuild/app/models/app-orm/mongo/bpResponseData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BpResponseDataOrmMongo:()=>BpResponseDataOrmMongo});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_mongo_init__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js");class BpResponseDataOrmMongo extends __webpack_exports__.OrmBpResponseAbstractClass{static findLean=(fileInterfaceId,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.BpResponseData.find({fileInterface:fileInterfaceId,fiPath:{$ne:"rte.xxx"}}).lean().sort({updatedAt:-1}).limit(100).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static create=(object,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.BpResponseData.create(object).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}}},"./dist/tsbuild/app/models/app-orm/mongo/consoleLine.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ConsoleLineOrmMongo:()=>ConsoleLineOrmMongo});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_mongo_init__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js");class ConsoleLineOrmMongo extends __webpack_exports__.OrmConsoleLineAbstractClass{static create=(object,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.ConsoleLineModel.create(object).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static removeWithTabSession=(tabSessionIds,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.ConsoleLineModel.deleteMany({tab:{$in:tabSessionIds}}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}}},"./dist/tsbuild/app/models/app-orm/mongo/fileInterface.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FileInterfaceOrmMongo:()=>FileInterfaceOrmMongo});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_mongo_init__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js");class FileInterfaceOrmMongo extends __webpack_exports__.OrmFileInterfaceAbstractClass{static removeFileHashWithFilePath=(filePath,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.FileInterfaceModel.findOneAndUpdate({"file.filePath":filePath},{$unset:{fileHash:1}}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findWithFilePathSelectLean=(filePath,select,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.FileInterfaceModel.findOne({"file.filePath":filePath}).select(select).lean().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findWithIdSelectLean=(id,select,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.FileInterfaceModel.findOne({_id:id}).select(select).lean().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findWithFilePathAndUpdate=(filePath,update,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.FileInterfaceModel.findOneAndUpdateLean({"file.filePath":filePath},update,(err,doc)=>{cb(err,doc?.toJSON())})};static deleteOne=(filePath,project,callback)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.FileInterfaceModel.deleteOne({project:project,"file.filePath":filePath}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(callback))}}},"./dist/tsbuild/app/models/app-orm/mongo/paramsData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ParamsDataOrmMongo:()=>ParamsDataOrmMongo});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_mongo_init__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js");class ParamsDataOrmMongo extends __webpack_exports__.OrmParamsDataAbstractClass{static findLean=(fileInterfaceId,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.ParamsDataModel.find({file:fileInterfaceId,fiPath:{$ne:"rte.out"}}).lean().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static create=(object,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.ParamsDataModel.create(object).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}}},"./dist/tsbuild/app/models/app-orm/mongo/project.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProjectOrmMongo:()=>ProjectOrmMongo});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_mongo_init__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js");class ProjectOrmMongo extends __webpack_exports__.OrmProjectAbstractClass{static findOneWithWithId=(id,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.ProjectModel.findOne({_id:id}).lean().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findOneAndUpdate=(query,update,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.ProjectModel.findOneAndUpdate(query,update,{upsert:!0,new:!0}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}}},"./dist/tsbuild/app/models/app-orm/mongo/selectedFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SelectedFileOrmMongo:()=>SelectedFileOrmMongo});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_mongo_init__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js");class SelectedFileOrmMongo extends __webpack_exports__.OrmSelectedFileAbstractClass{static findOneSelected=cb=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.SelectedFileModel.findOne({selected:!0}).lean().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findSelectedAndUpdate=(update,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.SelectedFileModel.findOneAndUpdate({selected:!0},update,{upsert:!0,returnOriginal:!1}).then(data=>{cb(null,data?.toJSON())}).catch(err=>{cb(err)})}}},"./dist/tsbuild/app/models/app-orm/mongo/tabSession.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TabSessionOrmMongo:()=>TabSessionOrmMongo});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_mongo_init__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js");class TabSessionOrmMongo extends __webpack_exports__.OrmTabSessionAbstractClass{static findWithProject=(projectId,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.TabSessionModel.find({project:projectId}).select("name createdAt").sort({createdAt:1}).lean().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findWithProjectLines=(projectId,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.TabSessionModel.find({project:projectId}).select("lines name createdAt").sort({createdAt:1}).lean().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static addLineToTab=(tabSessionId,consoleLineId,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.TabSessionModel.updateOne({_id:tabSessionId},{$push:{lines:consoleLineId}},null).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static create=(object,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.TabSessionModel.create(object).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static removeWithTabSession=(tabSessionIds,projectId,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.TabSessionModel.deleteMany({_id:{$in:tabSessionIds},project:projectId}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static getTabSessionWithId=(tabSessionId,projectId,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.TabSessionModel.findOne({project:projectId,_id:tabSessionId}).select("lines name createdAt").populate("lines").lean().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}}},"./dist/tsbuild/app/models/app-orm/mongo/targetFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TargetFileOrmMongo:()=>TargetFileOrmMongo});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_mongo_init__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js");class TargetFileOrmMongo extends __webpack_exports__.OrmTargetFileAbstractClass{static remove=(query,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.TargetFileModel.deleteMany(query).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findWithProjectLean=(projectId,cb)=>{_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.TargetFileModel.find({project:projectId}).select("filePath classes functions mainFunctions options status").lean().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static bulkWrite=(targetFiles,cb)=>{const query=[];targetFiles.forEach(tf=>{query.push({updateOne:{filter:{filePath:tf.filePath},update:tf,upsert:!0}})}),_mongo_init__WEBPACK_IMPORTED_MODULE_0__.models.TargetFileModel.bulkWrite(query).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}}},"./dist/tsbuild/app/models/app-orm/orm.abstract.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{OrmAbstractClass:()=>OrmAbstractClass,OrmBpResponseAbstractClass:()=>OrmBpResponseAbstractClass,OrmConsoleLineAbstractClass:()=>OrmConsoleLineAbstractClass,OrmFileInterfaceAbstractClass:()=>OrmFileInterfaceAbstractClass,OrmParamsDataAbstractClass:()=>OrmParamsDataAbstractClass,OrmProjectAbstractClass:()=>OrmProjectAbstractClass,OrmSelectedFileAbstractClass:()=>OrmSelectedFileAbstractClass,OrmTabSessionAbstractClass:()=>OrmTabSessionAbstractClass,OrmTargetFileAbstractClass:()=>OrmTargetFileAbstractClass});class OrmAbstractClass{findLean(query,cb){}findSelectLean(query,select,cb){}findOne(query,cb){}findOneLean(query,select,cb){}findOneAndUpdate(query,update,options,cb){}findOneAndUpdateLean(query,update,cb){}update(query,update,cb){}remove(query,cb){}deleteOne(query,cb){}create(object,cb){}bulkWrite(object,cb){}}class OrmProjectAbstractClass{static findOneWithWithId;static findOneAndUpdate}class OrmFileInterfaceAbstractClass{static removeFileHashWithFilePath;static findWithFilePathSelectLean;static findWithIdSelectLean;static findWithFilePathAndUpdate;static deleteOne}class OrmSelectedFileAbstractClass{static findSelectedAndUpdate;static findOneSelected}class OrmTargetFileAbstractClass{static remove;static findWithProjectLean;static bulkWrite}class OrmConsoleLineAbstractClass{static create;static removeWithTabSession}class OrmTabSessionAbstractClass{static findWithProject;static findWithProjectLines;static addLineToTab;static create;static removeWithTabSession;static getTabSessionWithId}class OrmParamsDataAbstractClass{static create;static findLean}class OrmBpResponseAbstractClass{static create;static findLean}},"./dist/tsbuild/app/models/app-orm/orm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{initOrm:()=>function(cb){_common_logger__WEBPACK_IMPORTED_MODULE_19__.default.info("Init Orm"),(null==nconf__WEBPACK_IMPORTED_MODULE_18___default().get("db:local")&&null!=nconf__WEBPACK_IMPORTED_MODULE_18___default().get("db:mongo")?function(cb){useMongoose(),(0,_mongo_init__WEBPACK_IMPORTED_MODULE_8__.initMongoDb)(cb)}:setupTypeOrm)(cb)},orm:()=>orm,useMongoose:()=>useMongoose});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_mongo_fileInterface__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/app-orm/mongo/fileInterface.js"),_mongo_selectedFile__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/models/app-orm/mongo/selectedFile.js"),_mongo_paramsData__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/models/app-orm/mongo/paramsData.js"),_mongo_bpResponseData__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/app-orm/mongo/bpResponseData.js"),_mongo_targetFile__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/models/app-orm/mongo/targetFile.js"),_mongo_consoleLine__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/models/app-orm/mongo/consoleLine.js"),_mongo_tabSession__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/models/app-orm/mongo/tabSession.js"),_mongo_project__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/models/app-orm/mongo/project.js"),_mongo_init__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js"),_typeorm_project__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/models/app-orm/typeorm/project.js"),_typeorm_data_source__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/app/models/app-orm/typeorm/data-source.js"),_typeorm_fileInterface__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./dist/tsbuild/app/models/app-orm/typeorm/fileInterface.js"),_typeorm_selectedFile__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./dist/tsbuild/app/models/app-orm/typeorm/selectedFile.js"),_typeorm_targetFile__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./dist/tsbuild/app/models/app-orm/typeorm/targetFile.js"),_typeorm_tabSession__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./dist/tsbuild/app/models/app-orm/typeorm/tabSession.js"),_typeorm_paramsData__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./dist/tsbuild/app/models/app-orm/typeorm/paramsData.js"),_typeorm_bpResponseData__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./dist/tsbuild/app/models/app-orm/typeorm/bpResponseData.js"),_typeorm_consoleLine__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./dist/tsbuild/app/models/app-orm/typeorm/consoleLine.js"),nconf__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(nconf__WEBPACK_IMPORTED_MODULE_18__),_common_logger__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./dist/tsbuild/common/logger.js");function setupTypeOrm(cb){_common_logger__WEBPACK_IMPORTED_MODULE_19__.default.info("Init TypeORM "),orm.ProjectModel=_typeorm_project__WEBPACK_IMPORTED_MODULE_9__.ProjectOrmTypeOrm,orm.FileInterfaceModel=_typeorm_fileInterface__WEBPACK_IMPORTED_MODULE_11__.FileInterfaceTypeOrm,orm.SelectedFileModel=_typeorm_selectedFile__WEBPACK_IMPORTED_MODULE_12__.SelectedFileTypeOrm,orm.TargetFileModel=_typeorm_targetFile__WEBPACK_IMPORTED_MODULE_13__.TargetFileTypeOrm,orm.ConsoleLineModel=_typeorm_consoleLine__WEBPACK_IMPORTED_MODULE_17__.ConsoleLineTypeOrm,orm.TabSessionModel=_typeorm_tabSession__WEBPACK_IMPORTED_MODULE_14__.TabSessionTypeOrm,orm.ParamsDataModel=_typeorm_paramsData__WEBPACK_IMPORTED_MODULE_15__.ParamsDataTypeOrm,orm.BpResponseData=_typeorm_bpResponseData__WEBPACK_IMPORTED_MODULE_16__.BpResponseDataTypeOrm,(0,_typeorm_data_source__WEBPACK_IMPORTED_MODULE_10__.initTypeOrmDataSource)(),(0,_typeorm_data_source__WEBPACK_IMPORTED_MODULE_10__.initDataSource)(cb)}const orm={ProjectModel:__webpack_exports__.OrmProjectAbstractClass,FileInterfaceModel:__webpack_exports__.OrmFileInterfaceAbstractClass,SelectedFileModel:__webpack_exports__.OrmSelectedFileAbstractClass,TargetFileModel:__webpack_exports__.OrmTargetFileAbstractClass,ConsoleLineModel:__webpack_exports__.OrmConsoleLineAbstractClass,TabSessionModel:__webpack_exports__.OrmTabSessionAbstractClass,ParamsDataModel:__webpack_exports__.OrmParamsDataAbstractClass,BpResponseData:__webpack_exports__.OrmBpResponseAbstractClass};function useMongoose(){orm.ProjectModel=_mongo_project__WEBPACK_IMPORTED_MODULE_7__.ProjectOrmMongo,orm.FileInterfaceModel=_mongo_fileInterface__WEBPACK_IMPORTED_MODULE_0__.FileInterfaceOrmMongo,orm.SelectedFileModel=_mongo_selectedFile__WEBPACK_IMPORTED_MODULE_1__.SelectedFileOrmMongo,orm.TargetFileModel=_mongo_targetFile__WEBPACK_IMPORTED_MODULE_4__.TargetFileOrmMongo,orm.ConsoleLineModel=_mongo_consoleLine__WEBPACK_IMPORTED_MODULE_5__.ConsoleLineOrmMongo,orm.TabSessionModel=_mongo_tabSession__WEBPACK_IMPORTED_MODULE_6__.TabSessionOrmMongo,orm.ParamsDataModel=_mongo_paramsData__WEBPACK_IMPORTED_MODULE_2__.ParamsDataOrmMongo,orm.BpResponseData=_mongo_bpResponseData__WEBPACK_IMPORTED_MODULE_3__.BpResponseDataOrmMongo}},"./dist/tsbuild/app/models/app-orm/typeorm/bpResponseData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BpResponseDataTypeOrm:()=>BpResponseDataTypeOrm});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_type_orm_models_BpResponse__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/BpResponse.js"),typeorm__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("typeorm"),_global__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/global.js");class BpResponseDataTypeOrm extends __webpack_exports__.OrmBpResponseAbstractClass{static findLean=(fileInterfaceId,cb)=>{_type_orm_models_BpResponse__WEBPACK_IMPORTED_MODULE_0__.BpResponseDataEntity.createQueryBuilder().where({fileInterface:fileInterfaceId,fiPath:(0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Not)("rte.xxx")}).orderBy("updatedAt","DESC").limit(100).getMany().then(...(0,_global__WEBPACK_IMPORTED_MODULE_2__.promToCb)(cb))};static create=(object,cb)=>{_type_orm_models_BpResponse__WEBPACK_IMPORTED_MODULE_0__.BpResponseDataEntity.insert(object).then(...(0,_global__WEBPACK_IMPORTED_MODULE_2__.promToCb)(cb))}}},"./dist/tsbuild/app/models/app-orm/typeorm/consoleLine.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ConsoleLineTypeOrm:()=>ConsoleLineTypeOrm});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_type_orm_models_consoleLine__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/consoleLine.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js"),typeorm__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("typeorm"),async__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("async");class ConsoleLineTypeOrm extends __webpack_exports__.OrmConsoleLineAbstractClass{static create=(consoleLine,done)=>{(0,async__WEBPACK_IMPORTED_MODULE_3__.waterfall)([cb=>{_type_orm_models_consoleLine__WEBPACK_IMPORTED_MODULE_0__.ConsoleLineEntity.insert(consoleLine).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))},(consoleLine,cb)=>{null!=consoleLine?.generatedMaps?.[0]?._id?cb(null,consoleLine.generatedMaps[0]):cb("error typeorm create consoleLine")}],(err,result)=>{done(err,result)})};static removeWithTabSession=(tabSessionIds,cb)=>{_type_orm_models_consoleLine__WEBPACK_IMPORTED_MODULE_0__.ConsoleLineEntity.createQueryBuilder().delete().where({tab:(0,typeorm__WEBPACK_IMPORTED_MODULE_2__.In)(tabSessionIds)}).execute().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}}},"./dist/tsbuild/app/models/app-orm/typeorm/data-source.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{initDataSource:()=>function(done){(0,async__WEBPACK_IMPORTED_MODULE_11__.series)([cb=>{(0,typeorm_extension__WEBPACK_IMPORTED_MODULE_10__.createDatabase)({ifNotExist:!0,options:{...getTypeOrmConfig()}}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_12__.promToCb)(cb))},cb=>{AppDataSource.initialize().then(...(0,_global__WEBPACK_IMPORTED_MODULE_12__.promToCb)(cb))}],err=>{console.error(err),done(err)})},initTypeOrmDataSource:()=>function(){AppDataSource=new typeorm__WEBPACK_IMPORTED_MODULE_0__.DataSource({...getTypeOrmConfig(),entities:[_type_orm_models_project__WEBPACK_IMPORTED_MODULE_1__.ProjectEntity,_type_orm_models_fileInterface__WEBPACK_IMPORTED_MODULE_2__.FileInterfaceEntity,_type_orm_models_selectedFile__WEBPACK_IMPORTED_MODULE_3__.SelectedFileEntity,_type_orm_models_targetFile__WEBPACK_IMPORTED_MODULE_4__.TargetFileEntity,_type_orm_models_consoleLine__WEBPACK_IMPORTED_MODULE_5__.ConsoleLineEntity,_type_orm_models_tabSession__WEBPACK_IMPORTED_MODULE_6__.TabSessionEntity,_type_orm_models_ParamsData__WEBPACK_IMPORTED_MODULE_7__.ParamsDataEntity,_type_orm_models_BpResponse__WEBPACK_IMPORTED_MODULE_8__.BpResponseDataEntity],synchronize:!0,logging:!1,debug:!1})}});var typeorm__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("typeorm"),_type_orm_models_project__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/project.js"),_type_orm_models_fileInterface__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/fileInterface.js"),_type_orm_models_selectedFile__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/selectedFile.js"),_type_orm_models_targetFile__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/targetFile.js"),_type_orm_models_consoleLine__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/consoleLine.js"),_type_orm_models_tabSession__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/tabSession.js"),_type_orm_models_ParamsData__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/ParamsData.js"),_type_orm_models_BpResponse__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/BpResponse.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(__webpack_exports__),typeorm_extension__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("typeorm-extension"),async__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("async"),_global__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./dist/tsbuild/global.js"),_common_config_isAppDev__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./dist/tsbuild/common/config/isAppDev.js");let AppDataSource;function getTypeOrmConfig(){if(null!=nconf__WEBPACK_IMPORTED_MODULE_9___default().get("db:local"))return getSqLiteConfig();if(null==nconf__WEBPACK_IMPORTED_MODULE_9___default().get("db:mysql"))return getSqLiteConfig();{let sqlConnectionConfig={type:"mysql",host:"localhost",port:3306,database:"recompyle-dev"};sqlConnectionConfig=null!=nconf__WEBPACK_IMPORTED_MODULE_9___default().get("db:mysql")?{type:"mysql",...nconf__WEBPACK_IMPORTED_MODULE_9___default().get("db:mysql")}:{...sqlConnectionConfig,username:"root",password:"password"};return sqlConnectionConfig}}function getSqLiteConfig(){let pathDb="";return{type:"better-sqlite3",database:(pathDb=(0,_common_config_isAppDev__WEBPACK_IMPORTED_MODULE_13__.isAppDev)()?pathDb:__dirname+"/")+"recompyle-sqlite3.db",nativeBinding:nconf__WEBPACK_IMPORTED_MODULE_9___default().get("appPath")+"/node_modules/better-sqlite3/build/Release/better_sqlite3.node"}}},"./dist/tsbuild/app/models/app-orm/typeorm/fileInterface.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FileInterfaceTypeOrm:()=>FileInterfaceTypeOrm});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_type_orm_models_fileInterface__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/fileInterface.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js"),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async");class FileInterfaceTypeOrm extends __webpack_exports__.OrmFileInterfaceAbstractClass{static removeFileHashWithFilePath=(filePath,cb)=>{(async()=>{var fileInterface=await _type_orm_models_fileInterface__WEBPACK_IMPORTED_MODULE_0__.FileInterfaceEntity.findOne({where:{file:{filePath:filePath}}});fileInterface&&(fileInterface.fileHash=void 0,await _type_orm_models_fileInterface__WEBPACK_IMPORTED_MODULE_0__.FileInterfaceEntity.save(fileInterface)),cb()})()};static findWithFilePathSelectLean=(filePath,select,cb)=>{_type_orm_models_fileInterface__WEBPACK_IMPORTED_MODULE_0__.FileInterfaceEntity.findOne({where:{file:{filePath:filePath}},...this.getSelectParams(select)}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findWithIdSelectLean=(id,select,cb)=>{_type_orm_models_fileInterface__WEBPACK_IMPORTED_MODULE_0__.FileInterfaceEntity.findOne({where:{_id:id},...this.getSelectParams(select)}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static getSelectParams(select){const selectParm={_id:!0};return select?.split(" ").forEach((sel,index)=>{"file"==sel?(selectParm["file.appRoot"]=!0,selectParm["file.filePath"]=!0,selectParm["file.file"]=!0,selectParm["file.fileType"]=!0,selectParm["file.esVersion"]=!0):selectParm[sel]=!0}),selectParm!={}?{select:selectParm}:null}static findWithFilePathAndUpdate=(filePath,update,done)=>{(0,async__WEBPACK_IMPORTED_MODULE_2__.waterfall)([cb=>{_type_orm_models_fileInterface__WEBPACK_IMPORTED_MODULE_0__.FileInterfaceEntity.findOne({where:{file:{filePath:filePath}}}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))},(fi,cb)=>{null==fi&&(fi=new _type_orm_models_fileInterface__WEBPACK_IMPORTED_MODULE_0__.FileInterfaceEntity);for(const updateKey in update)fi[updateKey]=update[updateKey];fi.save().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}],done)};static deleteOne=(filePath,project,callback)=>{project={project:project,file:{filePath:filePath}};_type_orm_models_fileInterface__WEBPACK_IMPORTED_MODULE_0__.FileInterfaceEntity.createQueryBuilder().delete().where(project).execute().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(callback))}}},"./dist/tsbuild/app/models/app-orm/typeorm/paramsData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ParamsDataTypeOrm:()=>ParamsDataTypeOrm});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_global__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/global.js"),_type_orm_models_ParamsData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/ParamsData.js"),typeorm__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("typeorm");class ParamsDataTypeOrm extends __webpack_exports__.OrmParamsDataAbstractClass{static findLean=(fileInterfaceId,cb)=>{_type_orm_models_ParamsData__WEBPACK_IMPORTED_MODULE_1__.ParamsDataEntity.findOne({where:{file:fileInterfaceId,fiPath:(0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Not)("rte.out")}}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_0__.promToCb)(cb))};static create=(object,cb)=>{_type_orm_models_ParamsData__WEBPACK_IMPORTED_MODULE_1__.ParamsDataEntity.insert(object).then(...(0,_global__WEBPACK_IMPORTED_MODULE_0__.promToCb)(cb))}}},"./dist/tsbuild/app/models/app-orm/typeorm/project.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProjectOrmTypeOrm:()=>ProjectOrmTypeOrm});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_type_orm_models_project__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/project.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js"),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async");class ProjectOrmTypeOrm extends __webpack_exports__.OrmProjectAbstractClass{static findOneWithWithId=(id,cb)=>{_type_orm_models_project__WEBPACK_IMPORTED_MODULE_0__.ProjectEntity.findOne({where:{_id:id}}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findOneAndUpdate=(query,update,done)=>{(0,async__WEBPACK_IMPORTED_MODULE_2__.waterfall)([cb=>{_type_orm_models_project__WEBPACK_IMPORTED_MODULE_0__.ProjectEntity.findOne({where:query}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))},(project,cb)=>{(project=null==project?new _type_orm_models_project__WEBPACK_IMPORTED_MODULE_0__.ProjectEntity:project).appRoot=update.appRoot,project.ideRoot=update.ideRoot,project.name=update.name,project.save().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}],done)}}},"./dist/tsbuild/app/models/app-orm/typeorm/selectedFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SelectedFileTypeOrm:()=>SelectedFileTypeOrm});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_type_orm_models_selectedFile__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/selectedFile.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js"),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async");class SelectedFileTypeOrm extends __webpack_exports__.OrmSelectedFileAbstractClass{static findOneSelected=cb=>{_type_orm_models_selectedFile__WEBPACK_IMPORTED_MODULE_0__.SelectedFileEntity.findOne({where:{selected:!0}}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findSelectedAndUpdate=(update,done)=>{(0,async__WEBPACK_IMPORTED_MODULE_2__.waterfall)([cb=>{_type_orm_models_selectedFile__WEBPACK_IMPORTED_MODULE_0__.SelectedFileEntity.findOne({where:{selected:!0}}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))},(selectedFile,cb)=>{null==selectedFile&&(selectedFile=new _type_orm_models_selectedFile__WEBPACK_IMPORTED_MODULE_0__.SelectedFileEntity);for(const updateKey in update)selectedFile[updateKey]=update[updateKey],selectedFile.selected=!0;selectedFile.save().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}],done)}}},"./dist/tsbuild/app/models/app-orm/typeorm/tabSession.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TabSessionTypeOrm:()=>TabSessionTypeOrm});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_type_orm_models_tabSession__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/tabSession.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js"),typeorm__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("typeorm"),_type_orm_models_consoleLine__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/consoleLine.js"),async__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("async"),lodash__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lodash");class TabSessionTypeOrm extends __webpack_exports__.OrmTabSessionAbstractClass{static findWithProject=(projectId,cb)=>{_type_orm_models_tabSession__WEBPACK_IMPORTED_MODULE_0__.TabSessionEntity.createQueryBuilder().select("TabSessionEntity._id").addSelect("TabSessionEntity.name").addSelect("TabSessionEntity.createdAt").where({project:projectId}).orderBy("TabSessionEntity.createdAt","ASC").getMany().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findWithProjectLines=(projectId,cb)=>{_type_orm_models_tabSession__WEBPACK_IMPORTED_MODULE_0__.TabSessionEntity.createQueryBuilder().select("TabSessionEntity._id").addSelect("TabSessionEntity.name").addSelect("TabSessionEntity.createdAt").addSelect("TabSessionEntity.lines").where({project:projectId}).orderBy("TabSessionEntity.createdAt","ASC").getMany().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static addLineToTab=(tabSessionId,consoleLineId,done)=>{(0,async__WEBPACK_IMPORTED_MODULE_4__.waterfall)([cb=>{_type_orm_models_tabSession__WEBPACK_IMPORTED_MODULE_0__.TabSessionEntity.findOne({where:{_id:tabSessionId}}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))},(tab,cb)=>{null!=tab.lines?tab.lines.push(consoleLineId):tab.lines=[consoleLineId],_type_orm_models_tabSession__WEBPACK_IMPORTED_MODULE_0__.TabSessionEntity.save(tab).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}],done)};static create=(object,done)=>{(0,async__WEBPACK_IMPORTED_MODULE_4__.waterfall)([cb=>{_type_orm_models_tabSession__WEBPACK_IMPORTED_MODULE_0__.TabSessionEntity.insert(object).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))},(tabInsert,cb)=>{null!=tabInsert?.generatedMaps?.[0]?._id?cb(null,tabInsert.generatedMaps[0]):cb("error typeorm create tab")}],done)};static removeWithTabSession=(tabSessionIds,projectId,cb)=>{_type_orm_models_tabSession__WEBPACK_IMPORTED_MODULE_0__.TabSessionEntity.createQueryBuilder().delete().where({_id:(0,typeorm__WEBPACK_IMPORTED_MODULE_2__.In)(tabSessionIds),project:projectId}).execute().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static getTabSessionWithId=(tabSessionId,projectId,cb)=>{(0,async__WEBPACK_IMPORTED_MODULE_4__.autoInject)({tab:cb=>{this.getTabWithTabSession(tabSessionId,projectId,cb)},lines:(tab,cb)=>{null!=tab?._id?this.getLinesWithTabSession(tab,cb):cb()}},(err,result)=>{var tab;null==err&&null!=result?.tab?._id?((tab=result.tab).lines=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.sortBy)(result.lines,["createdAt"]),cb(null,tab)):cb(err)})};static getTabWithTabSession(tabSessionId,projectId,cb){_type_orm_models_tabSession__WEBPACK_IMPORTED_MODULE_0__.TabSessionEntity.createQueryBuilder().select("name").addSelect("createdAt").addSelect("_id").where({_id:tabSessionId,project:projectId}).getRawOne().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}static getLinesWithTabSession(tab,cb){_type_orm_models_consoleLine__WEBPACK_IMPORTED_MODULE_3__.ConsoleLineEntity.createQueryBuilder().where({tab:tab._id}).getMany().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))}}},"./dist/tsbuild/app/models/app-orm/typeorm/targetFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TargetFileTypeOrm:()=>TargetFileTypeOrm});var __webpack_exports__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.abstract.class.js"),_type_orm_models_targetFile__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/targetFile.js"),_global__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/global.js"),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async");class TargetFileTypeOrm extends __webpack_exports__.OrmTargetFileAbstractClass{static remove=(query,cb)=>{_type_orm_models_targetFile__WEBPACK_IMPORTED_MODULE_0__.TargetFileEntity.createQueryBuilder().delete().where(query).execute().then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static findWithProjectLean=(projectId,cb)=>{_type_orm_models_targetFile__WEBPACK_IMPORTED_MODULE_0__.TargetFileEntity.find({where:{project:projectId}}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))};static bulkWrite=(targetFiles,done)=>{(0,async__WEBPACK_IMPORTED_MODULE_2__.mapSeries)(targetFiles,(tf,cb)=>{_type_orm_models_targetFile__WEBPACK_IMPORTED_MODULE_0__.TargetFileEntity.upsert([tf],{conflictPaths:["_id"],skipUpdateIfNoValuesChanged:!0}).then(...(0,_global__WEBPACK_IMPORTED_MODULE_1__.promToCb)(cb))},done)}}},"./dist/tsbuild/app/models/mongo/init.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{connect:()=>connect,disconnectMongo:()=>disconnectMongo,initMongoDb:()=>function(cb){1==dbConnected?disconnectMongo(()=>{connect(cb)}):connect(cb)},models:()=>_mongoose_include__WEBPACK_IMPORTED_MODULE_1__,startFakeMongo:()=>function(cb){(0,_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__.useMongoose)(),1==dbConnected?cb(null,!0):(mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect("mongodb://localhost:27017/test"),mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on("connected",()=>{dbConnected=!0,cb(null,!0)}))}});var __webpack_exports__=__webpack_require__("mongoose"),mongoose__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_mongoose_include__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/_include.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js"),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lodash");let dbConnected=!1;function connect(cb){mongoose__WEBPACK_IMPORTED_MODULE_0___default().set("strictQuery",!1),mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on("connected",dbEvents.onConnected),mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on("error",dbEvents.onError),mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on("disconnected",dbEvents.onDisconnected),mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(nconf__WEBPACK_IMPORTED_MODULE_2___default().get("db:mongo:url"));const onceCb=(0,lodash__WEBPACK_IMPORTED_MODULE_4__.once)(cb);mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on("connected",()=>{dbConnected=!0,onceCb(null,!0)})}const dbEvents={onConnected:()=>{},onError:err=>{},onDisconnected:()=>{}};function disconnectMongo(cb){dbConnected&&(mongoose__WEBPACK_IMPORTED_MODULE_0___default().disconnect().then(()=>{dbConnected=!1,cb&&cb()}),mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.off("connected",dbEvents.onConnected),mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.off("error",dbEvents.onError),mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.off("disconnected",dbEvents.onDisconnected))}},"./dist/tsbuild/app/models/mongo/mongoose/_include.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BpResponseData:()=>_breakpointResponseData__WEBPACK_IMPORTED_MODULE_3__.BpResponseData,ConsoleLineModel:()=>_consoleLine__WEBPACK_IMPORTED_MODULE_5__.ConsoleLineModel,FileInterfaceModel:()=>_file__WEBPACK_IMPORTED_MODULE_0__.FileInterfaceModel,ParamsDataModel:()=>_paramsData__WEBPACK_IMPORTED_MODULE_2__.ParamsDataModel,ProjectModel:()=>_project__WEBPACK_IMPORTED_MODULE_7__.ProjectModel,SelectedFileModel:()=>_selectedFile__WEBPACK_IMPORTED_MODULE_1__.SelectedFileModel,TabSessionModel:()=>_tabSession__WEBPACK_IMPORTED_MODULE_6__.TabSessionModel,TargetFileModel:()=>_targetFile__WEBPACK_IMPORTED_MODULE_4__.TargetFileModel});var _file__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/file.js"),_selectedFile__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/selectedFile.js"),_paramsData__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/paramsData.js"),_breakpointResponseData__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/breakpointResponseData.js"),_targetFile__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/targetFile.js"),_consoleLine__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/consoleLine.js"),_tabSession__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/tabSession.js"),_project__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/project.js")},"./dist/tsbuild/app/models/mongo/mongoose/breakpointResponseData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BpResponseData:()=>BpResponseData,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_exports__=__webpack_require__("mongoose"),__webpack_require__=new __webpack_exports__.Schema({fileInterface:{type:__webpack_exports__.Types.ObjectId,ref:"FileInterface"},fiPath:String,data:Object,tsType:String,paramsData:{type:__webpack_exports__.Types.ObjectId,ref:"ParamsData"}},{timestamps:!0});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__,BpResponseData=(0,__webpack_exports__.model)("BreakpointResponseData",__webpack_require__)},"./dist/tsbuild/app/models/mongo/mongoose/consoleLine.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ConsoleLineModel:()=>ConsoleLineModel,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_exports__=__webpack_require__("mongoose"),__webpack_require__={text:String,color:{name:String}},__webpack_require__=new __webpack_exports__.Schema({filePath:String,project:{type:__webpack_exports__.Types.ObjectId,ref:"Project"},tab:{type:__webpack_exports__.Types.ObjectId,ref:"TabSession"},params:[{name:String,data:Object}],fiPath:String,loc:{line:Number,column:Number},title:String,functionName:String,importUsageName:String,className:String,typeLocation:String,result:[{scope:Object,dataObject:Object,textColor:[__webpack_require__],message:{leve:String,text:String}}],duration:Number},{timestamps:!0});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__,ConsoleLineModel=(0,__webpack_exports__.model)("ConsoleLine",__webpack_require__)},"./dist/tsbuild/app/models/mongo/mongoose/file.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FileInterfaceModel:()=>FileInterfaceModel,default:()=>__WEBPACK_DEFAULT_EXPORT__});var __webpack_exports__=__webpack_require__("mongoose"),__webpack_require__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/static/fiConvertTreeJson.js"),cursor={line:Number,column:Number},fileLocation={start:{line:Number,column:Number},end:{line:Number,column:Number}},fileLocationWithBody={start:{line:Number,column:Number},end:{line:Number,column:Number},body:{start:{line:Number,column:Number},end:{line:Number,column:Number}}},bpLoc={line:Number,column:Number,varPath:__webpack_exports__.Schema.Types.Mixed,extract:Boolean,dcbFunctionName:String},argsUsage={argType:String,astPath:String,name:String,loc:fileLocation,value:__webpack_exports__.Schema.Types.Mixed,bpLoc:bpLoc},argsUsage={node:Object,astPath:String,treePath:String,loc:fileLocation,text:String,returnType:String,arguments:[argsUsage],varName:String,await:Boolean,tstype:String,parentElmDirection:String,parentElm:String,bpVarPath:String,bpLoc:bpLoc},bpLoc=new __webpack_exports__.Schema({varName:String,varNames:[String],name:String,filePath:String,type:String,loc:fileLocation,usage:[argsUsage],tree:String,treeObj:Object,mapVarName:Object}),fileLocationWithBody=new __webpack_exports__.Schema({name:String,loc:fileLocationWithBody,returnType:String,params:[{name:String,loc:fileLocation,tsType:String,object:Object,usage:[argsUsage]}],paramsData:Object,accessibility:String,async:Boolean,static:Boolean,exported:Boolean,tree:String,treeObj:Object}),argsUsage=new __webpack_exports__.Schema({loc:fileLocation,name:String,construct:fileLocationWithBody,methods:[fileLocationWithBody],tree:String,treeObj:Object}),fileLocation=new __webpack_exports__.Schema({file:{appRoot:String,filePath:String,file:String,fileType:String,esVersion:String,loc:{line:Number}},project:{type:__webpack_exports__.Types.ObjectId,ref:"Project"},imports:[bpLoc],mainFunctions:[fileLocationWithBody],functions:[fileLocationWithBody],classes:[argsUsage],logs:[cursor],babel:Object,fileHash:String,date:Date},{timestamps:!0});fileLocation.statics.findOneAndUpdateLean=__webpack_require__.findOneAndUpdateLean,fileLocation.statics.findOneLean=__webpack_require__.findOneLean;const __WEBPACK_DEFAULT_EXPORT__=fileLocation,FileInterfaceModel=(0,__webpack_exports__.model)("FileInterface",fileLocation)},"./dist/tsbuild/app/models/mongo/mongoose/paramsData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ParamsDataModel:()=>ParamsDataModel,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_exports__=__webpack_require__("mongoose"),__webpack_require__={lineNumber:Number,columnNumber:Number,scriptId:String,url:String},__webpack_require__=new __webpack_exports__.Schema({file:{type:__webpack_exports__.Types.ObjectId,ref:"FileInterface"},name:String,type:String,data:Object,paramsKeys:[String],fiPath:String,runId:String,project:{type:__webpack_exports__.Types.ObjectId,ref:"Project"},cursorCDP:__webpack_require__,cursorCDPAdjusted:__webpack_require__,paramsTarget:[__webpack_require__]},{timestamps:!0});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__,ParamsDataModel=(0,__webpack_exports__.model)("ParamsData",__webpack_require__)},"./dist/tsbuild/app/models/mongo/mongoose/project.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProjectModel:()=>ProjectModel,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_exports__=__webpack_require__("mongoose"),__webpack_require__=new __webpack_exports__.Schema({appRoot:String,ideRoot:String,name:String});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__,ProjectModel=(0,__webpack_exports__.model)("Project",__webpack_require__)},"./dist/tsbuild/app/models/mongo/mongoose/selectedFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SelectedFileModel:()=>SelectedFileModel,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_exports__=__webpack_require__("mongoose"),__webpack_require__=new __webpack_exports__.Schema({filePath:String,appRoot:String,project:{type:__webpack_exports__.Types.ObjectId,ref:"Project"},file:{type:__webpack_exports__.Types.ObjectId,ref:"FileInterface"},esVersion:String,selected:Boolean,fileType:String,cursor:{line:Number,column:Number}});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__,SelectedFileModel=(0,__webpack_exports__.model)("SelectedFile",__webpack_require__)},"./dist/tsbuild/app/models/mongo/mongoose/static/fiConvertTreeJson.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{findOneAndUpdateLean:()=>function(query,update,cb){let updateTreeString;null!=update&&(updateTreeString=stringifyTree(update));_init__WEBPACK_IMPORTED_MODULE_0__.models.FileInterfaceModel.findOneAndUpdate(query,updateTreeString,{upsert:!0,returnOriginal:!1}).then(data=>{cb(null,data)}).catch(err=>{cb(err)})},findOneLean:()=>function(query,select,cb){_init__WEBPACK_IMPORTED_MODULE_0__.models.FileInterfaceModel.findOne(query).select(select).lean().then(data=>{null!=data?._id&&(data=parseTree(data)),cb(null,data)}).catch(err=>{cb(err)})},parseTree:()=>parseTree,selectFiMain:()=>selectFiMain,stringifyTree:()=>stringifyTree});var _init__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/models/mongo/init.js");const selectFiMain="mainFunctions classes file functions imports";function stringifyTree(obj){for(const prop in obj)obj.hasOwnProperty(prop)&&("tree"==prop?obj[prop]=JSON.stringify(obj[prop]):"object"==typeof obj[prop]&&stringifyTree(obj[prop]));return obj}function parseTree(obj){for(const prop in obj)obj.hasOwnProperty(prop)&&("tree"==prop?obj[prop]=JSON.parse(obj[prop]):"object"==typeof obj[prop]&&parseTree(obj[prop]));return obj}},"./dist/tsbuild/app/models/mongo/mongoose/tabSession.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TabSessionModel:()=>TabSessionModel,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_exports__=__webpack_require__("mongoose"),__webpack_require__=new __webpack_exports__.Schema({project:{type:__webpack_exports__.Types.ObjectId,ref:"Project"},name:String,lines:[{type:__webpack_exports__.Types.ObjectId,ref:"ConsoleLine"}]},{timestamps:!0});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__,TabSessionModel=(0,__webpack_exports__.model)("TabSession",__webpack_require__)},"./dist/tsbuild/app/models/mongo/mongoose/targetFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TargetFileModel:()=>TargetFileModel,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_exports__=__webpack_require__("mongoose"),__webpack_require__={name:String,params:[{name:String}],options:{start:Boolean,allLines:Boolean,end:Boolean}},__webpack_require__=new __webpack_exports__.Schema({filePath:String,project:{type:__webpack_exports__.Types.ObjectId,ref:"Project"},options:{mainFunctions:Boolean,lock:Boolean,allFunctions:Boolean,allLines:Boolean},mainFunctions:[__webpack_require__],functions:[__webpack_require__],classes:[{name:String,constructor:__webpack_require__,methods:[__webpack_require__]}],status:String});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__,TargetFileModel=(0,__webpack_exports__.model)("TargetFile",__webpack_require__)},"./dist/tsbuild/app/models/type-orm/models/BpResponse.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BpResponseDataEntity:()=>BpResponseDataEntity});var __webpack_exports__=__webpack_require__("typeorm"),__webpack_require__=__webpack_require__("./dist/tsbuild/app/models/type-orm/models/ParamsData.js"),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let BpResponseDataEntity=class extends __webpack_exports__.BaseEntity{_id;fileInterface;fiPath;data;tsType;paramsData;createdAt;updatedAt};__decorate([(0,__webpack_exports__.PrimaryGeneratedColumn)("uuid"),__metadata("design:type",String)],BpResponseDataEntity.prototype,"_id",void 0),__decorate([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],BpResponseDataEntity.prototype,"fileInterface",void 0),__decorate([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],BpResponseDataEntity.prototype,"fiPath",void 0),__decorate([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",Object)],BpResponseDataEntity.prototype,"data",void 0),__decorate([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],BpResponseDataEntity.prototype,"tsType",void 0),__decorate([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",__webpack_require__.ParamsDataEntity)],BpResponseDataEntity.prototype,"paramsData",void 0),__decorate([(0,__webpack_exports__.CreateDateColumn)(),__metadata("design:type",Date)],BpResponseDataEntity.prototype,"createdAt",void 0),__decorate([(0,__webpack_exports__.UpdateDateColumn)(),__metadata("design:type",Date)],BpResponseDataEntity.prototype,"updatedAt",void 0),BpResponseDataEntity=__decorate([(0,__webpack_exports__.Entity)("breakpoint_response_data")],BpResponseDataEntity)},"./dist/tsbuild/app/models/type-orm/models/ParamsData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ParamsDataEntity:()=>ParamsDataEntity});var __webpack_exports__=__webpack_require__("typeorm"),__webpack_require__=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let ParamsDataEntity=class extends __webpack_exports__.BaseEntity{_id;file;name;type;data;paramsKeys;fiPath;runId;project;cursorCDP;cursorCDPAdjusted;paramsTarget;createdAt;updatedAt};__webpack_require__([(0,__webpack_exports__.PrimaryGeneratedColumn)("uuid"),__metadata("design:type",String)],ParamsDataEntity.prototype,"_id",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],ParamsDataEntity.prototype,"file",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],ParamsDataEntity.prototype,"name",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],ParamsDataEntity.prototype,"type",void 0),__webpack_require__([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",Object)],ParamsDataEntity.prototype,"data",void 0),__webpack_require__([(0,__webpack_exports__.Column)("simple-array"),__metadata("design:type",Array)],ParamsDataEntity.prototype,"paramsKeys",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],ParamsDataEntity.prototype,"fiPath",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],ParamsDataEntity.prototype,"runId",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],ParamsDataEntity.prototype,"project",void 0),__webpack_require__([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",Object)],ParamsDataEntity.prototype,"cursorCDP",void 0),__webpack_require__([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",Object)],ParamsDataEntity.prototype,"cursorCDPAdjusted",void 0),__webpack_require__([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",Array)],ParamsDataEntity.prototype,"paramsTarget",void 0),__webpack_require__([(0,__webpack_exports__.CreateDateColumn)(),__metadata("design:type",Date)],ParamsDataEntity.prototype,"createdAt",void 0),__webpack_require__([(0,__webpack_exports__.UpdateDateColumn)(),__metadata("design:type",Date)],ParamsDataEntity.prototype,"updatedAt",void 0),ParamsDataEntity=__webpack_require__([(0,__webpack_exports__.Entity)("params_data")],ParamsDataEntity)},"./dist/tsbuild/app/models/type-orm/models/consoleLine.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ConsoleLineEntity:()=>ConsoleLineEntity});var __webpack_exports__=__webpack_require__("typeorm"),__webpack_require__=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let ConsoleLineEntity=class extends __webpack_exports__.BaseEntity{_id;filePath;project;tab;params;fiPath;loc;title;functionName;importUsageName;className;typeLocation;result;duration;createdAt;updatedAt};__webpack_require__([(0,__webpack_exports__.PrimaryGeneratedColumn)("uuid"),__metadata("design:type",String)],ConsoleLineEntity.prototype,"_id",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],ConsoleLineEntity.prototype,"filePath",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],ConsoleLineEntity.prototype,"project",void 0),__webpack_require__([(0,__webpack_exports__.Index)(),(0,__webpack_exports__.Column)(),__metadata("design:type",String)],ConsoleLineEntity.prototype,"tab",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"json",nullable:!0}),__metadata("design:type",Array)],ConsoleLineEntity.prototype,"params",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],ConsoleLineEntity.prototype,"fiPath",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"json",nullable:!0}),__metadata("design:type",Object)],ConsoleLineEntity.prototype,"loc",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],ConsoleLineEntity.prototype,"title",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],ConsoleLineEntity.prototype,"functionName",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],ConsoleLineEntity.prototype,"importUsageName",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],ConsoleLineEntity.prototype,"className",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],ConsoleLineEntity.prototype,"typeLocation",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"json",nullable:!0}),__metadata("design:type",Object)],ConsoleLineEntity.prototype,"result",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",Number)],ConsoleLineEntity.prototype,"duration",void 0),__webpack_require__([(0,__webpack_exports__.CreateDateColumn)(),__metadata("design:type",Date)],ConsoleLineEntity.prototype,"createdAt",void 0),__webpack_require__([(0,__webpack_exports__.UpdateDateColumn)(),__metadata("design:type",Date)],ConsoleLineEntity.prototype,"updatedAt",void 0),ConsoleLineEntity=__webpack_require__([(0,__webpack_exports__.Entity)("console_lines")],ConsoleLineEntity)},"./dist/tsbuild/app/models/type-orm/models/fileInterface.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FileInterfaceEntity:()=>FileInterfaceEntity,FileSchema:()=>FileSchema});var __webpack_exports__=__webpack_require__("typeorm"),__webpack_require__=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};class FileSchema{appRoot;filePath;file;fileType;esVersion}__webpack_require__([(0,__webpack_exports__.Column)({name:"file.appRoot"}),__metadata("design:type",String)],FileSchema.prototype,"appRoot",void 0),__webpack_require__([(0,__webpack_exports__.Column)({name:"file.filePath"}),__metadata("design:type",String)],FileSchema.prototype,"filePath",void 0),__webpack_require__([(0,__webpack_exports__.Column)({name:"file.file"}),__metadata("design:type",String)],FileSchema.prototype,"file",void 0),__webpack_require__([(0,__webpack_exports__.Column)({name:"file.fileType"}),__metadata("design:type",String)],FileSchema.prototype,"fileType",void 0),__webpack_require__([(0,__webpack_exports__.Column)({name:"file.esVersion"}),__metadata("design:type",String)],FileSchema.prototype,"esVersion",void 0);let FileInterfaceEntity=class extends __webpack_exports__.BaseEntity{_id;file;project;imports;mainFunctions;functions;classes;logs;babel;fileHash;date;createdAt;updatedAt};__webpack_require__([(0,__webpack_exports__.PrimaryGeneratedColumn)("uuid"),__metadata("design:type",String)],FileInterfaceEntity.prototype,"_id",void 0),__webpack_require__([(0,__webpack_exports__.Column)(type=>FileSchema,{prefix:!1}),__metadata("design:type",FileSchema)],FileInterfaceEntity.prototype,"file",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],FileInterfaceEntity.prototype,"project",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"json",nullable:!0}),__metadata("design:type",Object)],FileInterfaceEntity.prototype,"imports",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"json",nullable:!0}),__metadata("design:type",Object)],FileInterfaceEntity.prototype,"mainFunctions",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"json",nullable:!0}),__metadata("design:type",Object)],FileInterfaceEntity.prototype,"functions",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"json",nullable:!0}),__metadata("design:type",Object)],FileInterfaceEntity.prototype,"classes",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"json",nullable:!0}),__metadata("design:type",Object)],FileInterfaceEntity.prototype,"logs",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"json",nullable:!0}),__metadata("design:type",Object)],FileInterfaceEntity.prototype,"babel",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],FileInterfaceEntity.prototype,"fileHash",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",Date)],FileInterfaceEntity.prototype,"date",void 0),__webpack_require__([(0,__webpack_exports__.CreateDateColumn)(),__metadata("design:type",Date)],FileInterfaceEntity.prototype,"createdAt",void 0),__webpack_require__([(0,__webpack_exports__.UpdateDateColumn)(),__metadata("design:type",Date)],FileInterfaceEntity.prototype,"updatedAt",void 0),FileInterfaceEntity=__webpack_require__([(0,__webpack_exports__.Entity)()],FileInterfaceEntity)},"./dist/tsbuild/app/models/type-orm/models/project.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProjectEntity:()=>ProjectEntity});var __webpack_exports__=__webpack_require__("typeorm"),__webpack_require__=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let ProjectEntity=class extends __webpack_exports__.BaseEntity{_id;ideRoot;appRoot;name};__webpack_require__([(0,__webpack_exports__.PrimaryGeneratedColumn)("uuid"),__metadata("design:type",String)],ProjectEntity.prototype,"_id",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"varchar",nullable:!0}),__metadata("design:type",String)],ProjectEntity.prototype,"ideRoot",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"varchar",nullable:!0}),__metadata("design:type",String)],ProjectEntity.prototype,"appRoot",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"varchar",nullable:!0}),__metadata("design:type",String)],ProjectEntity.prototype,"name",void 0),ProjectEntity=__webpack_require__([(0,__webpack_exports__.Entity)("project")],ProjectEntity)},"./dist/tsbuild/app/models/type-orm/models/selectedFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SelectedFileEntity:()=>SelectedFileEntity});var __webpack_exports__=__webpack_require__("typeorm"),__webpack_require__=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let SelectedFileEntity=class extends __webpack_exports__.BaseEntity{_id;filePath;appRoot;project;file;esVersion;selected;fileType;cursor};__webpack_require__([(0,__webpack_exports__.PrimaryGeneratedColumn)("uuid"),__metadata("design:type",String)],SelectedFileEntity.prototype,"_id",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],SelectedFileEntity.prototype,"filePath",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],SelectedFileEntity.prototype,"appRoot",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],SelectedFileEntity.prototype,"project",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],SelectedFileEntity.prototype,"file",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"varchar",nullable:!0}),__metadata("design:type",String)],SelectedFileEntity.prototype,"esVersion",void 0),__webpack_require__([(0,__webpack_exports__.Column)({type:"boolean"}),__metadata("design:type",Boolean)],SelectedFileEntity.prototype,"selected",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],SelectedFileEntity.prototype,"fileType",void 0),__webpack_require__([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",Object)],SelectedFileEntity.prototype,"cursor",void 0),SelectedFileEntity=__webpack_require__([(0,__webpack_exports__.Entity)("selected_files")],SelectedFileEntity)},"./dist/tsbuild/app/models/type-orm/models/tabSession.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TabSessionEntity:()=>TabSessionEntity});var __webpack_exports__=__webpack_require__("typeorm"),__webpack_require__=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let TabSessionEntity=class extends __webpack_exports__.BaseEntity{_id;project;name;lines;createdAt;updatedAt};__webpack_require__([(0,__webpack_exports__.PrimaryGeneratedColumn)("uuid"),__metadata("design:type",String)],TabSessionEntity.prototype,"_id",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],TabSessionEntity.prototype,"project",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],TabSessionEntity.prototype,"name",void 0),__webpack_require__([(0,__webpack_exports__.Column)("simple-array"),__metadata("design:type",Array)],TabSessionEntity.prototype,"lines",void 0),__webpack_require__([(0,__webpack_exports__.CreateDateColumn)(),__metadata("design:type",Date)],TabSessionEntity.prototype,"createdAt",void 0),__webpack_require__([(0,__webpack_exports__.UpdateDateColumn)(),__metadata("design:type",Date)],TabSessionEntity.prototype,"updatedAt",void 0),TabSessionEntity=__webpack_require__([(0,__webpack_exports__.Entity)("tab_sessions")],TabSessionEntity)},"./dist/tsbuild/app/models/type-orm/models/targetFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TargetFileEntity:()=>TargetFileEntity});var __webpack_exports__=__webpack_require__("typeorm"),__webpack_require__=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let TargetFileEntity=class extends __webpack_exports__.BaseEntity{_id;filePath;project;options;mainFunctions;functions;classes;status};__webpack_require__([(0,__webpack_exports__.PrimaryGeneratedColumn)("uuid"),__metadata("design:type",String)],TargetFileEntity.prototype,"_id",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],TargetFileEntity.prototype,"filePath",void 0),__webpack_require__([(0,__webpack_exports__.Column)(),__metadata("design:type",String)],TargetFileEntity.prototype,"project",void 0),__webpack_require__([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",Object)],TargetFileEntity.prototype,"options",void 0),__webpack_require__([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",Array)],TargetFileEntity.prototype,"mainFunctions",void 0),__webpack_require__([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",Array)],TargetFileEntity.prototype,"functions",void 0),__webpack_require__([(0,__webpack_exports__.Column)("json",{nullable:!0}),__metadata("design:type",Array)],TargetFileEntity.prototype,"classes",void 0),__webpack_require__([(0,__webpack_exports__.Column)({nullable:!0}),__metadata("design:type",String)],TargetFileEntity.prototype,"status",void 0),TargetFileEntity=__webpack_require__([(0,__webpack_exports__.Entity)("target_file")],TargetFileEntity)},"./dist/tsbuild/app/routes/action/_action.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{setActionApi:()=>function(req,res){null!=req.body?.action?1<=req.body.action.cursorPosition?.length?(0,_services_handle_status_ui_events_change_cursor_position__WEBPACK_IMPORTED_MODULE_0__.changeCursorPosition)(req.body.action,res.sendResponse):1<=req.body.action.clear?.length?(0,_services_handle_status_clear_clearData__WEBPACK_IMPORTED_MODULE_1__.clearData)(req.body.action.clear,res.sendResponse):noAction():noAction();function noAction(){res.send("no action")}}});var _services_handle_status_ui_events_change_cursor_position__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/handle-status/ui-events/change-cursor-position.js"),_services_handle_status_clear_clearData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/handle-status/clear/clearData.js")},"./dist/tsbuild/app/routes/action/openFileIde.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{addFileToBreakPointTargetList:()=>function(req,res){(-1!=(0,_services_tracer_target_files_onOpenedFiles__WEBPACK_IMPORTED_MODULE_1__.getCurrentOpenedFiles)().indexOf(req.body.filePath)?function(req,res){(0,_services_tracer_target_files_onOpenedFiles__WEBPACK_IMPORTED_MODULE_1__.doParseOpenedFiles)((0,_services_tracer_target_files_onOpenedFiles__WEBPACK_IMPORTED_MODULE_1__.getCurrentOpenedFiles)(),()=>{openFileIdeReq(req,res)})}:openFileIdeReq)(req,res)},openFileIdeReq:()=>openFileIdeReq});var _handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),_services_tracer_target_files_onOpenedFiles__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/onOpenedFiles.js");function openFileIdeReq(req,res){req.body;let col=req.body.cursor.column,line=(1<col&&col--,req.body.cursor.line);1<line&&line--,_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_0__.mSocketServer.socketIde.scIde.emit("open-file",req.body.filePath,line,col),res.send({status:"ok"})}},"./dist/tsbuild/app/routes/action/saveTokenAuth.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{saveTokenAuthReq:()=>function(req,res){req.body,(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({saveToken:cb=>{10<req.body?.tokenAuth?.length?(0,_services_authentication_authentication__WEBPACK_IMPORTED_MODULE_1__.saveTokenAuth)(req.body.tokenAuth,cb):cb("no token")},licenseCheck:(saveToken,cb)=>{(0,_services_authentication_authentication__WEBPACK_IMPORTED_MODULE_1__.makeRequestRenewLicense)(cb)}},(err,data)=>{res.sendResponse(err)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_services_authentication_authentication__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/authentication/authentication.js")},"./dist/tsbuild/app/routes/dump-parameters/disconnectDebugger.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{disconnectDebugger:()=>function(req,res){(0,_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__.getTargetCDP)().close(),setTimeout(()=>{res.send("ok")},300)}});var _services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js")},"./dist/tsbuild/app/routes/dump-parameters/getActiveFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _services_fileinterface_mgt_getActiveFile__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/fileinterface-mgt/getActiveFile.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){(0,_services_fileinterface_mgt_getActiveFile__WEBPACK_IMPORTED_MODULE_0__.getActiveFile)(res.sendResponse)}},"./dist/tsbuild/app/routes/dump-parameters/getInfosDumpData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _services_fileinterface_mgt_getInfosDumpData__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/fileinterface-mgt/getInfosDumpData.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){(0,_services_fileinterface_mgt_getInfosDumpData__WEBPACK_IMPORTED_MODULE_0__.getInfosDumpData)(res.sendResponse)}},"./dist/tsbuild/app/routes/dump-parameters/setAllBreakpointsForFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _common_logger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/common/logger.js"),_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){_common_logger__WEBPACK_IMPORTED_MODULE_0__.default.info("setAllBreakpointsForFileReq"),(0,_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__.getTargetCDP)().breakpoints.setAllBreakpointsForFile(err=>{res.send("ok")})}},"./dist/tsbuild/app/routes/dump-parameters/setBreakpoints.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _common_logger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/common/logger.js"),_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){_common_logger__WEBPACK_IMPORTED_MODULE_0__.default.info("setBreakpoints"),(0,_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__.getTargetCDP)().breakpointsDump.setBreakPointForFileInterface(req.params.fileInterfaceId,err=>{res.send("ok")})}},"./dist/tsbuild/app/routes/ide-plugin/event.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,socketEvent:()=>function(body){body?.event;var fileStatusChange={event:body.event,ideRoot:body.ideRoot,filePath:body.filePath,cursor:{line:1|parseInt(String(body.line)),column:1|parseInt(String(body.column))}};null!=body.ideRoot&&(0,_services_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_0__.handleStatusChange)(fileStatusChange,err=>{})}});var _services_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/handle-status-change.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){req.body?.event;var body=req.body,fileStatusChange={event:body.event,ideRoot:body.ideRoot,filePath:body.filePath,cursor:{line:1|parseInt(String(body.line)),column:1|parseInt(String(body.column))}};null!=body.ideRoot?(req.body,(0,_services_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_0__.handleStatusChange)(fileStatusChange,res.sendResponse)):res.send("appRoot missing")}},"./dist/tsbuild/app/routes/project.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{scanProjectApi:()=>function(req,res){(0,_services_parser_parseAllFilesOfTheProject__WEBPACK_IMPORTED_MODULE_1__.scanProject)(()=>{res.send("scanProjectApi")})},setBreakpointForProjectApi:()=>function(req,res){(0,_services_handle_status_setBreakpointForProject__WEBPACK_IMPORTED_MODULE_0__.setBreakpointForProject)(()=>{res.send("setBreakpointForProjectApi")})}});var _services_handle_status_setBreakpointForProject__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/handle-status/setBreakpointForProject.js"),_services_parser_parseAllFilesOfTheProject__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/parseAllFilesOfTheProject.js")},"./dist/tsbuild/app/routes/real-time-execution/main.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function(req,res){res.send("err rte 2")}},"./dist/tsbuild/app/routes/real-time-execution/makeFiles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _services_file_generator_generateFiles__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generateFiles.js"),async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("async"),_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({selectedFile:cb=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__.orm.SelectedFileModel.findOneSelected(cb)},makeFile:(selectedFile,cb)=>{(0,_services_file_generator_generateFiles__WEBPACK_IMPORTED_MODULE_0__.makeFiles)(req.body.fileInterface,selectedFile,(0,_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__.getMainRteApp)().nodeApp.opts.rteAppPath,(err,data)=>{res.send("ok"),cb()})}})}},"./dist/tsbuild/app/routes/real-time-execution/post.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _common_logger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/common/logger.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){_common_logger__WEBPACK_IMPORTED_MODULE_0__.default.info(req.body),res.send("err rte")}},"./dist/tsbuild/app/routes/real-time-execution/runRte.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _services_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/handle-status-change.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){req=req.body,(0,_services_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_0__.handleStatusChange)(req,res.sendResponse)}},"./dist/tsbuild/app/routes/real-time-execution/setBreakpointAndRun.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _services_handle_status_ui_events_set_bp_and_run__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/handle-status/ui-events/set-bp-and-run.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){req=req.body.fileInterface,(0,_services_handle_status_ui_events_set_bp_and_run__WEBPACK_IMPORTED_MODULE_0__.default)(req,res.sendResponse)}},"./dist/tsbuild/app/routes/real-time-execution/start.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _services_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/handle-status-change.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){req=req.body,(0,_services_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_0__.handleStatusChange)(req,res.sendResponse)}},"./dist/tsbuild/app/routes/real-time-execution/stop.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js");const __WEBPACK_DEFAULT_EXPORT__=function(req,res){(0,_services_runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__.getMainRteApp)().close(),res.send("ok")}},"./dist/tsbuild/app/routes/router.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{routesApi:()=>function(app){var RouterApi=express__WEBPACK_IMPORTED_MODULE_0___default().Router({mergeParams:!0}),app=(app.use("/api",RouterApi),express__WEBPACK_IMPORTED_MODULE_0___default().Router({mergeParams:!0})),app=(RouterApi.use(app),app.post("/ide-plugin/event",_ide_plugin_event__WEBPACK_IMPORTED_MODULE_4__.default).get("/project/setBreakpointForProject",_project__WEBPACK_IMPORTED_MODULE_12__.setBreakpointForProjectApi).get("/project/scan",_project__WEBPACK_IMPORTED_MODULE_12__.scanProjectApi).post("/action",_action_action__WEBPACK_IMPORTED_MODULE_13__.setActionApi).post("/action/openFileIde",_action_openFileIde__WEBPACK_IMPORTED_MODULE_23__.openFileIdeReq).post("/action/addFileToBreakPointTargetList",_action_openFileIde__WEBPACK_IMPORTED_MODULE_23__.addFileToBreakPointTargetList).get("/status",_status_status__WEBPACK_IMPORTED_MODULE_6__.default).get("/nextStep",_status_nextStep__WEBPACK_IMPORTED_MODULE_17__.default).post("/tools/ast-to-code",_status_convertToCode__WEBPACK_IMPORTED_MODULE_19__.convertToCodeReq).post("/status",_status_setStatus__WEBPACK_IMPORTED_MODULE_9__.default).get("/config",_status_config__WEBPACK_IMPORTED_MODULE_16__.default).get("/config.js",_status_appConfig__WEBPACK_IMPORTED_MODULE_15__.default).post("/config",_status_setApiConfig__WEBPACK_IMPORTED_MODULE_21__.setApiConfigReq).post("/license/tokenAuth",_action_saveTokenAuth__WEBPACK_IMPORTED_MODULE_30__.saveTokenAuthReq),express__WEBPACK_IMPORTED_MODULE_0___default().Router({mergeParams:!0}));RouterApi.use(_middlewares_checkHasProject__WEBPACK_IMPORTED_MODULE_29__.hasProject,app),app.post("/tracer/event",_tracer_start__WEBPACK_IMPORTED_MODULE_22__.tracerEvent).post("/tracer/files",_tracer_saveTargetAndAvailableFile__WEBPACK_IMPORTED_MODULE_24__.saveTargetAndAvailableFilesReq).get("/tracer/files",_tracer_getTargetAndAvailableFiles__WEBPACK_IMPORTED_MODULE_25__.getTargetAndAvailableFilesReq).get("/console/tabSessions",_tracer_getTabSessions__WEBPACK_IMPORTED_MODULE_27__.getTabSessionsReq).get("/console/tabSession/:id",_tracer_getTabSessions__WEBPACK_IMPORTED_MODULE_27__.getOneTabSessionReq).delete("/console/tabSessions",_tracer_removeTabSessions__WEBPACK_IMPORTED_MODULE_26__.removeTabSessionsReq).get("/console/newTabSessions",_tracer_newTabSession__WEBPACK_IMPORTED_MODULE_28__.newTabSessionsReq).post("/real-time-execution/run",_real_time_execution_runRte__WEBPACK_IMPORTED_MODULE_11__.default).get("/real-time-execution",_real_time_execution_main__WEBPACK_IMPORTED_MODULE_31__.default).post("/real-time-execution",_real_time_execution_post__WEBPACK_IMPORTED_MODULE_1__.default).post("/real-time-execution/makeFiles",_real_time_execution_makeFiles__WEBPACK_IMPORTED_MODULE_2__.default).post("/real-time-execution/start",_real_time_execution_start__WEBPACK_IMPORTED_MODULE_10__.default).get("/real-time-execution/stop",_real_time_execution_stop__WEBPACK_IMPORTED_MODULE_8__.default).post("/real-time-execution/setBreakpointAndRun",_real_time_execution_setBreakpointAndRun__WEBPACK_IMPORTED_MODULE_7__.default).get("/dump-parameters/setBreakpoints/:fileInterfaceId",_dump_parameters_setBreakpoints__WEBPACK_IMPORTED_MODULE_3__.default).post("/dump-parameters/setAllBreakpointsForFile",_dump_parameters_setAllBreakpointsForFile__WEBPACK_IMPORTED_MODULE_20__.default).get("/dump-parameters/getActiveFile",_dump_parameters_getActiveFile__WEBPACK_IMPORTED_MODULE_5__.default).get("/dump-parameters/disconnectDebugger",_dump_parameters_disconnectDebugger__WEBPACK_IMPORTED_MODULE_14__.disconnectDebugger).get("/dump-parameters/getInfosDumpData",_dump_parameters_getInfosDumpData__WEBPACK_IMPORTED_MODULE_18__.default)}});var __webpack_exports__=__webpack_require__("express"),express__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_real_time_execution_main__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("./dist/tsbuild/app/routes/real-time-execution/main.js"),_real_time_execution_post__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/routes/real-time-execution/post.js"),_real_time_execution_makeFiles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/routes/real-time-execution/makeFiles.js"),_dump_parameters_setBreakpoints__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/routes/dump-parameters/setBreakpoints.js"),_ide_plugin_event__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/routes/ide-plugin/event.js"),_dump_parameters_getActiveFile__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/routes/dump-parameters/getActiveFile.js"),_status_status__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/routes/status/status.js"),_real_time_execution_setBreakpointAndRun__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/routes/real-time-execution/setBreakpointAndRun.js"),_real_time_execution_stop__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/routes/real-time-execution/stop.js"),_status_setStatus__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/routes/status/setStatus.js"),_real_time_execution_start__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/app/routes/real-time-execution/start.js"),_real_time_execution_runRte__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./dist/tsbuild/app/routes/real-time-execution/runRte.js"),_project__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./dist/tsbuild/app/routes/project.js"),_action_action__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./dist/tsbuild/app/routes/action/_action.js"),_dump_parameters_disconnectDebugger__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./dist/tsbuild/app/routes/dump-parameters/disconnectDebugger.js"),_status_appConfig__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./dist/tsbuild/app/routes/status/appConfig.js"),_status_config__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./dist/tsbuild/app/routes/status/config.js"),_status_nextStep__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./dist/tsbuild/app/routes/status/nextStep.js"),_dump_parameters_getInfosDumpData__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./dist/tsbuild/app/routes/dump-parameters/getInfosDumpData.js"),_status_convertToCode__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./dist/tsbuild/app/routes/status/convertToCode.js"),_dump_parameters_setAllBreakpointsForFile__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./dist/tsbuild/app/routes/dump-parameters/setAllBreakpointsForFile.js"),_status_setApiConfig__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./dist/tsbuild/app/routes/status/setApiConfig.js"),_tracer_start__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./dist/tsbuild/app/routes/tracer/start.js"),_action_openFileIde__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./dist/tsbuild/app/routes/action/openFileIde.js"),_tracer_saveTargetAndAvailableFile__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./dist/tsbuild/app/routes/tracer/saveTargetAndAvailableFile.js"),_tracer_getTargetAndAvailableFiles__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./dist/tsbuild/app/routes/tracer/getTargetAndAvailableFiles.js"),_tracer_removeTabSessions__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./dist/tsbuild/app/routes/tracer/removeTabSessions.js"),_tracer_getTabSessions__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./dist/tsbuild/app/routes/tracer/getTabSessions.js"),_tracer_newTabSession__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./dist/tsbuild/app/routes/tracer/newTabSession.js"),_middlewares_checkHasProject__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./dist/tsbuild/app/middlewares/checkHasProject.js"),_action_saveTokenAuth__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./dist/tsbuild/app/routes/action/saveTokenAuth.js")},"./dist/tsbuild/app/routes/status/appConfig.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{appConfig:()=>appConfig,default:()=>__WEBPACK_DEFAULT_EXPORT__,getAppConfig:()=>getAppConfig});var __webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_services_authentication_authentication__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/authentication/authentication.js");function appConfig(req,res){var appConfig=getAppConfig(),appConfig="window.appConfig = "+JSON.stringify(appConfig)+";";res.send(appConfig)}const __WEBPACK_DEFAULT_EXPORT__=appConfig;function getAppConfig(){var appConfig=nconf__WEBPACK_IMPORTED_MODULE_0___default().get();return appConfig.authentication=(0,_services_authentication_authentication__WEBPACK_IMPORTED_MODULE_1__.getAuthenticationStatus)(),appConfig.appUrl=(0,_services_authentication_authentication__WEBPACK_IMPORTED_MODULE_1__.getAppUrl)(),appConfig}},"./dist/tsbuild/app/routes/status/config.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{configReq:()=>configReq,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _appConfig__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/routes/status/appConfig.js");function configReq(req,res){var config={config:(0,_appConfig__WEBPACK_IMPORTED_MODULE_0__.getAppConfig)()};res.send(config)}const __WEBPACK_DEFAULT_EXPORT__=configReq},"./dist/tsbuild/app/routes/status/convertToCode.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{convertToCodeReq:()=>function(req,res){try{var astJson=JSON.parse(req.body.ast),babel=(0,_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_0__.astToCode)(astJson,"ts");res.send({code:babel.code})}catch(e){res.send(e.toString())}}});var _handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/babel/astToCode.js")},"./dist/tsbuild/app/routes/status/nextStep.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{alwaysGoNextStep:()=>function(){waitNextStep=cb=>{cb()}},default:()=>__WEBPACK_DEFAULT_EXPORT__,goNextStep:()=>function(){waitNextStepSubject.next(!0)},nextStepReq:()=>nextStepReq,waitNextStep:()=>waitNextStep});__webpack_exports__=__webpack_require__("rxjs");const waitNextStepSubject=new __webpack_exports__.Subject;let waitNextStep=function(cb){cb()};function nextStepReq(req,res){waitNextStepSubject.next(!0),res.send("ok")}const __WEBPACK_DEFAULT_EXPORT__=nextStepReq},"./dist/tsbuild/app/routes/status/setApiConfig.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{setApiConfigReq:()=>function(req,res){if(null!=req.body?.apiConfig&&0<=req.body?.apiConfig?.["targetApp.debugPort"])return(0,_services_chrome_devtools_protocol_updateTargetDebugPort__WEBPACK_IMPORTED_MODULE_0__.updateTargetDebugPort)(req.body?.apiConfig["targetApp.debugPort"],res.sendResponse);res.send("ok")}});var _services_chrome_devtools_protocol_updateTargetDebugPort__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/updateTargetDebugPort.js")},"./dist/tsbuild/app/routes/status/setStatus.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,status:()=>status});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js");function status(req,res){(0,_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.updateStatus)(req.body.appStatus),res.send(_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appStatus)}const __WEBPACK_DEFAULT_EXPORT__=status},"./dist/tsbuild/app/routes/status/status.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,status:()=>status});var _services_handle_status_status_change_checkActiveProject__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/checkActiveProject.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js");function status(req,res){(0,_services_handle_status_status_change_checkActiveProject__WEBPACK_IMPORTED_MODULE_0__.isDebugAppSameAsSelectedFile)(),res.send((0,_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.getAppStatusForUI)())}const __WEBPACK_DEFAULT_EXPORT__=status},"./dist/tsbuild/app/routes/tracer/getTabSessions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getOneTabSessionReq:()=>function(req,res){(0,_services_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_0__.getTabSessionWithId)(req.params.id,res.sendResponse)},getTabSessionsReq:()=>function(req,res){(0,_services_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_0__.getTabSessionsForProjectReq)(res.sendResponse)}});var _services_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/tracer/tab-session/get-tab-session.js")},"./dist/tsbuild/app/routes/tracer/getTargetAndAvailableFiles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getTargetAndAvailableFilesReq:()=>function(req,res){null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache?.project?.appRoot?(0,_services_tracer_target_files_getTargetFiles__WEBPACK_IMPORTED_MODULE_1__.getTargetFiles)(res.sendResponse):res.sendResponse("no project selected")}});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_services_tracer_target_files_getTargetFiles__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/getTargetFiles.js")},"./dist/tsbuild/app/routes/tracer/newTabSession.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{newTabSessionsReq:()=>function(req,res){(0,_services_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_0__.createNewTabSession)(res.sendResponse)}});var _services_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/tracer/tab-session/get-tab-session.js")},"./dist/tsbuild/app/routes/tracer/removeTabSessions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{removeTabSessionsReq:()=>function(req,res){1<=req.body?.tabSessionIds?.length?(0,_services_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_0__.removeTabSessions)(req.body.tabSessionIds,res.sendResponse):res.send("no tabSessionIds")}});var _services_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/tracer/tab-session/get-tab-session.js")},"./dist/tsbuild/app/routes/tracer/saveTargetAndAvailableFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{saveTargetAndAvailableFilesReq:()=>function(req,res){(0,_services_tracer_target_files_saveTargetAndAvailableFiles__WEBPACK_IMPORTED_MODULE_0__.saveTargetAndAvailableFiles)(req.body,res.sendResponse)}});var _services_tracer_target_files_saveTargetAndAvailableFiles__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/saveTargetAndAvailableFiles.js")},"./dist/tsbuild/app/routes/tracer/start.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{tracerEvent:()=>function(req,res){req=req.body;(0,_services_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_0__.handleStatusChange)(req,err=>{res.sendResponse(err)})}});var _services_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/handle-status-change.js")},"./dist/tsbuild/app/services/authentication/authentication.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{authentication:()=>function(cb){isProduction()?function(done){null!=dataStore.get("auth")&&null!=dataStore.get("lastUpdate")?(updateAuthenticationStatus(),done()):done("please authenticate")}(cb):(isAuthenticated=!0,cb())},getAppUrl:()=>function(){return"prod"==nconf__WEBPACK_IMPORTED_MODULE_0___default().get("env")?"https://www.recompyle.com":"http://localhost:4301"},getAuthenticationStatus:()=>function(){var status={authenticated:isAuthenticated,hasToken:null!=dataStore.get("auth")};"license-expired"==dataStore.get("lastUpdate")&&(status.licenseExpired=!0);return status},makeRequestRenewLicense:()=>makeRequestRenewLicense,renewAuthentication:()=>function(cb){isProduction()&&null!=dataStore.get("auth")?makeRequestRenewLicense(cb):cb()},saveTokenAuth:()=>function(tokenAuth,cb){dataStore.set("auth",tokenAuth),cb()}});var __webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("data-store"),__webpack_exports__=__webpack_require__.n(__webpack_exports__),date_fns__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("date-fns"),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("axios"),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),node_machine_id__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("node-machine-id"),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("object-hash"),object_hash__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_initServices__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/initServices.js"),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("path"),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),os__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("os"),__webpack_require__=__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_8__);const dataStore=new(__webpack_exports__())({path:axios__WEBPACK_IMPORTED_MODULE_3__().join(__webpack_require__().homedir(),".config/recompyle/settings.json")});let isAuthenticated=!1;function isProduction(){return"prod"==nconf__WEBPACK_IMPORTED_MODULE_0___default().get("env")}function updateAuthenticationStatus(){var givenDate=dataStore.get("lastUpdate"),givenDate=(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.parse)(givenDate,"yyyy-MM-dd",new Date),futureDate=(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addDays)(givenDate,5),today=new Date,futureDate=(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.isBefore)(today,futureDate),givenDate=(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.isBefore)(givenDate,today);futureDate&&givenDate&&(isAuthenticated=!0)}function makeRequestRenewLicense(cb){var url=("prod"==nconf__WEBPACK_IMPORTED_MODULE_0___default().get("env")?"https://api.recompyle.com":"http://localhost:3300")+"/api/auth/license/check/"+object_hash__WEBPACK_IMPORTED_MODULE_5___default()((0,node_machine_id__WEBPACK_IMPORTED_MODULE_4__.machineIdSync)()),token=dataStore.get("auth");axios__WEBPACK_IMPORTED_MODULE_3___default().get(url,{headers:{Authorization:"Bearer "+token},timeout:8e3}).then(res=>{null!=res?.data?.lastUpdate&&(dataStore.set("lastUpdate",res.data.lastUpdate),0==isAuthenticated&&setTimeout(()=>{(0,_initServices__WEBPACK_IMPORTED_MODULE_6__.projectServices)(()=>{})},100),updateAuthenticationStatus()),cb()}).catch(err=>{cb()})}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/CDP.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPP:()=>CDPP});var __webpack_exports__=__webpack_require__("chrome-remote-interface"),chrome_remote_interface__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),async__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("async"),_breakpoint_set_in_cdp_CDPBreakpoint_class__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/set-in-cdp/CDPBreakpoint.class.js"),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("rxjs"),_paused_CDP_paused__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/paused/CDP-paused.js"),_scripts_mgt_scriptParsed__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/scriptParsed.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("rxjs/operators"),_rte_CDPBreakpointRte_class__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/rte/CDPBreakpointRte.class.js"),_cdp_dump_CDPBreakpointDump_class__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/CDPBreakpointDump.class.js"),_cdp_dump_extract_editFileForCallbacks__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/extract/editFileForCallbacks.js"),_dump_CDPGetData__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/CDPGetData.js"),_rte_CDP_RTE_onBreakpointImport__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/rte/CDP-RTE-onBreakpointImport.js"),_rte_CDP_RTE_onBreakpointRteOutput__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/rte/CDP-RTE-onBreakpointRteOutput.js"),_handle_status_status_change_checkActiveProject__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/checkActiveProject.js"),_scripts_mgt_CDPScriptMgt__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/CDPScriptMgt.js"),_cdp_dump_extract_editFileForExtract__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/extract/editFileForExtract.js"),_cdp_dump_extract_extractMgt__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/extract/extractMgt.js"),_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointTools.js"),_console_CDP_Console__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/console/CDP-Console.js"),_cdp_tracer_CDPTracerBreakpoints_class__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-tracer/CDPTracerBreakpoints.class.js"),_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/handle-status-change.js"),_handlers_event_service_play_stop__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./dist/tsbuild/app/handlers/event-service/play-stop.js"),_scripts_mgt_ScriptParsedMgtClass__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/ScriptParsedMgtClass.js"),_flags_events_flagsAndEvents__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/flags-events/flagsAndEvents.js"),_breakpoint_BreakpointResolved__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/BreakpointResolved.js"),_paused_PausedEvents__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/paused/PausedEvents.js"),_CDPRuntime__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/CDPRuntime.js"),_common_logger__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./dist/tsbuild/common/logger.js"),_flags_events_persistantVars__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/flags-events/persistantVars.js");class CDPP{rteApp;breakpoints;breakpointsDump;breakpointRte;breakpointResolved;callbackMgt;onBreakpointRteImport;onBreakpointRteOutput;paused;pausedEvents;getData;scriptMgt;EditFileForExtract;EditForExtractMgt;bpTools;cdpConsole;tracerBreakpoints;scriptParsed;scriptParsedMgt;flagsAndEvents;runtime;persistantVars=new _flags_events_persistantVars__WEBPACK_IMPORTED_MODULE_28__.PersistantVars(this);cdpConnected=new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject(!1);cdpReady=new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject(!1);cdpPaused=new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject(!1);CDPinstance;opts;client;subscriptions=[];constructor(rteApp,options){this.rteApp=rteApp,this.initClasses(),_common_logger__WEBPACK_IMPORTED_MODULE_27__.default.info("Init CDP"),rteApp?.opts?this.opts=rteApp.opts:null!=options&&(this.opts=options),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appStatus.CDP[this.opts.name].ready=!1}runAndWaitForConnection(){const self=this;function doUntil(){(0,async__WEBPACK_IMPORTED_MODULE_3__.until)(cb=>{setTimeout(()=>{cb(null,self.cdpConnected.getValue())},500)},cb=>{self.cdpConnected.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.first)()).subscribe(()=>{cb()}),self.newCDPInstance()},err=>{self.opts.name;{const sub=self.cdpConnected.pipe().subscribe(status=>{status||(sub.unsubscribe(),setTimeout(()=>{doUntil()},500))})}})}doUntil()}newCDPInstance(){try{var opts={port:this.opts.cdpPort};this.CDPinstance=chrome_remote_interface__WEBPACK_IMPORTED_MODULE_0___default()(opts,client=>{this.client=client}).on("error",err=>{}).on("connect",()=>{this.opts.name,this.initDebug()}).on("disconnect",()=>{}).on("ready",()=>{})}catch(e){console.error(e),this.close()}}async initDebug(){try{this.cdpConnected.next(!0),this.runtime.runtimeEvents(),this.events(),this.scriptParsed.scriptFailed(),this.breakpointResolved.init(),this.pausedEvents.events(),this.cdpConsole.init(),this.scriptParsed.initScriptParsed(),await this.client.Debugger.enable({}),await this.client.Runtime.enable(),await this.client.Runtime.runIfWaitingForDebugger(),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appStatus.CDP[this.opts.name].ready=!0,this.isTargetDebugApp()&&_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__.mSocketServer.sendStatus(),this.listenAppStatusChange()}catch(e){console.error(e)}}listenAppStatusChange(){this.subscriptions.push((0,_handlers_event_service_play_stop__WEBPACK_IMPORTED_MODULE_23__.getIsRunning)().subscribe(isRunning=>{isRunning?(this.client.Debugger.enable({}),this.client.Runtime.enable(),this.paused.queueQueryObjects.resume()):(this.client.Runtime.discardConsoleEntries(),setTimeout(()=>{this.client.Debugger.disable(),this.client.Runtime.disable(),this.paused.queueQueryObjects.pause(),this.paused.queueQueryObjects.empty()},1))}))}events(){this.client.on("disconnect",()=>{this.opts.name,this.close()})}logsDebug(){this.client.on("event",message=>{delete message?.params?.sourceMapURL;var url=message?.params?.url;delete message?.params,message.params=url}),this.client.Runtime.on("executionContextDestroyed",onDestroyed=>{}),this.client.Runtime.on("executionContextCreated",onDestroyed=>{})}close(){console.time("removeAllBreakpoints"),this.breakpoints.removeAllBreakpoints(()=>{if(console.timeEnd("removeAllBreakpoints"),this.cdpConnected.next(!1),this.cdpReady.next(!1),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appStatus.CDP[this.opts.name].ready=!1,this.removeListerners(),this.clearClasses(),this.subscriptions?.forEach(sub=>sub.unsubscribe()),this.client){this.client.removeAllListeners();try{this.client.close()}catch(e){}}delete this.client,delete this.CDPinstance,this.initClasses(),this.checkTargetDebugAppStatus()})}removeListerners(){this.cdpConsole.closeConsole(),this.scriptParsed.clear()}isCDPReadyForAction(cb){var name;!0===this.cdpReady.getValue()?cb():(name=this.opts.name,console.error("CDP "+name+" not ready"),cb("CDP "+name+" not ready"))}waitCDPReady(cb){this.cdpReady.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.first)(val=>1==val)).subscribe(()=>{cb()})}isTargetDebugApp(){return"target-debug-app"==this.opts.name}checkTargetDebugAppStatus(){this.isTargetDebugApp()&&(0,_handle_status_status_change_checkActiveProject__WEBPACK_IMPORTED_MODULE_15__.isDebugAppSameAsSelectedFile)()}disconnect(){this.close()}disconnectAndReconnect(){this.close(),this.isTargetDebugApp()&&this.waitCDPReady(()=>{(0,_handle_status_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_22__.handleStatusChange)(_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.docCursorChange,()=>{})})}clearClasses(){this.flagsAndEvents.clear(),delete this.breakpoints,delete this.breakpointsDump,delete this.breakpointRte,delete this.breakpointResolved,delete this.callbackMgt,delete this.onBreakpointRteImport,delete this.onBreakpointRteOutput,delete this.paused,delete this.pausedEvents,delete this.getData,delete this.scriptParsed,delete this.scriptMgt,delete this.EditFileForExtract,delete this.EditForExtractMgt,delete this.bpTools,delete this.cdpConsole,delete this.tracerBreakpoints,delete this.scriptParsedMgt,delete this.flagsAndEvents,delete this.runtime}initClasses(){this.breakpoints=new _breakpoint_set_in_cdp_CDPBreakpoint_class__WEBPACK_IMPORTED_MODULE_4__.CDPBreakpoint(this),this.breakpointsDump=new _cdp_dump_CDPBreakpointDump_class__WEBPACK_IMPORTED_MODULE_10__.CDPBreakpointDump(this),this.breakpointRte=new _rte_CDPBreakpointRte_class__WEBPACK_IMPORTED_MODULE_9__.CDPBreakpointRte(this),this.breakpointResolved=new _breakpoint_BreakpointResolved__WEBPACK_IMPORTED_MODULE_29__.BreakpointResolved(this),this.callbackMgt=new _cdp_dump_extract_editFileForCallbacks__WEBPACK_IMPORTED_MODULE_11__.CallbackMgt(this),this.onBreakpointRteImport=new _rte_CDP_RTE_onBreakpointImport__WEBPACK_IMPORTED_MODULE_13__.CDPRTEOnBreakpointImport(this),this.onBreakpointRteOutput=new _rte_CDP_RTE_onBreakpointRteOutput__WEBPACK_IMPORTED_MODULE_14__.CDPRTEOnBreakpointRteOutput(this),this.paused=new _paused_CDP_paused__WEBPACK_IMPORTED_MODULE_6__.CDPPaused(this),this.pausedEvents=new _paused_PausedEvents__WEBPACK_IMPORTED_MODULE_26__.PausedEvents(this),this.getData=new _dump_CDPGetData__WEBPACK_IMPORTED_MODULE_12__.CDPGetData(this),this.scriptMgt=new _scripts_mgt_CDPScriptMgt__WEBPACK_IMPORTED_MODULE_16__.CDPScriptMgt(this),this.EditFileForExtract=new _cdp_dump_extract_editFileForExtract__WEBPACK_IMPORTED_MODULE_17__.EditFileForExtract(this),this.EditForExtractMgt=new _cdp_dump_extract_extractMgt__WEBPACK_IMPORTED_MODULE_18__.EditForExtractMgt(this),this.bpTools=new _breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_19__.CDPBreakpointTools(this),this.cdpConsole=new _console_CDP_Console__WEBPACK_IMPORTED_MODULE_20__.CDPConsole(this),this.tracerBreakpoints=new _cdp_tracer_CDPTracerBreakpoints_class__WEBPACK_IMPORTED_MODULE_21__.CDPTracerBreakpoints(this),this.scriptParsed=new _scripts_mgt_scriptParsed__WEBPACK_IMPORTED_MODULE_7__.ScriptParsed(this),this.scriptParsedMgt=new _scripts_mgt_ScriptParsedMgtClass__WEBPACK_IMPORTED_MODULE_24__.ScriptParsedMgtClass(this),this.flagsAndEvents=new _flags_events_flagsAndEvents__WEBPACK_IMPORTED_MODULE_25__.FlagsAndEventsClass(this),this.runtime=new _CDPRuntime__WEBPACK_IMPORTED_MODULE_30__.CDPRuntime(this)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/CDPRuntime.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPRuntime:()=>CDPRuntime});class CDPRuntime{cdp;executionContextCreated=!1;constructor(cdp){this.cdp=cdp}runtimeEvents(){}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/BreakpointResolved.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BreakpointResolved:()=>BreakpointResolved});class BreakpointResolved{cdp;constructor(cdp){this.cdp=cdp}init(){}onResolved(data){}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointIde.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPBreakpointIde:()=>CDPBreakpointIde});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_handle_status_breakpoints_ide_breakpointsIde__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/handle-status/breakpoints-ide/breakpointsIde.js");class CDPBreakpointIde{cdp;constructor(cdp){this.cdp=cdp}setBpsForIde(fi,done){(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)((0,_handle_status_breakpoints_ide_breakpointsIde__WEBPACK_IMPORTED_MODULE_1__.getBreakpointsIde)().filter(bp=>bp.filePath==fi.file.filePath),(bp,cb)=>{this.setBpForIde(fi,bp,cb)},done)}setBpForIde(fi,bp,cb){bp={lineNumber:bp.line,columnNumber:bp.column,url:fi.file.filePath};this.cdp.bpTools.addBreakpointToFuture(bp,fi,{type:"bp-ide"},cb)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointLog.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPBreakpointLog:()=>CDPBreakpointLog});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async");class CDPBreakpointLog{cdp;constructor(cdp){this.cdp=cdp}setBpForLogs(fi,done){(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(fi.logs,(log,cb)=>{this.setBpForLog(fi,log,cb)},done)}setBpForLog(fi,loc,cb){loc={lineNumber:loc.line,columnNumber:loc.column,url:fi.file.filePath};this.cdp.bpTools.addBreakpointToFuture(loc,fi,{type:"log"},cb)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointTools.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPBreakpointTools:()=>CDPBreakpointTools,textForFiPath:()=>function(text){return text.replaceAll(" ","")}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lodash"),_CDPPossibleBreakpoints__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPPossibleBreakpoints.js");class CDPBreakpointTools{cdp;breakpointsBackLog=[];possibleBreakpoints;constructor(cdp){this.cdp=cdp,this.possibleBreakpoints=new _CDPPossibleBreakpoints__WEBPACK_IMPORTED_MODULE_2__.CDPPossibleBreakpoints(cdp)}reset(){this.breakpointsBackLog=[]}addBreakpointToFuture(bpParams,fi,bpReq,cb){this.breakpointsBackLog.push({bpParams:bpParams,fi:fi,bpReq:JSON.parse(JSON.stringify(bpReq))}),null!=cb&&cb()}setAllBpsToDebugger(cb){this.breakpointsBackLog=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.orderBy)(this.breakpointsBackLog,["bpParams.lineNumber","bpParams.columnNumber"]),(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(this.breakpointsBackLog,(bp,cb2)=>{this.cdp.breakpoints.setBreakpointUrl(bp.bpParams,bp.fi,bp.bpReq,cb2)},err=>{this.breakpointsBackLog=[],cb()})}setBpForUsageAndCallback(fi,fiImUsage,fiPath,cb2){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({usage:cb=>{null!=fiImUsage.bpLoc?.line?this.setBpForUsage(fi,fiImUsage,fiPath,cb):1==fiImUsage.bpLoc?.extract?this.cdp.EditFileForExtract.extractVarForBp(fi,fiImUsage,fiPath,cb):"callback"==fiImUsage.returnType?this.cdp.callbackMgt.replaceCallbackWithDCB(fi,fiImUsage,fiPath,cb):cb()},argument:(usage,cb)=>{1<=fiImUsage.arguments?.length?this.setBpForArgument(fi,fiImUsage,fiPath,cb):cb()}},cb2)}setBpForUsage(fi,fiImUsage,fiPath,cb2){var{bpParams:fiImUsage,bpReq:fiPath}=this.getBpData(fi,fiImUsage,fiPath);this.addBreakpointToFuture(fiImUsage,fi,fiPath,cb2)}getBpData(fi,fiImUsage,fiPath){return{bpReq:{type:"dump",fiPath:fiPath},bpParams:{lineNumber:fiImUsage.bpLoc?.line,columnNumber:fiImUsage.bpLoc?.column,url:fi.file.filePath}}}setBpForArgument(fi,fiImUsage,fiPath,cb2){(0,async__WEBPACK_IMPORTED_MODULE_0__.eachOfSeries)(fiImUsage.arguments,(argum,indexArg,callback)=>{var nextBreakpoint;null!=argum.bpLoc?.line?(indexArg={type:"dump",fiPath:fiPath+"^argument^"+indexArg},argum={lineNumber:argum.bpLoc.line,columnNumber:argum.bpLoc.column,url:fi.file.filePath},"inline-callback"==fiImUsage.returnType&&(nextBreakpoint=this.cdp.bpTools.possibleBreakpoints.getNextBreakpoint(argum.lineNumber,argum.columnNumber),argum.lineNumber=nextBreakpoint.line,argum.columnNumber=nextBreakpoint.column),this.addBreakpointToFuture(argum,fi,indexArg,callback)):callback()},cb2)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPPossibleBreakpoints.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPPossibleBreakpoints:()=>CDPPossibleBreakpoints});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lodash");class CDPPossibleBreakpoints{cdp;possibleBreakpoints=[];constructor(cdp){this.cdp=cdp}getCurrentPossibleBreakpoints(cb){var filePath=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile.filePath;this.getPossibleBreakpoints(filePath,cb)}getPossibleBreakpoints(filePath,cb){const sp=this.cdp.scriptParsedMgt.getExtrasWithFilePath(filePath);filePath=sp?.script.scriptId;this.cdp.client?.Debugger.getPossibleBreakpoints({start:{scriptId:filePath,lineNumber:0}}).then(value=>{this.possibleBreakpoints=value.locations,cb(null,value.locations)}).catch(err=>{console.error("err getPossibleBreakpoints "+sp?.script.url),cb(err)})}getNextBreakpoint(line,column){var newCursor=this.getCursorZeroBased(line,column);let findBp=null;for(let i=0;i<this.possibleBreakpoints.length;i++){var iBp=this.possibleBreakpoints[i];if(iBp.lineNumber==newCursor.lineNumber&&newCursor.columnNumber>iBp.columnNumber&&(findBp=i),newCursor.lineNumber<=iBp.lineNumber){findBp=i;break}}return null!=findBp?(++findBp,{line:this.possibleBreakpoints[findBp].lineNumber+1,column:this.possibleBreakpoints[findBp].columnNumber+1}):{line:line,column:column}}getCursorZeroBased(line,column){return{lineNumber:line+1,columnNumber:column+1}}getPossibleBpsInsideFunction(fn){var possibleBpsInFunction=this.possibleBreakpoints.filter(bp=>bp.lineNumber>=fn.loc.body.start.line&&bp.lineNumber<fn.loc.body.end.line);return(0,lodash__WEBPACK_IMPORTED_MODULE_1__.uniqBy)(possibleBpsInFunction,"lineNumber")}}Array.prototype.lastIndex=function(cond){if(this.length){if(!cond)return this.length-1;for(let i=this.length-1;0<=i;--i)if(cond(this[i]))return i}return-1}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/set-in-cdp/CDPBreakpoint.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPBreakpoint:()=>CDPBreakpoint});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lodash"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js");class CDPBreakpoint{cdp;breakpoints=[];constructor(cdp){this.cdp=cdp,this.breakpoints=[]}setBreakpointUrl(bpParams,fi,bpReq,cb){null!=this.isBreakPointAlreadyExist({paramsTarget:[bpParams]})?(this.addBreakpointToCollection({paramsTarget:[bpParams]},bpReq),cb()):(fi.extras=this.cdp.scriptParsedMgt.getExtrasWithFilePath(fi.file.filePath),this.addBreakPoint(bpParams,fi,bpReq,cb))}addBreakPoint(bpParams,fi,bpReq,done){const originalBpInfos=JSON.parse(JSON.stringify(bpParams));(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({CDPReady:cb=>{this.cdp.isCDPReadyForAction(cb)},prepare:(CDPReady,cb)=>{this.prepareSetBp(fi,bpParams,bpReq,cb)},setBp:(prepare,cb)=>{this.setBp(bpParams,bpReq,cb)},then:(setBp,cb)=>{this.afterSetBp(fi,bpParams,bpReq,setBp,originalBpInfos,cb)}},(err,result)=>{err&&(console.error("err set bp"),console.error(err)),done()})}prepareSetBp(fi,bpParams,bpReq,cb){fi.extras.isTranspiled?fi.extras.sourceMap.replaceBpPosition(bpParams,fi.file):bpParams.url=fi.extras.script.url,bpParams.scriptId=fi.extras.script.scriptId,cb()}setBp(bpParams,bpReq,cb){bpParams={lineNumber:bpParams.lineNumber-1,columnNumber:bpParams.columnNumber-1,scriptId:bpParams.scriptId};this.cdp.client.Debugger.setBreakpoint({location:bpParams}).then(function(res){cb(null,res)},function(reason){"Breakpoint at specified location already exists."==reason?.response?.message?cb(null,{breakpointId:"exist",params:reason.request?.params}):cb(reason.toString())})}afterSetBp(fi,bpParams,bpReq,setBp,originalBpInfos,cb){fi={breakpointId:setBp.breakpointId,fileInterfaceId:String(fi._id),paramsRequest:bpParams,cursorCDP:setBp?.actualLocation,bpRequests:[bpReq],paramsTarget:[originalBpInfos]};null!=fi?.cursorCDP?fi.cursorCDPAdjusted={lineNumber:fi.cursorCDP.lineNumber+1,columnNumber:fi.cursorCDP.columnNumber+1}:console.error("no location for this bp"),this.addBreakpointToCollection(fi,bpReq),cb()}setBreakpointUrlOverrideExisting(bpParams,fi,bpReq,cb){var prevBreakpoint=this.isBreakPointAlreadyExist({paramsTarget:[bpParams]});null!=prevBreakpoint?this.removeBreakPoint(prevBreakpoint.breakpointId).then(()=>{this.addBreakPoint(bpParams,fi,bpReq,cb)}).catch(reason=>{console.error(reason)}):this.addBreakPoint(bpParams,fi,bpReq,cb)}addBreakpointToCollection(bpInfo,bpReq){var foundBp=this.isBreakPointAlreadyExist(bpInfo);null!=foundBp?"all"==bpReq.typeLocation&&1<=foundBp.bpRequests.length||this.addBpReqToExistingBp(foundBp,bpInfo,bpReq):this.breakpoints.push(bpInfo)}addBpReqToExistingBp(ExsitingBp,bpInfo,bpReq){ExsitingBp.bpRequests.push(bpReq),ExsitingBp.paramsTarget.some(pt=>JSON.stringify(pt)===JSON.stringify(bpInfo.paramsTarget[0]))||ExsitingBp.paramsTarget.push(bpInfo.paramsTarget[0])}isBreakPointAlreadyExist(bpInfo){return this.breakpoints.find(bp=>"cursorCDP"in bpInfo&&null!=bp.cursorCDP?.lineNumber&&bp.paramsRequest.lineNumber==bpInfo.paramsRequest.lineNumber&&bp.paramsRequest.columnNumber==bpInfo.paramsRequest.columnNumber&&bp.paramsRequest.scriptId==bpInfo.paramsRequest.scriptId||this.isInOriginalTargetLoc(bp,bpInfo)?bp:null)}removeBreakPoint(bpId){var indexBp=this.breakpoints.findIndex(bp=>bp.breakpointId===bpId),bpiddd=this.breakpoints[indexBp].breakpointId;return this.breakpoints.splice(indexBp,1),this.cdp.client.Debugger.removeBreakpoint({breakpointId:bpiddd})}removeAllBreakpoints(cb){null!=this.cdp.client?.Debugger?(this.breakpoints?.length,(0,async__WEBPACK_IMPORTED_MODULE_0__.eachOf)(this.breakpoints,(bp,index,cb1)=>{this.cdp.client.Debugger.removeBreakpoint({breakpointId:bp.breakpointId}).then(()=>{var bpIndex=this.breakpoints.findIndex(bpp=>bpp.breakpointId==bp.breakpointId);this.breakpoints.splice(bpIndex,1),cb1()}).catch(err=>{console.error(err),cb1()})},()=>{setTimeout(()=>{this.breakpoints=[],cb()},10)})):(this.breakpoints=[],cb())}setAllBreakpointsForFile(done){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({getBps:cb=>{this.cdp.bpTools.possibleBreakpoints.getCurrentPossibleBreakpoints(cb)},setBps:(getBps,cb)=>{(0,async__WEBPACK_IMPORTED_MODULE_0__.each)(getBps,(item,cb2)=>{this.cdp.client.Debugger.setBreakpoint({location:item}).then(value=>{this.breakpoints.push({breakpointId:value.breakpointId,paramsTarget:[item],bpRequests:[{type:"dump"}],fileInterfaceId:String(_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.selectedFile.file),cursorCDPAdjusted:value.actualLocation}),cb2()}).catch(err=>cb2(err))},cb)},sendBp:(setBps,cb)=>{cb()}},(err,data)=>{this.cdp.breakpoints.breakpoints.length,this.sendBpBySocket(),done(err,data)})}sortBreakpoints(){this.breakpoints=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.orderBy)(this.breakpoints,["params.lineNumber","params.columnNumber"])}sendBpBySocket(){(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omit)(this.breakpoints,[".bpRequests.fiMapObj"])}isInOriginalTargetLoc(bp,bpInfo){let found=!1;return 1<=bp.paramsTarget?.length&&bp.paramsTarget.forEach(parammTarg=>{parammTarg.lineNumber==bpInfo.paramsTarget[0].lineNumber&&parammTarg.columnNumber==bpInfo.paramsTarget[0].columnNumber&&parammTarg.url==bpInfo.paramsTarget[0].url&&(found=!0)}),found}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/CDPBreakpointClass.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPBreakpointClass:()=>CDPBreakpointClass});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_common_logger__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/common/logger.js");class CDPBreakpointClass{cdp;constructor(cdp){this.cdp=cdp}setBreakPointForFileInterfaceClasses(fileInterface,done){fileInterface.classes?.length,(0,async__WEBPACK_IMPORTED_MODULE_0__.eachOfSeries)(fileInterface.classes,(classes,index,cb1)=>{(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({methods:cb3=>{(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(classes.methods,(mf,cb2)=>{var fiPath;mf.loc?.body?.start?.line?(fiPath="classes^"+classes.name+"^methods^"+mf.name,this.cdp.breakpointsDump.bpMainFunction.setBpForMfAndParams(fileInterface,mf,fiPath,cb2)):(_common_logger__WEBPACK_IMPORTED_MODULE_1__.default.info("no BP for FI : "+fileInterface._id+" mainFunction :"+mf?.name),cb2())},cb3)},construct:cb4=>{var fiPath;null!=classes.construct?(fiPath="classes^"+classes.name+"^construct",this.cdp.breakpointsDump.bpMainFunction.setBpForMfAndParams(fileInterface,classes.construct,fiPath,cb4)):cb4()}},cb1)},done)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/CDPBreakpointDump.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPBreakpointDump:()=>CDPBreakpointDump});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_CDPBreakpointImport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/CDPBreakpointImport.js"),_CDPBreakpointClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/CDPBreakpointClass.js"),_CDPBreakpointMainFunction__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/CDPBreakpointMainFunction.js"),uuid__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("uuid"),_parse_bp_data_saveParamsData__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/parse-bp-data/saveParamsData.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_breakpoint_add_from_fi_CDPBreakpointLog__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointLog.js"),_breakpoint_add_from_fi_CDPBreakpointIde__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointIde.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js");class CDPBreakpointDump{cdp;bpImport;bpClass;bpMainFunction;bpLog;bpIde;constructor(cdp){this.cdp=cdp,this.bpImport=new _CDPBreakpointImport__WEBPACK_IMPORTED_MODULE_1__.CDPBreakpointImport(cdp),this.bpClass=new _CDPBreakpointClass__WEBPACK_IMPORTED_MODULE_2__.CDPBreakpointClass(cdp),this.bpMainFunction=new _CDPBreakpointMainFunction__WEBPACK_IMPORTED_MODULE_3__.CDPBreakpointMainFunction(cdp),this.bpLog=new _breakpoint_add_from_fi_CDPBreakpointLog__WEBPACK_IMPORTED_MODULE_7__.CDPBreakpointLog(cdp),this.bpIde=new _breakpoint_add_from_fi_CDPBreakpointIde__WEBPACK_IMPORTED_MODULE_8__.CDPBreakpointIde(cdp)}setBreakPointForFileInterface(fileInterfaceId,callback){_parse_bp_data_saveParamsData__WEBPACK_IMPORTED_MODULE_5__.CDPRunId.id=(0,uuid__WEBPACK_IMPORTED_MODULE_4__.v4)();let fiExtras;(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({removePreviousBp:cb=>{this.cdp.EditForExtractMgt.reset(),this.cdp.breakpoints.removeAllBreakpoints(cb)},fi:cb=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_9__.orm.FileInterfaceModel.findWithIdSelectLean(_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__.appCache.selectedFile.file,null,cb)},sourceMap:(fi,removePreviousBp,cb)=>{(fiExtras=this.cdp.scriptParsedMgt.getExtrasWithFilePath(fi.file.filePath)).hasBundle,cb()},mainFunctions:(fi,sourceMap,cb)=>{this.bpMainFunction.setBreakPointForFileInterfaceMainFunctions(fi,cb)},classes:(fi,mainFunctions,cb)=>{this.bpClass.setBreakPointForFileInterfaceClasses(fi,cb)},imports:(fi,classes,cb)=>{this.bpImport.setBreakPointForFileInterfaceImports(fi,cb)},finishExtract:(fi,imports,cb)=>{fiExtras.hasBundle?cb():this.cdp.EditForExtractMgt.finishExtract(fi,cb)},addAllBps:(finishExtract,cb)=>{this.cdp.bpTools.setAllBpsToDebugger(cb)},sortBps:(addAllBps,cb)=>{this.cdp.breakpoints.sortBreakpoints(),cb()}},(err,results)=>{console.error(err),this.cdp.breakpoints.sendBpBySocket(),callback(err)})}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/CDPBreakpointImport.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPBreakpointImport:()=>CDPBreakpointImport});var _shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/shared/interfaces/interfaces.js"),async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("async"),_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointTools.js");class CDPBreakpointImport{cdp;constructor(cdp){this.cdp=cdp}setBreakPointForFileInterfaceImports(fileInterface,cb){fileInterface._id,(0,async__WEBPACK_IMPORTED_MODULE_1__.eachSeries)(fileInterface.imports.filter(importt=>importt.type==_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_0__.ETypeFileInterfaceImport.file),(fiImport,cb1)=>{(0,async__WEBPACK_IMPORTED_MODULE_1__.eachSeries)(fiImport.usage,(fiImUsage,cb2)=>{let fiPath;1<=fiImport.varName?.length?fiPath="imports^"+fiImport.varName+"^usage^"+(0,_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_2__.textForFiPath)(fiImUsage.text):1<=fiImport.varNames?.length&&(fiPath="imports^"+fiImUsage.varName+"^usage^"+(0,_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_2__.textForFiPath)(fiImUsage.text)),this.cdp.bpTools.setBpForUsageAndCallback(fileInterface,fiImUsage,fiPath,cb2)},cb1)},cb)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/CDPBreakpointMainFunction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPBreakpointMainFunction:()=>CDPBreakpointMainFunction});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_common_logger__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/common/logger.js"),_parser_ast_parser_langs_grammar_config__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/langs/grammar-config.js"),_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointTools.js");class CDPBreakpointMainFunction{cdp;constructor(cdp){this.cdp=cdp}setBreakPointForFileInterfaceMainFunctions(fileInterface,cb){fileInterface.mainFunctions?.length,(0,async__WEBPACK_IMPORTED_MODULE_0__.eachOfSeries)(fileInterface.mainFunctions,(mf,index,cb2)=>{var fiPath;mf.loc?.body?.start?.line?(fiPath="mainFunctions^"+mf.name,this.setBpForMfAndParams(fileInterface,mf,fiPath,cb2)):(_common_logger__WEBPACK_IMPORTED_MODULE_1__.default.info("no BP for FI : "+fileInterface._id+" mainFunction :"+mf?.name),cb2())},cb)}setBpForMfAndParams(fileInterface,mf,fiPath,cb2){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({mff:cb=>{this.setBpForFunction(fileInterface,mf,fiPath,cb)},params:(mff,cb)=>{1<=mf.params?.length?this.setBpForParams(fileInterface,mf,fiPath,cb):cb()}},cb2)}setBpForFunction(fileInterface,mf,fiPath,cb){mf={lineNumber:mf.loc.body.start.line,columnNumber:mf.loc.body.start.column,url:fileInterface.file.filePath};this.cdp.bpTools.addBreakpointToFuture(mf,fileInterface,{type:"dump",fiPath:fiPath},cb)}setBpForParams(fileInterface,mf,fiPath,cb2){(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(mf.params.filter(this.filterParams),(mfParam,cb3)=>{(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(mfParam.usage,(paramUsage,cb4)=>{var fiPath2=fiPath+"^params^"+mfParam.name+"^usage^"+(0,_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_2__.textForFiPath)(paramUsage.text);this.cdp.bpTools.setBpForUsageAndCallback(fileInterface,paramUsage,fiPath2,cb4)},cb3)},cb2)}filterParams(mfParam){return-1==_parser_ast_parser_langs_grammar_config__WEBPACK_IMPORTED_MODULE_3__.callbackNames.indexOf(mfParam.name)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/extract/editFileForCallbacks.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CallbackMgt:()=>CallbackMgt});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_parser_ast_parser_langs_grammar_config__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/langs/grammar-config.js"),recast__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("recast"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lodash"),_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/babel/recast.js"),_parser_ast_parser_ast_parser__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser.js");class CallbackMgt{cdp;breakpoints=[];dcbIndex=0;constructor(cdp){this.cdp=cdp}reset(){this.dcbIndex=0,this.breakpoints=[]}replaceCallbackWithDCB(fi,fiImUsage,fiPath,cb2){this.breakpoints.push({fiImUsage:fiImUsage,fiPath:fiPath}),cb2()}replaceAndAddAllBreakpoints(fi,cb3){(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(this.breakpoints,(bpCondition,cb)=>{this.doReplaceDCB(fi,bpCondition.fiImUsage,bpCondition.fiPath,cb)},cb3)}doReplaceDCB(fi,fiImUsage,fiPath,cb){this.cdp.EditForExtractMgt.scriptSource;var ast=(0,_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_3__.parseRecast)(this.cdp.EditForExtractMgt.scriptSource,fi.file.fileType),findArgCb=fiImUsage.arguments.find(arg=>-1!==_parser_ast_parser_langs_grammar_config__WEBPACK_IMPORTED_MODULE_5__.callbackNames.indexOf(arg.name));if(null!=findArgCb?.astPath){const locTargetBlock=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(ast,findArgCb.astPath);if(null!=locTargetBlock?.loc?.start?.line){const self=this;recast__WEBPACK_IMPORTED_MODULE_1__.visit(ast,{visitIdentifier(path){var dcbFunctionName,cbName,loc;if(path.node.loc.start.line==locTargetBlock.loc.start.line&&path.node.loc.start.column==locTargetBlock.loc.start.column)return cbName=path.node.name,dcbFunctionName="dcb"+self.dcbIndex,cbName=(0,_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_3__.parseBlockCodeToNode)("function "+dcbFunctionName+" (){ "+cbName+".apply(null,arguments); }"),loc=(0,_parser_ast_parser_ast_parser__WEBPACK_IMPORTED_MODULE_4__.pickLocation)(path.node.loc).start,"ts"==fi.file.fileType?loc.column+=19:loc.column+=11,path.replace(cbName),fiImUsage.bpLoc=loc,fiImUsage.bpLoc.dcbFunctionName=dcbFunctionName,self.dcbIndex++,!1;this.traverse(path)}})}this.cdp.EditForExtractMgt.scriptSource=(0,_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_3__.astRecastToCode)(ast),cb(null)}else cb("argument callback not found "+fiImUsage?.text)}AddAllBreakpoints(fi,cb3){this.breakpoints,(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(this.breakpoints,(bpCondition,cb)=>{var{bpParams,bpReq}=this.cdp.bpTools.getBpData(fi,bpCondition.fiImUsage,bpCondition.fiPath);bpReq.type="dcb",bpReq.dcbFunctionName=bpCondition.fiImUsage.bpLoc?.dcbFunctionName,this.cdp.breakpoints.setBreakpointUrl(bpParams,fi,bpReq,cb)},cb3)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/extract/editFileForExtract.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{EditFileForExtract:()=>EditFileForExtract});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/babel/recast.js"),_babel_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("@babel/core"),_babel_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("@babel/types"),_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/babel/astToCode.js");class EditFileForExtract{cdp;indexExtract=0;constructor(cdp){this.cdp=cdp}reset(){this.indexExtract=0}extractVarForBp(fi,fiImUsage,fiPath,cb2){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({init:cb=>{this.cdp.EditForExtractMgt.doInitExtract(fi,cb)},doExtract:(init,cb)=>{this.doExtract(fi,fiImUsage,fiPath,cb)},addBreakpoint:(doExtract,cb)=>{var bpParams,bpReq;null!=doExtract?.breakpointLoc?({bpParams,bpReq}=this.cdp.bpTools.getBpData(fi,fiImUsage,fiPath),bpReq.type="dump-extract",bpReq.extractVarName=doExtract.extractVarName,bpParams.lineNumber=doExtract.breakpointLoc.line,bpParams.columnNumber=doExtract.breakpointLoc.column,this.cdp.bpTools.addBreakpointToFuture(bpParams,fi,bpReq,cb)):cb()}},cb2)}doExtract(fi,fiImUsage,fiPath,cb2){var ast=(0,_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_1__.parseRecast)(this.cdp.EditForExtractMgt.scriptSource,fi.file.fileType);const extractVarName="extractVar"+this.indexExtract;this.indexExtract++;let indexStringToReplace=null,extractVarString=null,locParent;(0,_babel_core__WEBPACK_IMPORTED_MODULE_2__.traverse)(ast,{enter(path){if(path.getPathLocation()==fiImUsage.astPath){var varToExtract=path.node;path.replaceWith(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier(extractVarName));let parentPath=path.parentPath;for(;!function(path){path=path.split(".");if(path[path.length-1].startsWith("body"))return 1}(parentPath.getPathLocation());)parentPath=parentPath.parentPath;indexStringToReplace=parentPath.node.loc.start.index,locParent=parentPath.node.loc.start;varToExtract=_babel_types__WEBPACK_IMPORTED_MODULE_3__.variableDeclaration("const",[_babel_types__WEBPACK_IMPORTED_MODULE_3__.variableDeclarator(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier(extractVarName),varToExtract)]);extractVarString=(0,_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_4__.parseBlockBabelToCode)(varToExtract,fi.file.fileType),path.stop()}}}),indexStringToReplace?(this.cdp.EditForExtractMgt.scriptSource=(0,_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_1__.astRecastToCode)(ast),this.cdp.EditForExtractMgt.scriptSource=function(str,toInsert,position){toInsert=[str.slice(0,position),toInsert,str.slice(position)].join("");return toInsert}(this.cdp.EditForExtractMgt.scriptSource,extractVarString,indexStringToReplace),locParent.column+=extractVarString.length,this.cdp.EditForExtractMgt.scriptSource):console.error("Extract var not possible "+fiImUsage.text),cb2(null,{breakpointLoc:locParent,extractVarName:extractVarName})}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-dump/extract/extractMgt.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{EditForExtractMgt:()=>EditForExtractMgt});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),fs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fs");class EditForExtractMgt{cdp;initialized;scriptSource;scriptId;transpileFile=!1;fi;constructor(cdp){this.cdp=cdp}reset(){this.initialized=!1,this.scriptSource=null,this.transpileFile=!1,this.scriptId=null,this.cdp.EditFileForExtract.reset(),this.cdp.callbackMgt.reset(),this.cdp.bpTools.reset()}doInitExtract(fi,cb){0==this.initialized?this.initExtract(fi,cb):cb()}initExtract(fi,callback){this.initialized=!0,(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({scriptId:cb=>{this.cdp.scriptMgt.scriptId(fi.file.filePath,cb)},getScriptSource:(scriptId,cb)=>{this.scriptId=scriptId,this.cdp.scriptMgt.getScriptSource(scriptId,cb)},currentFile:cb=>{(0,fs__WEBPACK_IMPORTED_MODULE_1__.readFile)(fi.file.filePath,"utf8",cb)},selectSourceFile:(getScriptSource,currentFile,cb)=>{getScriptSource==currentFile?this.scriptSource=getScriptSource:(this.transpileFile=!0,this.scriptSource=currentFile),cb()}},(err,data)=>{callback(err,data)})}finishExtract(fi,cb2){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({init:cb=>{this.doInitExtract(fi,cb)},editForCallbacks:(init,cb)=>{1<=this.cdp.callbackMgt.breakpoints.length?this.cdp.callbackMgt.replaceAndAddAllBreakpoints(fi,cb):cb()},transpile:(editForCallbacks,cb)=>{this.transpileFile&&"ts"==fi.file.fileType?this.cdp.scriptMgt.transpileAndUpdateScriptSource(fi,this.scriptSource,this.scriptId,cb):cb()},wait:(transpile,cb)=>{setTimeout(()=>{cb()},10)},setBp:(wait,cb)=>{1<=this.cdp.callbackMgt.breakpoints.length?this.cdp.callbackMgt.AddAllBreakpoints(fi,cb):cb()}},(err,data)=>{cb2(err)})}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-tracer/CDPBreakpointTracerFunctions.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPBreakpointTracerFunctions:()=>CDPBreakpointTracerFunctions});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async");class CDPBreakpointTracerFunctions{cdp;constructor(cdp){this.cdp=cdp}setBPForMainFunctionsTracer(fns,pathName,fi,done){(0,async__WEBPACK_IMPORTED_MODULE_0__.eachOfSeries)(fns,(mf,index,cb2)=>{var fiPath=pathName+"^"+mf.name;this.setBpForFnWithOpts(fiPath,mf,fi,cb2)},done)}setBreakPointForFileInterfaceClasses(fi,cb){(0,async__WEBPACK_IMPORTED_MODULE_0__.eachOfSeries)(fi.classes,(classes,index,cb1)=>{(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({methods:cb3=>{var fiPath="classes^"+classes.name+"^methods";this.setBPForMainFunctionsTracer(classes.methods,fiPath,fi,cb3)},construct:(methods,cb4)=>{var fiPath;null!=classes.construct?null!=classes.construct.loc?.body?.start?.line&&(1==classes.construct.options.start?(fiPath="classes^"+classes.name+"^construct",this.setBpForFnWithOpts(fiPath,classes.construct,fi,cb4)):cb4()):cb4()}},cb1)},cb)}setBpForFnWithOpts(fiPath,fn,fi,done){const bpReq={type:"dump",fiPath:fiPath};(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({check:cb=>{null!=fn.loc?.body?.start?.line||(fi._id,fn?.name),cb()},start:(check,cb)=>{var bpParams;1==fn.options.start&&null!=fn.loc?.body?.start?.line?(bpParams={lineNumber:fn.loc.body.start.line,columnNumber:fn.loc.body.start.column,url:fi.file.filePath},bpReq.typeLocation="start",this.cdp.bpTools.addBreakpointToFuture(bpParams,fi,bpReq,cb)):cb()},all:(start,cb)=>{1==fn.options.allLines?this.setBpForAllLinesInFunction(fiPath,fn,fi,cb):cb()},end:(all,cb)=>{var bpParams;1==fn.options.end&&null!=fn.loc?.body?.end?.line?(bpParams={lineNumber:fn.loc.body.end.line,columnNumber:fn.loc.body.end.column,url:fi.file.filePath},bpReq.typeLocation="end",this.cdp.bpTools.addBreakpointToFuture(bpParams,fi,bpReq,cb)):cb()}},done)}setBpForAllLinesInFunction(fiPath,fn,fi,done){fn=this.cdp.bpTools.possibleBreakpoints.getPossibleBpsInsideFunction(fn);const bpReq={type:"dump",fiPath:fiPath,typeLocation:"all"};(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(fn,(bps,cb)=>{bps={lineNumber:bps.lineNumber,columnNumber:bps.columnNumber,url:fi.file.filePath};this.cdp.bpTools.addBreakpointToFuture(bps,fi,bpReq,cb)},done)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-tracer/CDPTracerBreakpoints.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPTracerBreakpoints:()=>CDPTracerBreakpoints});var _parse_bp_data_saveParamsData__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/parse-bp-data/saveParamsData.js"),async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("async"),uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("uuid"),_CDPBreakpointTracerFunctions_class__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/cdp-tracer/CDPBreakpointTracerFunctions.class.js");class CDPTracerBreakpoints{cdp;tracerBpFns;constructor(cdp){this.cdp=cdp,this.tracerBpFns=new _CDPBreakpointTracerFunctions_class__WEBPACK_IMPORTED_MODULE_3__.CDPBreakpointTracerFunctions(cdp)}resetBreakpoints(cb){_parse_bp_data_saveParamsData__WEBPACK_IMPORTED_MODULE_0__.CDPRunId.id=(0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)(),this.cdp.EditForExtractMgt.reset(),this.cdp.bpTools.reset(),this.cdp.breakpoints.removeAllBreakpoints(cb)}setBreakPointForTracer(fi,callback){fi.file.filePath,(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({cdp:cb=>{null!=this.cdp.client?.Debugger?cb():cb("CDP not ready - setBreakPointForTracer")},possibleBp:(cdp,cb)=>{this.cdp.bpTools.possibleBreakpoints.getPossibleBreakpoints(fi.file.filePath,cb)},logs:(possibleBp,cb)=>{this.cdp.breakpointsDump.bpLog.setBpForLogs(fi,cb)},mainFunctions:(logs,cb)=>{this.tracerBpFns.setBPForMainFunctionsTracer(fi.mainFunctions,"mainFunctions",fi,cb)},functions:(mainFunctions,cb)=>{this.tracerBpFns.setBPForMainFunctionsTracer(fi.functions,"functions",fi,cb)},classes:(functions,cb)=>{this.tracerBpFns.setBreakPointForFileInterfaceClasses(fi,cb)},breakpointsIde:(classes,cb)=>{this.cdp.breakpointsDump.bpIde.setBpsForIde(fi,cb)},addAllBps:(breakpointsIde,cb)=>{this.cdp.bpTools.setAllBpsToDebugger(cb)},sortBps:(addAllBps,cb)=>{this.cdp.breakpoints.sortBreakpoints(),cb()}},(err,results)=>{this.cdp.breakpoints.breakpoints.length,this.cdp.breakpoints.sendBpBySocket(),console.error(err),callback(err)})}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/checkCondition.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{bpCondition:()=>function(condition,data,cb){this.checkCondition(condition,data?.local,(err,data)=>{if(err)return cb(err);1==data?cb():cb({message:bpConditionFalse})})},bpConditionFalse:()=>bpConditionFalse,checkCondition:()=>function(condition,data,cb){try{var script=new(vm__WEBPACK_IMPORTED_MODULE_0___default().Script)(condition),context=JSON.parse(JSON.stringify(data)),result=script.runInNewContext(context);if(1==result)return cb(null,!0),!0;cb(null,!1)}catch(e){console.error(e.toString()),cb({errorUi:e.toString()})}}});var __webpack_exports__=__webpack_require__("vm"),vm__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__);const bpConditionFalse="Breakpoint Condition False"},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/console/CDP-Console.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPConsole:()=>CDPConsole});var rxjs_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("rxjs/operators"),_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/tracer/tab-session/get-tab-session.js"),_tracer_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/target-files-mgt.js"),_handlers_event_service_play_stop__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/event-service/play-stop.js"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),async__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("async"),_parseText__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/console/parseText.js"),_parseObject__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/console/parseObject.js"),_initConsoleLine__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/console/initConsoleLine.js"),_common_logger__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/common/logger.js");class CDPConsole{cdp;started=!1;queue;parseText;parseObject;iniConsoleLine;constructor(cdp){this.cdp=cdp,this.parseText=new _parseText__WEBPACK_IMPORTED_MODULE_6__.CDPConsoleParseText(cdp),this.parseObject=new _parseObject__WEBPACK_IMPORTED_MODULE_8__.CDPConsoleParseObject(cdp),this.iniConsoleLine=new _initConsoleLine__WEBPACK_IMPORTED_MODULE_9__.CDPConsoleInitConsoleLine(cdp),this.queue=(0,async__WEBPACK_IMPORTED_MODULE_5__.queue)(this.processConsoleMessage.bind(this)),this.queue.error(this.onQueueError.bind(this)),this.queue.drain(this.onQueueDrain.bind(this))}init(){this.started||(this.queue.empty(),this.listenConsole())}listenConsole(){null!=this.cdp?.client?.Runtime&&(this.cdp.client.Runtime.on("consoleAPICalled",this.onConsole.bind(this)),this.started=!0)}onConsole(params){_common_logger__WEBPACK_IMPORTED_MODULE_7__.default.info("On Console Message"),this.isShutDownMessage(params)?this.doDisconnectDebugger():this.queue.push(params)}onQueueError(err,task){console.error("onQueueError err task"),console.error(err)}processConsoleMessage(params,cb){(0,_handlers_event_service_play_stop__WEBPACK_IMPORTED_MODULE_3__.getIsRunning)().getValue(),(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_4__.getTargetCDP)()?.cdpReady.getValue(),this.queue.length(),params.args,params.stackTrace.callFrames[0],this.cdp.flagsAndEvents.scriptParsed.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.first)(val=>1==val)).subscribe(()=>{var consoleLine=this.iniConsoleLine.iniConsoleLine(params);this.handleConsoleMessage(params,consoleLine,cb)})}handleConsoleMessage(params,consoleLine,cb){null!=params?.stackTrace?.callFrames?.[0]?.url?this.isNoOverflowError(params)?this.onConsoleWithText(consoleLine,params,cb):(0,_tracer_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.isFileInTargetFiles)(consoleLine.filePath)?this.parseObject.onApi(consoleLine,params,null,cb):this.hasObjectId(params)?(this.cdp.pausedEvents.pauseDebugger(),this.parseObject.onApi(consoleLine,params,{noScope:!0},cb)):this.onConsoleWithText(consoleLine,params,cb):(console.error("err on console message"),cb())}onQueueDrain(){}onConsoleWithText(consoleLine,params,cb){this.parseText.parseWithText(consoleLine,params),this.addMessageToConsole(consoleLine,cb)}addMessageToConsole(consoleLine,cb){(0,_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_1__.getActiveTabSession)((err,tabSession)=>{tabSession.onNewConsoleLine(consoleLine,()=>{setTimeout(()=>{cb()},3)})})}isNoOverflowError(params){let isNoOverflowError=!1;return"error"==params.type&&params.args.forEach(argu=>{0==argu?.preview?.overflow&&(isNoOverflowError=!0)}),isNoOverflowError}hasObjectId(params){let hasObjectId=!1;return params.args.forEach(argu=>{null!=argu.objectId&&"date"!==argu.subtype&&(hasObjectId=!0)}),hasObjectId}clearQueue(){this.queue.remove(()=>!0)}isShutDownMessage(params){return 4==params?.args?.length&&"** APP SHUTDOWN **"==params?.args?.[3]?.value||"** APP SHUTDOWN **"==params?.args?.[0]?.value||void 0}doDisconnectDebugger(){this.cdp.disconnectAndReconnect()}closeConsole(){this.started=!1,this.queue.pause(),this.queue.empty(),this.cdp.client?.Console&&this.cdp.client.Console.disable().catch(()=>{})}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/console/initConsoleLine.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPConsoleInitConsoleLine:()=>CDPConsoleInitConsoleLine});class CDPConsoleInitConsoleLine{cdp;constructor(cdp){this.cdp=cdp}iniConsoleLine(params){var fileScriptParsed=this.cdp.scriptParsedMgt.getExtrasWithScriptId(params.stackTrace.callFrames[0].scriptId),consoleLine={filePath:params.stackTrace.callFrames[0].url.split("?")[0],timeStamp:params.timestamp,result:[]};return 1<=fileScriptParsed?.filesPath?.[0]?.length&&(consoleLine.filePath=fileScriptParsed?.filesPath[0]),consoleLine.filePath.startsWith("file:///")&&(consoleLine.filePath=consoleLine.filePath.replace("file://","")),fileScriptParsed?.isTranspiled?this.getOriginalLocation(consoleLine,params,fileScriptParsed):consoleLine.loc={line:params.stackTrace.callFrames[0].lineNumber+1,column:params.stackTrace.callFrames[0].columnNumber+1},consoleLine}getOriginalLocation(consoleLine,params,fileScriptParsed){fileScriptParsed=fileScriptParsed.sourceMap,params={line:params.stackTrace.callFrames[0].lineNumber+1,column:params.stackTrace.callFrames[0].columnNumber},fileScriptParsed=fileScriptParsed.getOriginalPosition(params);1<=fileScriptParsed?.line&&(consoleLine.loc={line:fileScriptParsed.line,column:fileScriptParsed.column+1},null!=fileScriptParsed?.source)&&(consoleLine.filePath=fileScriptParsed.source),consoleLine.loc}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/console/parseObject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPConsoleParseObject:()=>CDPConsoleParseObject});class CDPConsoleParseObject{cdp;startDate;constructor(cdp){this.cdp=cdp}onApi(consoleLine,params,opts,cb){this.startDate=new Date;const objects=this.getObjectIdsToQuery(params);objects.length,this.cdp.paused.queueQueryObjects.idle(),this.cdp.paused.queueQueryObjects.length(),this.cdp.paused.queueQueryObjects.paused,this.cdp.paused.resultQueue.length;let sub;var scopeFound=this.addScope(consoleLine,this.cdp.paused.resultQueue,params);if(0==objects.length&&-1!=scopeFound?this.cdp.cdpConsole.onConsoleWithText(consoleLine,params,cb):(sub=this.cdp.paused.queueDrained.subscribe(resulQueue=>{sub.unsubscribe(),this.addDataObjectIfAsked(consoleLine,objects,this.cdp.paused.resultQueue,params,opts),this.cdp.cdpConsole.onConsoleWithText(consoleLine,params,cb)}),1<=objects?.length&&this.cdp.paused.queueQueryObjects.push(objects)),0==objects?.length&&!1!==opts?.noScope){params.timestamp,this.cdp.flagsAndEvents.allScriptParsedTime;const forceParseText=()=>{sub?.closed||(console.error("\n\n\n sub?.unsubscribe()"),sub?.unsubscribe(),this.cdp.cdpConsole.onConsoleWithText(consoleLine,params,cb))};setTimeout(()=>{0==this.cdp.flagsAndEvents.allScriptParsed.getValue()||0==this.cdp.flagsAndEvents.allScriptParsedTime||params.timestamp<this.cdp.flagsAndEvents.allScriptParsedTime?forceParseText():this.cdp.flagsAndEvents.allScriptParsedTime},5)}}getObjectIdsToQuery(params){const remoteObjects=[];return params?.args?.filter(arg=>null!=arg?.objectId&&"error"!==arg.subtype).forEach(arg=>{remoteObjects.push(arg)}),remoteObjects}addDataObjectIfAsked(consoleLine,objects,resulQueue,params,opts){objects?.forEach(object=>{var dataObjectIdIndex=resulQueue?.findIndex(res=>res?.objectId==object.objectId);if(-1!=dataObjectIdIndex){var resulQueueObject=resulQueue[dataObjectIdIndex];let dataObjId=resulQueueObject?.data;"table"==params.type&&(dataObjId={"#Table":dataObjId});resulQueueObject=this.getIndexOfArgumentWithObjectId(object.objectId,params);consoleLine.result[resulQueueObject]={dataObject:dataObjId},resulQueue.splice(dataObjectIdIndex,1)}}),1==this.cdp.paused.config.consoleLog.showScopeForLog.targetFiles&&!1!==opts?.noScope&&this.addScope(consoleLine,resulQueue,params),this.cdp.paused.queueDrained.next(null)}getIndexOfArgumentWithObjectId(objectId,params){return params.args.findIndex(arg=>arg?.objectId==objectId)}addScope(consoleLine,resulQueue,params){var scopeIndex=resulQueue?.findIndex(resQueue=>resQueue?.floc?.filePath==consoleLine.filePath&&resQueue?.floc?.line==consoleLine.loc.line);return 0<=scopeIndex&&(params=params.args.length,consoleLine.result[params]={scope:JSON.parse(JSON.stringify(resulQueue[scopeIndex].data))},consoleLine.result,resulQueue.splice(scopeIndex,1)),consoleLine.duration=(new Date).getTime()-this.startDate.getTime(),resulQueue.length,scopeIndex}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/console/parseText.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPConsoleParseText:()=>CDPConsoleParseText});var ansicolor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ansicolor"),_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/helpers/filesExtensions.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_scripts_mgt_projectFiles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/projectFiles.js"),_handlers_libs_line_column_path__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/handlers/libs/line-column-path.js");__webpack_require__("fs");class CDPConsoleParseText{cdp;constructor(cdp){this.cdp=cdp}parseWithText(consoleLine,params){this.isRecompyleLogObject(params)?this.parseRecomyleLog(consoleLine,params):1<=params?.args?.length&&this.parseArguments(consoleLine,params)}parseArguments(consoleLine,params){try{params.args.forEach((argu,index)=>{null!=argu.objectId&&"error"!=argu.subtype&&"date"!=argu.subtype&&"error"!=params.type||this.parseTextArgument(consoleLine,params,argu,index)})}catch(e){console.error("Error parse arguments",e)}}parseTextArgument(consoleLine,params,argu,index){if(consoleLine.result[index]={},null!=argu.value)if("number"==argu.type)addToTextColor(this.parseOrApplyColor(String(argu.value),params));else try{var arguObject=JSON.parse(argu.value);consoleLine.result[index].dataObject=arguObject}catch(e){addToTextColor(this.parseOrApplyColor(argu.value,params))}function addToTextColor(textColor){consoleLine.result[index].textColor=textColor}"object"==argu?.type&&("date"==argu?.subtype?addToTextColor(this.getArrayWithType(argu.description,"log")):consoleLine.result[index].dataObject=function(properties){const ret={};return properties.forEach(prop=>{ret[prop.name]=prop.value}),ret}(argu.preview.properties)),"error"==argu.subtype&&1<=argu.description?.length&&addToTextColor(this.getArrayWithType(argu.description,"error"))}parseOrApplyColor(text,params){return"error"==params.type||"warning"==params.type||"info"==params.type||"debug"==params.type?this.getArrayWithType(text,params.type):(text=this.mainReplaceWihtLinks(text),(0,ansicolor__WEBPACK_IMPORTED_MODULE_0__.parse)(text).spans)}getArrayWithType(text,type){return text=this.mainReplaceWihtLinks(text),"error"==type?[{text:text,color:{name:"red"}}]:"warning"==type?[{text:text,color:{name:"yellow"}}]:"debug"==type?[{text:text,color:{name:"blue"}}]:"info"==type?[{text:text,color:{name:"greenyellow"}}]:"log"==type?[{text:text}]:null}tryParseArgumentJSON(arg){try{return JSON.parse(arg.value)}catch(e){return arg.value}}mainReplaceWihtLinks(text){try{this.cdp.scriptParsedMgt.scripts.forEach(script=>{var fileUrl=script.script.url;if(script.filesPath.forEach(fpath=>{text=this.replaceAllLinksInsideTHisText(text,fpath,script)}),script.isTranspiled&&(text=this.replaceAllLinksInsideTHisText(text,fileUrl,script),null!=script.sourceMap?.sourceMapConsumer)){const sourceRoot=script.sourceMap.sourceMapConsumer?.sourceRoot;script.sourceMap.sourceMapConsumer?.sources.forEach((sourceFile,sourceIndex)=>{sourceFile=sourceFile.replace(sourceRoot,"");text=this.replaceAllLinksInsideTHisText(text,sourceFile)})}}),text=this.replaceAllFilesPathWithLink(text),text=this.replaceOtherUrlsWithLink(text)}catch(e){}return text}doesFilePathExistInText(filePath,text){return-1!==text.indexOf(filePath)&&-1==text.indexOf('<div class="link" file="'+filePath)}replaceAllLinksInsideTHisText(text,link,scp){try{if(2<=link?.length){let preventInfiniteLoop=0,position=findPositionNotLink(text,link);for(;null!=position&&preventInfiniteLoop<10;)text=this.replaceLinkInsideText(text,link,position,scp),position=findPositionNotLink(text,link),preventInfiniteLoop++}}catch(e){}return text}replaceLinkInsideText(text,link,pos,scp){pos=function(text,url){url=new RegExp(url+":(\\d+):(\\d+)","m"),text=text.match(url);return text&&3<=text.length?{line:Number(text[1]),column:Number(text[2])}:null}(text.slice(pos.start,pos.end+12),link);if(null==pos?.line)return text;{let newText;newText=scp?this.getNewTextWithScp(link,pos.line,pos.column,scp):this.getNewTextNoScp(link,pos.line,pos.column);scp=link+":"+pos.line+":"+pos.column;return text=text.replace(scp,newText)}}getNewTextWithScp(link,line,column,scp){scp=scp.sourceMap.getOriginalPosition({line:line,column:column});return this.makeLinkToReplaceText(scp.source,scp.line,scp.column)}getNewTextNoScp(link,line,column){var filePath=(0,_scripts_mgt_projectFiles__WEBPACK_IMPORTED_MODULE_3__.findFilePathInAppRoot)(link);return null!=filePath?this.makeLinkToReplaceText(filePath,line,column):link}makeLinkToReplaceText(filePath,line,column){var filePathTextFixed=filePath.replace(_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.project.appRoot,"");return'<div class="link" file="'+filePath+'" line="'+line+'" column="'+column+'" link >'+(filePathTextFixed+":"+line+":"+column)+"</div>"}replaceOtherUrlsWithLink(text){return function(text){text=text.match(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi);return text||[]}(text).forEach(link=>{let position=findPositionNotLink(text,link);for(;null!=position;)text=function(s,start,end,replacement){if(end<=start||start<0||end>s.length)return s;start=s.substring(0,start)+replacement+s.substring(end);return start}(text,position.start,position.end,'<div class="link" url="'+link+'" link >'+link+"</div>"),position=findPositionNotLink(text,link)}),text}replaceAllFilesPathWithLink(text){return(0,_handlers_libs_line_column_path__WEBPACK_IMPORTED_MODULE_5__.extractFileDetails)(text).forEach(fPath=>{var textToReplace=fPath.filePath+":"+fPath.line+":"+fPath.column;-1==text.indexOf('<div class="link" file="'+textToReplace)&&(fPath=this.makeLinkToReplaceText(fPath.filePath,fPath.line,fPath.column),text=text.replace(textToReplace,fPath))}),text}isRecompyleLogObject(params){return!!(4<=params.args?.length&&"string"==params.args[0].type&&"string"==params.args[1].type&&"string"==params.args[2].type&&"string"==params.args[3].type&&(0,_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_1__.isAllowedFileExtension)(params.args[0].value)&&0<=parseInt(params.args[1].value)&&0<=parseInt(params.args[2].value))}parseRecomyleLog(consoleLine,params){if(consoleLine.filePath=this.cdp.scriptParsed.findFilePathWithPartialFilePath(params.args[0].value),consoleLine.loc.line=params.args[1].value,consoleLine.loc.column=params.args[2].value,consoleLine.result[0]={},4==params.args.length)try{consoleLine.result[0].dataObject=JSON.parse(params.args[3].value)}catch(e){consoleLine.result[0].textColor=(0,ansicolor__WEBPACK_IMPORTED_MODULE_0__.parse)(params.args[3].value).spans}else{consoleLine.result[0].dataObject=[];var argsToParse=params.args.slice(3);for(let i=0;i<argsToParse.length;i++)consoleLine.result[i]={},consoleLine.result[i].dataObject=this.tryParseArgumentJSON(argsToParse[i])}}}function findPositionNotLink(text,textToFind){return function(precedingWords,afterWords,mainText,text){precedingWords=precedingWords.join("|"),afterWords=afterWords.join("|"),precedingWords=new RegExp(`(?<!${precedingWords})${text}(?!${afterWords})`,"gi"),text=precedingWords.exec(mainText);if(text)return{start:text.index,end:text.index+text[0].length};return null}([" link >",' file="',' url="'],['" line="'],text,textToFind)}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/CDPGetData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPGetData:()=>CDPGetData});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_middlewares_async_try_catch__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/middlewares/async-try-catch.js"),_runtime_dump_runtime_dump_vars__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/runtime-dump-vars.js"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lodash"),_prototype__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/prototype.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(__webpack_exports__);class CDPGetData{cdp;performance=!0;method=async__WEBPACK_IMPORTED_MODULE_0__.parallel;pathsToExclude=[];config;startDate;constructor(cdp){this.cdp=cdp,this.config=nconf__WEBPACK_IMPORTED_MODULE_4___default().get("scope")}getData(params,bpInfos,callback){this.initPathToExclude(bpInfos);let tasks={};tasks=1!=bpInfos.bpRequests.length||"dcb"!=bpInfos.bpRequests[0].type&&"inline-callback"!=bpInfos.bpRequests[0]?.importUsage?.returnType?(tasks=this.getAllTasksLocal(params.callFrames),1<=bpInfos.fileInterface.classes?.length&&2<params.callFrames[0]?.this?.objectId?.length&&(tasks.this=this.getTaskThis(params.callFrames[0].this)),tasks=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.merge)(tasks,this.getGlobal(params.callFrames)),(0,lodash__WEBPACK_IMPORTED_MODULE_2__.merge)(tasks,this.getClosure(params.callFrames))):this.getTaskDcb(params.callFrames,bpInfos),this.method((0,_middlewares_async_try_catch__WEBPACK_IMPORTED_MODULE_5__.tryCatch)(tasks),(err,results)=>{if(console.error(err),err)return callback(err);this.tasksEnd(results,callback)})}tasksEnd(results,callback){var ret={local:{},closure:{}};for(const key in results)-1!==key.indexOf("local")?ret.local=(0,_prototype__WEBPACK_IMPORTED_MODULE_3__.sortObject)((0,lodash__WEBPACK_IMPORTED_MODULE_2__.merge)(ret.local,results[key])):-1!==key.indexOf("closure")?ret.closure=(0,_prototype__WEBPACK_IMPORTED_MODULE_3__.sortObject)((0,lodash__WEBPACK_IMPORTED_MODULE_2__.merge)(ret.closure,results[key])):"global"!=key&&"this"!=key||(ret[key]=(0,_prototype__WEBPACK_IMPORTED_MODULE_3__.sortObject)(results[key]));callback(null,{dataDump:ret,dataRaw:results,duration:this.stats()})}stats(){var mseconds=(new Date).getTime()-this.startDate.getTime();return mseconds}initPathToExclude(bpInfos){this.startDate=new Date,"rte-output"==bpInfos.bpRequests[0].type?this.pathsToExclude=["res"]:this.pathsToExclude=[]}getTaskDcb(callFrames,bpInfos){const scriptId=callFrames[0].location.scriptId;callFrames=callFrames.find(cf=>cf.location.scriptId==scriptId&&cf.functionName==bpInfos.bpRequests[0].dcbFunctionName)?.scopeChain?.[0].object;return{local:this.getTaskObjectId(callFrames)}}getAllTasksLocal(callFrames){callFrames=this.getObjectIdsLocal(callFrames);const tasks={};return callFrames.forEach((objectId,index)=>{tasks["local"+index]=this.getTaskObjectId(objectId)}),tasks}getObjectIdsLocal(callFrames){const scriptId=callFrames[0].location.scriptId,objectIds=[];let firstCallFrame;return callFrames.filter(cf=>cf.location.scriptId==scriptId).forEach(cf=>{var objId=cf?.scopeChain?.find(sc=>"local"==sc?.type);null==firstCallFrame&&(firstCallFrame=cf),null!=objId&&this.isInsideMainScope(firstCallFrame,objId)&&objectIds.push(objId.object)}),objectIds}isInsideMainScope(firstCallFrame,objId){return firstCallFrame.functionLocation.lineNumber==objId.startLocation.lineNumber||objId.startLocation.lineNumber<=firstCallFrame.functionLocation.lineNumber&&objId.endLocation.lineNumber>=firstCallFrame.functionLocation.lineNumber}getTaskObjectId(object){return cb=>{new _runtime_dump_runtime_dump_vars__WEBPACK_IMPORTED_MODULE_1__.RuntimeDumpVars(this.cdp.client.Runtime,this.config.maxDepth,!1,this.pathsToExclude,!1).startWithFirstLevel(object,cb)}}getTaskThis(object){return cb=>{new _runtime_dump_runtime_dump_vars__WEBPACK_IMPORTED_MODULE_1__.RuntimeDumpVars(this.cdp.client.Runtime,this.config.maxDepth,!1,this.pathsToExclude,!1).getFirstItem(object,cb)}}getObjectIdsClosure(callFrames){const scriptId=callFrames[0].location.scriptId,objectIds=[];return callFrames.filter(cf=>cf.location.scriptId==scriptId).forEach(cf=>{cf?.scopeChain?.filter(sc=>"closure"==sc?.type).forEach((sc,index)=>{0==index&&objectIds.push(sc.object)})}),objectIds}getClosure(callFrames){const tasks={};if(1==this.config.show.closure){callFrames=this.getObjectIdsClosure(callFrames);if(1<=callFrames?.length){const tasks={};return callFrames.forEach((objectId,index)=>{tasks["closure"+index]=this.getTaskObjectId(objectId)}),tasks}}return tasks}getGlobal(callFrames){var task={};if(1==this.config.show.global){const objecIdGlobal=callFrames[0].scopeChain.find(sc=>"global"==sc.type)?.object;null!=objecIdGlobal&&(task.global=cb=>{var global=objecIdGlobal;global?new _runtime_dump_runtime_dump_vars__WEBPACK_IMPORTED_MODULE_1__.RuntimeDumpVars(this.cdp.client.Runtime,this.config.maxDepth,!0,this.pathsToExclude,this.performance).startWithFirstLevel(global,cb):cb()})}return task}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/fixes.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{fixMongoIds:()=>function(self){deepdash_eachDeep__WEBPACK_IMPORTED_MODULE_0___default()(self.tree,function(value,key,parentValue,context){var pathParent,objId;if("Symbol(id)"==key&&"--max-depth--reached--"!==value&&12==value?.length)return pathParent=String(context.path).replace('["Symbol(id)"]',""),objId=objectMongoToString(value),(0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(self.tree,pathParent,objId),!1;if("Symbol(id)"==key&&"--max-depth--reached--"==value){const pathParent=String(context.path).replace('["Symbol(id)"]',"");(0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(self.tree,pathParent,"000000000000000000000000")}else{if("_bsontype"==key&&"ObjectID"==String(value)&&"--max-depth--reached--"!==parentValue?.id&&12==parentValue?.id?.length){const pathParent=getParentPath(context.path),objId=objectMongoToString(parentValue.id);return(0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(self.tree,pathParent,objId),!1}if("_bsontype"==key&&"ObjectID"==value){const pathParent=getParentPath(context.path);(0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(self.tree,pathParent,"000000000000000000000000")}}},{callbackAfterIterate:!1,checkCircular:!1,childrenPath:void 0,includeRoot:!1,leavesOnly:!1,pathFormat:"string",rootIsChildren:!0})}});var __webpack_exports__=__webpack_require__("deepdash/eachDeep"),deepdash_eachDeep__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lodash");function getParentPath(contextPath){contextPath=String(contextPath).split("."),contextPath.pop(),contextPath=contextPath.join(".");return contextPath}function objectMongoToString(idValues){let idString="",str="";return idValues.forEach(idVal=>{1==(str=Number(idVal).toString(16)).length&&(str="0"+str),idString+=str}),idString}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/dump-var-filter.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{applyFilterVars:()=>function(ret,mFilter,tree,path){var{retToKeep:mFilter,retToIgnore}=doFilterIndividual(ret,mFilter);return applyFilterVarsToResult(ret,tree,path,mFilter,retToIgnore)},applyFilterVarsToResult:()=>applyFilterVarsToResult,doFilterIndividual:()=>doFilterIndividual,shouldApplyFilterForProp:()=>function(dataFilter,prop){return!!(1<=prop.name?.length&&(Array.isArray(dataFilter.match?.variableName)&&-1!==dataFilter.match?.variableName?.indexOf(prop.name)||dataFilter.match?.variableName==prop.name))||!!(1<=prop.value?.className?.length&&(Array.isArray(dataFilter.match?.className)&&-1!==dataFilter.match?.className?.indexOf(prop.value.className)||dataFilter.match?.className==prop.value.className))||!!(1<=prop.value?.subtype?.length&&(Array.isArray(dataFilter.match?.subtype)&&-1!==dataFilter.match?.subtype?.indexOf(prop.value.subtype)||dataFilter.match?.subtype==prop.value.subtype))}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash");function applyFilterVarsToResult(ret,tree,path,retToKeep,retToignore){return(0,lodash__WEBPACK_IMPORTED_MODULE_0__.set)(tree,[...path,"#","ignored"],retToignore),ret.result=[],ret.result=retToKeep,ret}function doFilterIndividual(ret,mFilter){const retToKeep=[],retToIgnore=[];return ret.result.forEach(item=>{!function(name,keep){for(let i=0;i<keep.length;i++)if(keep[i]===name)return 1;return}(item.name,mFilter.mask.keep)?retToIgnore.push(item.name):retToKeep.push(item)}),{retToIgnore:retToIgnore,retToKeep:retToKeep}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/runtime-dump-var-from-console.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RuntimeDumpVarFromConsole:()=>RuntimeDumpVarFromConsole});class RuntimeDumpVarFromConsole{rdv;constructor(rdv){this.rdv=rdv}getObjectFromConsole(remoteObject,cb){this.rdv.keepOnlyOwnProperties=!0;var params={objectId:remoteObject.objectId};"array"==remoteObject?.subtype?params.ownProperties=!0:(params.ownProperties=!1,params.nonIndexedPropertiesOnly=!0),this.rdv.Runtime.getProperties(params).then(prop=>{this.onProp(remoteObject,prop,cb)}).catch(err=>{this.rdv.catchErr(err,remoteObject.objectId,cb)}),this.rdv.initTimeout()}onProp(remoteObject,prop,cb){var path=this.rdv.initPath(remoteObject),remoteObject={value:remoteObject,name:""},remoteObject=(this.rdv.addObjectInfos(path,remoteObject),this.rdv.getProps.filterWithMask([],remoteObject,JSON.parse(JSON.stringify(prop))));this.rdv.getProps.getAllIArray(path,remoteObject.result,(err,data)=>{this.rdv.end(cb)})}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/runtime-dump-var-get-props.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RuntimeDumpVarGetProps:()=>RuntimeDumpVarGetProps});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash"),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_project_files_data_filter_dataFilter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/project-files/data-filter/dataFilter.js"),_dump_var_filter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/dump-var-filter.js");class RuntimeDumpVarGetProps{rdv;showMaxDepthReached=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.throttle)(()=>{},3e3,{trailing:!1});constructor(rdv){this.rdv=rdv}getAllIArray(path,prop,cb){setTimeout(()=>{1==this.rdv.isTimeout?cb():this.rdv.methodMap(prop,(item,cb)=>{this.rdv.shouldIgnoreProp(item)?cb():setTimeout(()=>{this.getvars(path,item,prop,cb)},3)},(err,res)=>{cb(null,res)})},3)}getvars(path,prop,parentProp,cb){try{null!=prop.value&&null!=prop.value.objectId&&"object"===prop.value.type?this.rdv.getProperties(path,prop,cb):(this.rdv.simpleValue.parseSimpleValue(path,prop,parentProp),cb())}catch(e){console.error(e),cb(e)}}parseProperties(path,prop,ret,fulfill){path=this.rdv.makeNewPath(path,prop),this.rdv.addObjectInfos(path,prop),ret=this.filterWithMask(path,prop,JSON.parse(JSON.stringify(ret))),ret=this.rdv.simpleValue.handlePropertiesAndReturnObjectIds(prop,ret,path);1==this.rdv.isTimeout?fulfill():path.length>this.rdv.maxDepth?(this.showMaxDepthReached(),lodash__WEBPACK_IMPORTED_MODULE_0___default().set(this.rdv.tree,path,"--max-depth--reached--"),fulfill()):1<=ret.length?("array"==prop.value?.subtype&&path.push("["),this.getAllIArray(path,ret,fulfill)):fulfill()}filterWithMask(path,prop,ret){let hasBeenFiltered=!1;if(1<=(0,_project_files_data_filter_dataFilter__WEBPACK_IMPORTED_MODULE_1__.getDataDumpFilter)().length){var dataFilter=(0,_project_files_data_filter_dataFilter__WEBPACK_IMPORTED_MODULE_1__.getDataDumpFilter)();for(let i=0;i<dataFilter.length;i++)(0,_dump_var_filter__WEBPACK_IMPORTED_MODULE_2__.shouldApplyFilterForProp)(dataFilter[i],prop)&&(ret=(0,_dump_var_filter__WEBPACK_IMPORTED_MODULE_2__.applyFilterVars)(ret,dataFilter[i],this.rdv.tree,path),hasBeenFiltered=!0)}return!hasBeenFiltered&&this.rdv.keepOnlyOwnProperties&&(ret.result=ret.result.filter(prop=>1==prop.isOwn)),ret}shouldApplyFilter(prop){let hasBeenFiltered=!1;if(1<=(0,_project_files_data_filter_dataFilter__WEBPACK_IMPORTED_MODULE_1__.getDataDumpFilter)().length){var dataFilter=(0,_project_files_data_filter_dataFilter__WEBPACK_IMPORTED_MODULE_1__.getDataDumpFilter)();for(let i=0;i<dataFilter.length;i++)(0,_dump_var_filter__WEBPACK_IMPORTED_MODULE_2__.shouldApplyFilterForProp)(dataFilter[i],prop)&&(hasBeenFiltered=!0)}return hasBeenFiltered}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/runtime-dump-var-simple-value.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RuntimeDumpVarSimpleValue:()=>RuntimeDumpVarSimpleValue});var __webpack_exports__=__webpack_require__("lodash"),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_runtime_dump_vars__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/runtime-dump-vars.js");class RuntimeDumpVarSimpleValue{rdv;constructor(rdv){this.rdv=rdv}handlePropertiesAndReturnObjectIds(propParent,ret,newPath){const itemsWithNewChild=[];return ret.result.forEach(propp=>{"length"==propp.name||this.rdv.shouldIgnoreProp(propp)||((1!=this.rdv.isGlobal||1!=propp.enumerable)&&null!=propp.value&&"object"==propp.value.type?itemsWithNewChild.push(propp):this.parseSimpleValue(newPath,propp,propParent))}),itemsWithNewChild}parseSimpleValue(path,prop,parentProp){var newPath=path.slice();for(let i=0;i<newPath.length;i++)"["==newPath[i]&&(newPath[i+1]="["+newPath[i+1]+"]",newPath.splice(i,1));"array"==parentProp.value?.subtype?newPath.push("["+prop.name+"]"):newPath.push(prop.name);path=newPath.join("."),path=(0,_runtime_dump_vars__WEBPACK_IMPORTED_MODULE_1__.replaceAll)(path,".[","[");lodash__WEBPACK_IMPORTED_MODULE_0___default().set(this.rdv.tree,path,this.getValue(prop))}getValue(prop){let value;return value="null"==prop.value?.subtype?null:-1!==["string","number","bigint","boolean","symbol","undefined"].indexOf(prop.value?.type)?prop.value.value:"function"==prop.value?.type?"#function":prop.value}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/runtime-dump-vars.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RuntimeDumpVars:()=>RuntimeDumpVars,appendObject:()=>appendObject,parsePathToString:()=>parsePathToString,replaceAll:()=>replaceAll});var __webpack_exports__=__webpack_require__("async"),async__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lodash"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("deep-sort-object"),deep_sort_object__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(__webpack_exports__),_fixes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/fixes.js"),_runtime_dump_var_get_props__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/runtime-dump-var-get-props.js"),_runtime_dump_var_simple_value__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/runtime-dump-var-simple-value.js"),_runtime_dump_var_from_console__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/runtime-dump-var-from-console.js");class RuntimeDumpVars{Runtime;maxDepth;isGlobal;pathsToExclude;performance;tree={};methodMap=async__WEBPACK_IMPORTED_MODULE_0___default().map;configState;isTimeout=!1;propsToIgnore=["__proto__","__WEBPACK_IMPORTED_MODULE","__defineGetter__","__lookupGetter__","__lookupSetter__","__defineGetter__","__defineSetter__"];keepOnlyOwnProperties=!1;getProps;simpleValue;console;constructor(Runtime,maxDepth,isGlobal,pathsToExclude,performance){this.Runtime=Runtime,this.maxDepth=maxDepth,this.isGlobal=isGlobal,this.pathsToExclude=pathsToExclude,this.performance=performance,this.getProps=new _runtime_dump_var_get_props__WEBPACK_IMPORTED_MODULE_5__.RuntimeDumpVarGetProps(this),this.simpleValue=new _runtime_dump_var_simple_value__WEBPACK_IMPORTED_MODULE_6__.RuntimeDumpVarSimpleValue(this),this.console=new _runtime_dump_var_from_console__WEBPACK_IMPORTED_MODULE_7__.RuntimeDumpVarFromConsole(this),this.tree={},this.configState=nconf__WEBPACK_IMPORTED_MODULE_2___default().get("scope")}startWithFirstLevel(object,cb){object.objectId;const path=this.initPath(object);this.Runtime.getProperties({objectId:object.objectId,ownProperties:!1}).then(prop=>{this.getProps.getAllIArray(path,prop.result,(err,data)=>{this.end(cb)})}).catch(err=>{this.catchErr(err,object.objectId,cb)}),this.initTimeout()}getFirstItem(object,cb){object.objectId;const path=this.initPath(object);this.Runtime.getProperties({objectId:object.objectId,ownProperties:!0}).then(prop=>{this.getProps.getAllIArray(path,prop.result,(err,data)=>{this.end(cb)})}).catch(err=>{this.catchErr(err,object.objectId,cb)}),this.initTimeout()}initPath(object){let path=[];return path="object"==object.type&&"array"==object?.subtype?["#Array"]:path}getProperties(path,prop,cb){setTimeout(()=>{var opts;1==this.isTimeout?cb():(opts={objectId:prop.value.objectId,ownProperties:!0},this.getProps.shouldApplyFilter(prop)&&(opts.ownProperties=!1,opts.nonIndexedPropertiesOnly=!0),this.Runtime.getProperties(opts).then(ret=>{this.getProps.parseProperties(path,prop,ret,cb)}).catch(err=>{prop.value.objectId,cb(err)}))},3)}shouldIgnoreProp(prop){var name=prop.name;let toIgnore=!1;name.startsWith("__")&&(toIgnore=!0);for(let i=0;i<this.propsToIgnore.length;i++)if(-1!==name.indexOf(this.propsToIgnore[i])){toIgnore=!0;break}return name.startsWith("Symbol(")&&"Symbol(id)"!==name&&(toIgnore=!0),toIgnore=-1!==this.pathsToExclude.indexOf(name)?!0:toIgnore}catchErr(err,objectId,cb){"Could not find object with given id"==err?.message?(console.error("err dump -  Could not find object with given id "+objectId),cb()):cb(err)}initTimeout(){setTimeout(()=>{this.tree["#_RecompyleMaxTimeout"]=!0,this.isTimeout=!0},this.configState.timeout)}end(cb){(0,_fixes__WEBPACK_IMPORTED_MODULE_4__.fixMongoIds)(this),function removeSingleHashKeyObjects(obj){if("object"!=typeof obj||null===obj)return;Object.keys(obj).forEach(key=>{const value=obj[key];"object"==typeof value&&null!==value&&(1===Object.keys(value).length&&"#"in value?delete obj[key]:removeSingleHashKeyObjects(value))})}(this.tree),cb(null,deep_sort_object__WEBPACK_IMPORTED_MODULE_3___default()(this.tree))}addObjectInfos(path,prop){path=JSON.parse(JSON.stringify(path)),"array"!=prop?.value?.subtype||0==path.length?path.push("#"):path[path.length-1]=path[path.length-1]+"#",path=parsePathToString(path);null!=prop?.value?.className&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(this.tree,path+".className",prop.value.className),null!=prop?.value?.subtype&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(this.tree,path+".subtype",prop.value.subtype)}makeNewPath(path,prop){let namee=prop.name;prop=path.slice();return-1!==namee.indexOf(".")&&(namee=replaceAll(namee,".","__")),prop.push(namee),prop}}function replaceAll(str,find,replace){return str.replace(new RegExp(find.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"g"),replace)}function appendObject(obj){}function parsePathToString(newPath){for(let i=0;i<newPath.length;i++)"["==newPath[i]&&(newPath[i+1]="["+newPath[i+1]+"]",newPath.splice(i,1));return replaceAll(newPath.join("."),".[","[")}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/flags-events/flagsAndEvents.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FlagsAndEventsClass:()=>FlagsAndEventsClass});var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("rxjs"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js");class FlagsAndEventsClass{cdp;pauseCDP=new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject(null);scriptParsed=new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject(!1);allScriptParsed=new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject(!1);allScriptParsedTime=0;subs=[];constructor(cdp){this.cdp=cdp,this.init()}init(){this.subs.push(this.pauseCDP.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_0__.distinctUntilChanged)()).subscribe(ev=>{1==ev?this.cdp.pausedEvents.pauseDebugger():0==ev&&this.cdp.pausedEvents.resume(()=>{})})),this.subs.push(this.allScriptParsed.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_0__.distinctUntilChanged)()).subscribe(ev=>{(0,_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.updateStatusAndSendUpdateToUi)("CDP.target-debug-app.allScriptParsed",ev)}))}clear(){this.subs.forEach(s=>s.unsubscribe())}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/flags-events/persistantVars.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PersistantVars:()=>PersistantVars});class PersistantVars{cdp;maxDebounceTime=-1;constructor(cdp){this.cdp=cdp}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/parse-bp-data/parseDataMongo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{fromMongo:()=>function(data){},toMongo:()=>function(data){data=function replaceKeysDeep(obj){return(0,lodash__WEBPACK_IMPORTED_MODULE_0__.transform)(obj,function(result,value,key){let currentKey=key;-1!==(key=String(key)).indexOf(".")?currentKey="___":key.startsWith("$")&&(currentKey="_$_"),result[currentKey]=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isObject)(value)?replaceKeysDeep(value):value})}(data);return data}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash")},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/parse-bp-data/pickDataBpRes.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{pickDataBreakpointResponse:()=>function(fiMap,fiPath,bpReq,data,cb){let retData={};try{if(null!=fiMap.mainFunction&&null==fiMap.params&&pickDataForParams(fiMap.mainFunction.params,data,retData),null!=fiMap.function&&null==fiMap.params&&pickDataForParams(fiMap.function.params,data,retData),null!=fiMap.classe&&(null!=fiMap.method&&pickDataForParams(fiMap.method.params,data,retData),null!=fiMap.construct)&&pickDataForParams(fiMap.construct.params,data,retData),"dump-extract"==bpReq?.type&&null!=bpReq.extractVarName)retData=data.dataRaw?.local0?.[bpReq.extractVarName];else if(null!=fiMap.usage)if("callback"==fiMap.usage.returnType&&null!=data.dataDump.local?.arguments){retData=[];for(const x in data.dataDump.local.arguments)Number(x)&&(retData[x]=data.dataDump.local.arguments[x])}else if("inline-get"==fiMap.usage.returnType)for(const dataMergedKey in data.dataDump){var dataimport=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.pick)(data.dataDump[dataMergedKey],fiMap.usage.bpLoc.varPath);1<=Object.keys(dataimport).length&&(retData=dataimport)}else"inline-callback"==fiMap.usage.returnType&&(retData=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.pick)(data.dataRaw?.local0,fiMap.argument.bpLoc.varPath));"rte"==bpReq?.type&&(retData=data.dataDump),cb(null,retData)}catch(e){console.error(e),cb(e)}}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash");function pickDataForParams(params,data,retData){params?.forEach(mfParams=>{1<=mfParams.name?.length?null!=data.dataDump?.local?.[mfParams.name]?retData[mfParams.name]=data.dataDump?.local?.[mfParams.name]:null!=data.dataDump?.this?.[mfParams.name]&&(retData[mfParams.name]=data.dataDump?.this?.[mfParams.name]):1<=mfParams.object?.length&&mfParams.object.forEach(paramName=>{null!=data.dataDump?.local?.[paramName]?retData[paramName]=data.dataDump?.local?.[paramName]:null!=data.dataDump?.this?.[mfParams.name]&&(retData[paramName]=data.dataDump?.this?.[paramName])})})}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/parse-bp-data/saveBpRequestData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{saveBpRequestData:()=>function(bpInfo,bpReq,resDataDump,paramsDataId,done){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({pickDataFn:cb=>{"bp-ide"!==bpReq.type?(0,_pickDataBpRes__WEBPACK_IMPORTED_MODULE_3__.pickDataBreakpointResponse)(bpReq.fiMapObj,bpReq.fiPath,bpReq,resDataDump,cb):cb(null,resDataDump.dataDump)},tracer:(pickDataFn,cb)=>{"tracer"==_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appStatus.mode?(0,_tracer_bpResDataToLog__WEBPACK_IMPORTED_MODULE_2__.bpResDataToLog)(bpInfo,bpReq,resDataDump,pickDataFn,cb):cb()},save:(tracer,pickDataFn,cb)=>{!function(bpResData,cb){"dev"==nconf__WEBPACK_IMPORTED_MODULE_5___default().get("env")?_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_4__.orm.BpResponseData.create(bpResData,(err,data)=>{cb(err)}):cb()}({fileInterface:bpInfo.fileInterfaceId,fiPath:bpReq.fiPath,paramsData:paramsDataId,data:pickDataFn},cb)}},done)}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_tracer_bpResDataToLog__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/tracer/bpResDataToLog.js"),_pickDataBpRes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/parse-bp-data/pickDataBpRes.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(__webpack_exports__)},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/parse-bp-data/saveParamsData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPRunId:()=>CDPRunId,saveParamsData:()=>function(bpInfo,data,callback){async__WEBPACK_IMPORTED_MODULE_0___default().autoInject({find:cb=>{cb(null,bpInfo.fileInterfaceId)},prepare:(find,cb)=>{null!=find?("dump"!=(find={file:find,data:(0,_parseDataMongo__WEBPACK_IMPORTED_MODULE_1__.toMongo)(data),fiPath:bpInfo.bpRequests[0].fiPath,paramsKeys:Object.keys(data.local),type:bpInfo.bpRequests[0].type,project:_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.project._id,cursorCDP:bpInfo.cursorCDP,cursorCDPAdjusted:bpInfo.cursorCDPAdjusted,paramsTarget:bpInfo.paramsTarget}).type&&"dcb"!=find.type||(find.runId=CDPRunId.id),cb(null,find)):cb("FI not found")},parse:(prepare,find,cb)=>{cb(null,prepare)},save:(parse,cb)=>{"dev"==nconf__WEBPACK_IMPORTED_MODULE_4___default().get("env")?_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__.orm.ParamsDataModel.create(parse,function(err,data){err&&(console.error("err save dump"),console.error(err)),cb(err,data?._id)}):cb()}},(err,data)=>{err?callback(err,data):callback(null,data?.save)})}});var __webpack_exports__=__webpack_require__("async"),async__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_parseDataMongo__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/parse-bp-data/parseDataMongo.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(__webpack_exports__);const CDPRunId={id:""}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/paused/CDP-paused.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPPaused:()=>CDPPaused});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_parse_bp_data_saveParamsData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/parse-bp-data/saveParamsData.js"),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("lodash"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_checkCondition__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/checkCondition.js"),_routes_status_nextStep__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/routes/status/nextStep.js"),_parse_bp_data_saveBpRequestData__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/parse-bp-data/saveBpRequestData.js"),_fileinterface_mgt_paramsDataMgt__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/services/fileinterface-mgt/paramsDataMgt.js"),_models_mongo_mongoose_static_fiConvertTreeJson__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/static/fiConvertTreeJson.js"),rxjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("rxjs"),_PausedQueue__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/paused/PausedQueue.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(__webpack_exports__),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js");class CDPPaused{cdp;queueMgt;config;queueDrained=new rxjs__WEBPACK_IMPORTED_MODULE_10__.Subject;queueQueryObjects;resultQueue=[];constructor(cdp){this.cdp=cdp,this.queueMgt=new _PausedQueue__WEBPACK_IMPORTED_MODULE_11__.PausedQueue(this),this.setConfig(),this.queueMgt.initQueue()}check(params,cb){var bpInfo;null!==params?.callFrames?null!=(bpInfo=this.findBreakpoint(params))?(this.bpInfoLog(bpInfo),0==this.config.consoleLog.showScopeForLog.targetFiles&&"log"==bpInfo.bpRequests[0].type&&1==bpInfo.bpRequests.length?cb("dont handle log here"):cb(null,bpInfo)):(params.callFrames?.[0],cb("bpInfo not found")):(console.error("no callframes"),cb("no callframes"))}paused(params,donePaused){(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omit)(params,["callFrames"])?.hitBreakpoints?.[0];const timestamp=(new Date).valueOf();let bpInfo;(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({check:cb=>{this.setConfig(),this.check(params,(err,bpi)=>{bpInfo=bpi,cb(err)})},getFileInterface:(check,cb)=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_13__.orm.FileInterfaceModel.findWithIdSelectLean(bpInfo.fileInterfaceId,_models_mongo_mongoose_static_fiConvertTreeJson__WEBPACK_IMPORTED_MODULE_9__.selectFiMain,cb)},populateBpInfo:(check,getFileInterface,cb)=>{bpInfo.fileInterface=getFileInterface,bpInfo.timeStamp=timestamp,(0,_fileinterface_mgt_paramsDataMgt__WEBPACK_IMPORTED_MODULE_8__.populateFiMaptoBpInfo)(bpInfo,getFileInterface,cb)},getData:(populateBpInfo,cb)=>{this.cdp.getData.getData(params,bpInfo,cb)},bpCondition:(getData,cb)=>{"rte"==bpInfo.bpRequests[0].type&&null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appStatus.breakpointCondition?(0,_checkCondition__WEBPACK_IMPORTED_MODULE_5__.bpCondition)(_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appStatus.breakpointCondition,getData,cb):cb()},save:(getData,bpCondition,cb)=>{(0,_parse_bp_data_saveParamsData__WEBPACK_IMPORTED_MODULE_1__.saveParamsData)(bpInfo,getData.dataDump,cb)},next:(resultQueue,save,cb)=>{(0,_routes_status_nextStep__WEBPACK_IMPORTED_MODULE_6__.waitNextStep)(cb)},handeBpRequest:(next,getData,save,cb)=>{(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(bpInfo.bpRequests,(bpReq,cb2)=>{!function(bpInfo,option,data,paramsDataId,cb){"log"==option.type?cb():"rte-import"==option.type?this.cdp.onBreakpointRteImport.onBreakpointRteImport(bpInfo,option,data.dataDump,cb):"rte-output"==option.type?this.cdp.onBreakpointRteOutput.onBreakpointRteOutput(bpInfo,option,data.dataDump,cb):(0,_parse_bp_data_saveBpRequestData__WEBPACK_IMPORTED_MODULE_7__.saveBpRequestData)(bpInfo,option,data,paramsDataId,cb)}(bpInfo,bpReq,getData,save,cb2)},cb)},wait:(handeBpRequest,cb)=>{setTimeout(()=>{cb()},1)},afterSave:(save,getData,cb)=>{this.afterSave(bpInfo,getData),cb()},resultQueue:(getData,afterSave,cb)=>{this.addResultToResultQueue(bpInfo,getData),cb()}},(err,result)=>{(null==err?.message||err.message!=_checkCondition__WEBPACK_IMPORTED_MODULE_5__.bpConditionFalse)&&err&&"dont handle log here"!==err&&"bpInfo not found"!==err?(console.error("Error Paused "+err?.toString()),donePaused(err)):donePaused()})}addResultToResultQueue(bpInfo,getData){null!=bpInfo.bpRequests.find(bpReq=>"log"==bpReq.type)&&(bpInfo.bpRequests.forEach((bpReq,index)=>{"log"==bpReq.type&&this.resultQueue.push({floc:{filePath:bpInfo.paramsTarget[index].url,line:bpInfo.paramsTarget[index].lineNumber,column:bpInfo.paramsTarget[index].columnNumber},duration:getData.duration,data:getData.dataDump})}),this.resultQueue)}afterSave(bpInfos,data){"rte"==bpInfos.bpRequests[0].type?(bpInfos={line:bpInfos.paramsTarget[0].lineNumber,column:bpInfos.paramsTarget[0].columnNumber,url:bpInfos.paramsTarget[0].url},_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_2__.mSocketServer.socketApp.emit("rte",{data:data.dataDump,cursor:bpInfos})):"dump"==_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appStatus.mode&&refreshUIDump()}findBreakpoint(params){params.hitBreakpoints;let bpInfo=this.cdp.breakpoints.breakpoints.find(bp=>bp.breakpointId==params?.hitBreakpoints?.[0]);if(null==bpInfo){const callFrameLoc=params.callFrames?.[0].location;bpInfo=this.cdp.breakpoints.breakpoints.find(bpi=>bpi.cursorCDP?.lineNumber==callFrameLoc?.lineNumber&&bpi.cursorCDP?.columnNumber==callFrameLoc?.columnNumber)}return(0,lodash__WEBPACK_IMPORTED_MODULE_3__.clone)(bpInfo)}bpInfoLog(bpInfo){(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omit)(bpInfo,["options.import","options.importUsage","bpRequests.fiMapObj"]).bpRequests.map(bpReq=>(delete bpReq.fiMapObj,bpReq));bpInfo.bpRequests,bpInfo.bpRequests[0].type}setConfig(){this.config={consoleLog:nconf__WEBPACK_IMPORTED_MODULE_12___default().get("consoleLog"),state:nconf__WEBPACK_IMPORTED_MODULE_12___default().get("state")}}}const refreshUIDump=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.debounce)(()=>{_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_2__.mSocketServer.socketApp.emit("refresh-ui","refresh")},1e3)},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/paused/PausedEvents.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausedEvents:()=>PausedEvents});var _common_logger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/common/logger.js");class PausedEvents{cdp;constructor(cdp){this.cdp=cdp}events(){this.cdp.client.Debugger.on("paused",params=>{_common_logger__WEBPACK_IMPORTED_MODULE_0__.default.info("Debugger paused"),this.cdp.cdpPaused.next(!0),this.cdp.paused.queueQueryObjects.resume(),this.cdp.paused.queueQueryObjects.push(params),this.cdp.paused.queueQueryObjects.idle(),this.cdp.paused.queueQueryObjects.paused,this.cdp.paused.queueQueryObjects.length()}),this.cdp.client.Debugger.on("resumed",()=>{this.cdp.paused.cdp.cdpPaused.next(!1)})}resume(cb){_common_logger__WEBPACK_IMPORTED_MODULE_0__.default.info("CDP Resume"),1==this.cdp.cdpPaused.getValue()&&null!=this.cdp.client?.Debugger?this.cdp.client.Debugger.resume(null).then(()=>{this.evaluate(),cb()}).catch(()=>{cb()}):cb()}resumeAndTerminate(cb){1==this.cdp.cdpPaused.getValue()?this.cdp.client.Debugger.resume({terminateOnResume:!0}).then(()=>{cb()}).catch(()=>{cb()}):cb()}pauseDebugger(){0==this.cdp.cdpPaused.getValue()?this.cdp.client?.Debugger?.pause().then(()=>{this.evaluate()}).catch(err=>{}):this.evaluate()}evaluate(){this.cdp.client?.Runtime.evaluate({expression:"1+1"}).then(()=>{}).catch(()=>{})}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/paused/PausedQueue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausedQueue:()=>PausedQueue});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_dump_runtime_dump_runtime_dump_vars__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/dump/runtime-dump/runtime-dump-vars.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__);class PausedQueue{cdpPaused;constructor(cdpPaused){this.cdpPaused=cdpPaused}initQueue(){this.cdpPaused.queueQueryObjects=(0,async__WEBPACK_IMPORTED_MODULE_0__.queue)(this.processQueue.bind(this),1),this.cdpPaused.queueQueryObjects.drain(this.ondrain.bind(this))}processQueue(task,callback){setTimeout(()=>{"objectId"in task&&null!=task?.objectId&&null!=task?.type?this.getDataConsole(task,callback):this.cdpPaused.paused(task,callback)},3)}ondrain(){setTimeout(()=>{this.cdpPaused.queueDrained.next(null)},1),setTimeout(()=>{this.cdpPaused.resultQueue.length,this.cdpPaused.cdp.pausedEvents.resume(()=>{})},2)}clearQueue(){this.cdpPaused.resultQueue=[]}getDataConsole(remoteObject,cb){new _dump_runtime_dump_runtime_dump_vars__WEBPACK_IMPORTED_MODULE_1__.RuntimeDumpVars(this.cdpPaused.cdp.client?.Runtime,nconf__WEBPACK_IMPORTED_MODULE_2___default().get("scope").maxDepth,!1,[],!1).console.getObjectFromConsole(remoteObject,(err,data)=>{remoteObject?.objectId,this.cdpPaused.resultQueue.push({objectId:remoteObject.objectId,data:data}),cb(err)})}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/rte/CDP-RTE-onBreakpointImport.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPRTEOnBreakpointImport:()=>CDPRTEOnBreakpointImport});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash"),_handle_status_initAndClearChildInstances__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/handle-status/initAndClearChildInstances.js"),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("rxjs/operators"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("rxjs");class CDPRTEOnBreakpointImport{cdp;breakPointResult=new rxjs__WEBPACK_IMPORTED_MODULE_4__.Subject;constructor(cdp){this.cdp=cdp}onBreakpointRteImport(bpInfos,bpReq,dataDump,callback){(0,lodash__WEBPACK_IMPORTED_MODULE_0__.omit)(bpInfos.bpRequests,["import","importUsage"]),bpReq.import.filePath;var nameRteApp=bpReq.import.varName+"-"+bpReq.importUsage._id;const rteApp=(0,_handle_status_initAndClearChildInstances__WEBPACK_IMPORTED_MODULE_1__.instancesImports)()[nameRteApp];(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({addParamsData:cb=>{rteApp.fileMgt.getFiWithDataRunForChildInstance(bpReq.import.filePath,cb)},removeBps:cb=>{rteApp.cdp.breakpoints.removeAllBreakpoints(cb)},makeFiles:(addParamsData,cb)=>{this.cdp.opts.name;const importUsage=bpReq.importUsage,targetMf=(importUsage,rteApp.fileMgt.fileInterface.mainFunctions.find(mf=>mf.name==importUsage.text));if(targetMf,null==targetMf)return cb("targetMf not found in onBreakpointRteImport");rteApp.fileMgt.cursor={line:targetMf.loc.start.line,column:targetMf.loc.start.column};const paramsData={};importUsage.arguments.forEach((arg,index)=>{index=targetMf.params[index].name;arg.value?paramsData[index]=arg.value:"callback"!=arg.argType&&"Identifier"==arg.argType&&(paramsData[index]=dataDump.local[arg.name])}),targetMf.dataRun=paramsData,rteApp.fileMgt.makeFiles(cb)},setBp:(removeBps,makeFiles,cb)=>{rteApp.cdp.onBreakpointRteImport.setBpFunctionOutput(rteApp,this.cdp.opts.name,cb)},runAndWaitForBP:(setBp,cb)=>{this.breakPointResult.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.first)()).subscribe({next:v=>{this.onDataFromChildApp(bpInfos,bpReq,v,cb)},error:err=>{console.error("YYY err runAndWaitForBP"),cb(err)}}),rteApp.cdp.breakpointRte.runOnce(),this.cdp.opts.name}},(err,data)=>{callback(err,{resume:!1})})}setBpFunctionOutput(rteApp,originInstanceName,cb){this.cdp.opts.name;var bpInfos={lineNumber:6,columnNumber:1,url:"file://"+rteApp.cdp.opts.rteAppPath+"file-params.js"};rteApp.cdp.breakpoints.setBreakpointUrl(bpInfos,rteApp.cdp.rteApp.fileMgt.fileInterface,{type:"rte-output",fiPath:"rte.out",fromRteInstanceName:originInstanceName},cb)}onDataFromChildApp(bpInfos,opts,data,callback){bpInfos.paramsTarget;const dataClean=[];let nbArgs=0;for(const argumentsKey in data.local.arguments){var indexArg;argumentsKey.match(/^-?\d+$/)&&((indexArg=parseInt(argumentsKey))>nbArgs&&(nbArgs=indexArg),(0,lodash__WEBPACK_IMPORTED_MODULE_0__.set)(dataClean,"["+indexArg+"]",data.local.arguments[argumentsKey]))}for(let i=0;i<nbArgs;i++)null==dataClean[i]&&(dataClean[i]=null);dataClean,(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({addDataMock:cb=>{var fi=this.cdp.rteApp.fileMgt.fileInterface;fi.imports.forEach(fiImport=>{opts.import._id==fiImport._id&&fiImport.usage.forEach(fiImportUsage=>{fiImportUsage._id==opts.importUsage._id&&(fiImportUsage.dataRun=dataClean)})}),this.cdp.rteApp.fileMgt.fileInterface=fi,cb()},resumeAndTerminate:(addDataMock,cb)=>{this.cdp.pausedEvents.resumeAndTerminate(cb)},makeFiles:(resumeAndTerminate,cb)=>{this.cdp.rteApp.fileMgt.makeFiles(cb)},removeBp:(resumeAndTerminate,cb)=>{this.cdp.breakpoints.removeBreakPoint(bpInfos.breakpointId).then(()=>{cb()})},runOnce:(removeBp,makeFiles,cb)=>{setTimeout(()=>{this.cdp.breakpointRte.runOnce()},100),cb()}},(err,result)=>{callback(err)})}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/rte/CDP-RTE-onBreakpointRteOutput.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPRTEOnBreakpointRteOutput:()=>CDPRTEOnBreakpointRteOutput});var _runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lodash");class CDPRTEOnBreakpointRteOutput{cdp;constructor(cdp){this.cdp=cdp}onBreakpointRteOutput(bpInfos,bpReq,dataDump,callback){(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omit)(bpInfos,["options"]);bpInfos=(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__.getInstanceWithName)(bpReq.fromRteInstanceName);null!=bpInfos?(bpInfos.cdp.onBreakpointRteImport.breakPointResult.next(dataDump),callback(null,"onBreakpointRteOutput")):callback("Error get instance with name : "+bpReq.fromRteInstanceName)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/rte/CDPBreakpointRte.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPBreakpointRte:()=>CDPBreakpointRte});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),__webpack_exports__=__webpack_require__("axios"),axios__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),_handle_status_queueParseFile__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/handle-status/queueParseFile.js"),html_to_text__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("html-to-text");class CDPBreakpointRte{cdp;constructor(cdp){this.cdp=cdp}setBpAndRun(callback){const fileInterface=this.cdp.rteApp.fileMgt.fileInterface,cursor=this.cdp.rteApp.fileMgt.cursor;fileInterface.file,fileInterface._id,(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({CDPReady:cb=>{this.cdp.isCDPReadyForAction(cb)},sourceMap:cb=>{var selectedFile;"ts"==fileInterface.file.fileType?(selectedFile={file:this.cdp.opts.rteAppPath+"file.ts",filePath:this.cdp.opts.rteAppPath+"file.ts",fileType:"ts"},fileInterface.file=selectedFile):cb()},removeBreakpoints:(sourceMap,CDPReady,cb)=>{this.cdp.breakpoints.removeAllBreakpoints(cb)},resumeAndTerminate:(removeBreakpoints,cb)=>{this.cdp.pausedEvents.resumeAndTerminate(cb)},wait:(resumeAndTerminate,CDPReady,removeBreakpoints,cb)=>{setTimeout(cb,10)},bpImportFile:(wait,cb)=>{cb()},setBp:(bpImportFile,cb)=>{this.setBpAtCursor(fileInterface,cursor,cb)},sendBp:(setBp,cb)=>{cb()},run:(sendBp,setBp,cb)=>{setTimeout(()=>{this.runOnce(cb)},10)}},(err,result)=>{err&&_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__.mSocketServer.socketApp.emit("console",{err:err}),callback(err,result)})}setBpAtCursor(fileInterface,cursor,cb){cursor.line,cursor.column;cursor={lineNumber:cursor.line,columnNumber:cursor.column,url:"file://"+this.cdp.opts.rteAppPath+"file."+fileInterface.file.fileType};this.cdp.breakpoints.setBreakpointUrl(cursor,fileInterface,{type:"rte",fiPath:"rte.xxx"},cb)}runOnce(cb){var urlRun="http://localhost:"+this.cdp.opts.nodeAppPort+"/run";axios__WEBPACK_IMPORTED_MODULE_2___default().get(urlRun).then(function(response){"ok"==response?.data?.status&&_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__.mSocketServer.socketApp.emit("rte-end-of-function",response.data),null!=cb&&cb()}).catch(err=>{console.error("Err run once"),console.error(err);let textErr=(0,html_to_text__WEBPACK_IMPORTED_MODULE_4__.convert)(err);err?.response?.data&&(textErr=(0,html_to_text__WEBPACK_IMPORTED_MODULE_4__.convert)(err.response.data)),console.error(textErr),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__.mSocketServer.socketApp.emit("console",{err:textErr}),null!=cb&&cb(err)})}bpImport(fileInterface,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({importsWithNoProvisioning:cb=>{let importss=(0,_handle_status_queueParseFile__WEBPACK_IMPORTED_MODULE_3__.getImportsWithExternalCallback)(fileInterface.imports);cb(null,importss=importss.map(iMport=>(iMport.usage=iMport.usage.filter(importUsage=>1==importUsage?.dataRun?.provisioning),iMport)))},setBpForImports:(importsWithNoProvisioning,cb)=>{this.setBpForImports(fileInterface,importsWithNoProvisioning,cb)}},(err,result)=>{callback(err)})}setBpForImports(fileInterface,importss,cb){(0,async__WEBPACK_IMPORTED_MODULE_0__.eachOfSeries)(importss,(importsss,index1,cb1)=>{(0,async__WEBPACK_IMPORTED_MODULE_0__.eachOfSeries)(importsss.usage,(importUsage,index2,cb2)=>{var bpInfos={lineNumber:importUsage.loc.start.line-1,columnNumber:importUsage.loc.start.column,url:"file://"+this.cdp.opts.rteAppPath+"file.js"},importUsage={type:"rte-import",fiPath:"imports."+importsss.varName+"."+importUsage.text,importUsage:importUsage,import:importsss};this.cdp.breakpoints.setBreakpointUrlOverrideExisting(bpInfos,fileInterface,importUsage,cb2)},cb1)},cb)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/CDPScriptMgt.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CDPScriptMgt:()=>CDPScriptMgt});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_transpiler_transpiler__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/transpiler/transpiler.js");class CDPScriptMgt{cdp;scriptIdd;originalScriptSource;constructor(cdp){this.cdp=cdp}showSource(filePath,done){(0,async__WEBPACK_IMPORTED_MODULE_0__.waterfall)([cb=>{this.scriptId(filePath,cb)},(scriptId,cb)=>{this.getScriptSource(scriptId,cb)}],(err,data)=>{done&&done(err,data)})}scriptId(filePath,cb){filePath=this.cdp.scriptParsedMgt.getExtrasWithFilePath(filePath).script.scriptId;null!=(this.scriptIdd=filePath)?cb(null,filePath):cb("scriptId not found")}getScriptSource(scriptId,cb){this.cdp.client.Debugger.getScriptSource({scriptId:scriptId}).then(value=>{this.originalScriptSource=value.scriptSource,cb(null,value.scriptSource)},reason=>{cb(reason)})}setScriptSource(scriptId,originalScriptSource,newScriptSource,cb){String(originalScriptSource)==String(newScriptSource)?cb():this.updateScriptSource(scriptId,newScriptSource,cb)}updateScriptSource(scriptId,scriptSouce,cb){this.originalScriptSource!==scriptSouce?this.cdp.client.Debugger.setScriptSource({scriptId:scriptId,scriptSource:scriptSouce,dryRun:!1,allowTopFrameEditing:!0}).then(value=>{cb(null,value)}).catch(err=>{cb(err)}):cb()}transpileAndUpdateScriptSource(fi,scriptSource,scriptId,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({transpileFile:cb=>{var fileName=fi.file.file.split("/").pop();(0,_transpiler_transpiler__WEBPACK_IMPORTED_MODULE_1__.transpileFileTs)(fileName,this.cdp.scriptMgt.originalScriptSource,scriptSource,cb)},updateScript:(transpileFile,cb)=>{scriptSource=transpileFile,this.cdp.scriptMgt.updateScriptSource(scriptId,scriptSource,cb)},updateSourceMap:(updateScript,cb)=>{cb()}},callback)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/ScriptParsedMgtClass.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ScriptParsedInstance:()=>ScriptParsedInstance,ScriptParsedMgtClass:()=>ScriptParsedMgtClass});var _source_map_SourceMap_class__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/source-map/SourceMap.class.js"),async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("async"),_projectFiles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/projectFiles.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js");class ScriptParsedMgtClass{cdp;scripts=[];constructor(cdp){this.cdp=cdp}parseScripts(files,cb){console.time("ScriptParsedMgtClass"),(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({listFilesProject:cb=>{(0,_projectFiles__WEBPACK_IMPORTED_MODULE_2__.getlistFilesProjects)(cb)},initFiles:(listFilesProject,cb)=>{this.iterFiles(files,cb)},checkFileInAppRoot:(initFiles,cb)=>{this.isDebugAppSameAsSelectedFile(cb)}},(err,result)=>{console.timeEnd("ScriptParsedMgtClass"),cb()})}iterFiles(files,done){(0,async__WEBPACK_IMPORTED_MODULE_1__.eachLimit)(files,10,(scriptParsed,cb)=>{var scriptParsedExtrasI,foundExistingScript=this.scripts.find(sc=>sc.script.url==scriptParsed.url);(null==foundExistingScript?((scriptParsedExtrasI=new ScriptParsedInstance(this.cdp,scriptParsed)).scriptIds.push(scriptParsed.scriptId),this.scripts.push(scriptParsedExtrasI),scriptParsedExtrasI):(foundExistingScript.script=scriptParsed,foundExistingScript.scriptIds.push(scriptParsed.scriptId),foundExistingScript)).init(cb)},err=>{done()})}isDebugAppSameAsSelectedFile(cb){let isInAppRoot=!1;this.scripts.forEach(scp=>{1<scp.filesPath?.[0]?.length&&-1!==scp.filesPath?.[0]?.indexOf(_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__.appCache.project.appRoot)&&-1==scp.filesPath?.[0].indexOf("node_modules/")&&(isInAppRoot=!0)}),1==isInAppRoot?this.cdp.scriptParsed.isDebugAppSameAsSelectedFile=!0:this.cdp.scriptParsed.isDebugAppSameAsSelectedFile=!1,cb()}getExtrasWithFilePath(filePath){let found=null;for(let i=0;i<this.scripts.length;i++)if(null!=this.scripts[i].filesPath?.find(fPath=>fPath==filePath)){found=this.scripts[i];break}return found}getExtrasWithScriptId(scriptId){return this.scripts.find(sp=>sp.script.scriptId==scriptId||-1!==sp.scriptIds?.indexOf(scriptId))}}class ScriptParsedInstance{cdp;script;hasBundle=!1;isTranspiled=!1;sourceMap;filesPath=[];scriptIds=[];constructor(cdp,script){this.cdp=cdp,this.script=script}init(done){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({initSourceMap:cb=>{this.sourceMap=new _source_map_SourceMap_class__WEBPACK_IMPORTED_MODULE_0__.SourceMapClass(this.cdp,this),this.sourceMap.init(this.script.scriptId,cb)},sourceMapClean:(initSourceMap,cb)=>{0==this.hasBundle&&0==this.isTranspiled&&delete this.sourceMap,cb()}},(err,result)=>{console.error(err),done()})}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/projectFiles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{clearListFilesProject:()=>function(){mfiles=[]},findFilePathInAppRoot:()=>function(pathToFind){var pathFound=mfiles?.find(f=>-1!==f.indexOf(pathToFind));return null==pathFound&&pathToFind.startsWith("node_modules/")?_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appCache.project.packageJsonFolder+pathToFind:pathFound},getMFiles:()=>function(){return mfiles},getlistFilesProjects:()=>function(cb){listFilesInAppRoot(_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appCache.project?.appRoot,(err,filess)=>{mfiles=filess,cb(err)})},listFilesInAppRoot:()=>listFilesInAppRoot});var __webpack_exports__=__webpack_require__("glob"),glob__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/helpers/filesExtensions.js");function listFilesInAppRoot(appRoot,cb){var pattern="**/**"+(0,_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_2__.allowedExtensionsPatternWithMap)();glob__WEBPACK_IMPORTED_MODULE_0___default()(pattern,{cwd:appRoot,absolute:!0,ignore:["**/node_modules/**","node_modules/**"]}).then(found=>{cb(null,found)}).catch(err=>{console.error(err),cb(err)})}let mfiles=[]},"./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/scriptParsed.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ScriptParsed:()=>ScriptParsed});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash"),_handlers_event_service_loading__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/event-service/loading.js"),_tracer_handle_status_change_tracer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/tracer/handle-status-change-tracer.js"),_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/tracer/tab-session/get-tab-session.js"),_common_logger__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/common/logger.js");class ScriptParsed{cdp;files=[];isDebugAppSameAsSelectedFile=!1;allScriptParsed=null;newTab=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.throttle)(()=>{(0,_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_3__.createNewTabIfActiveIsNotEmpty)(()=>{})},5e3,{trailing:!1});constructor(cdp){this.cdp=cdp,this.isDebugAppSameAsSelectedFile=!1}initScriptParsed(){(0,_handlers_event_service_loading__WEBPACK_IMPORTED_MODULE_1__.loadingServiceIsLoading)(),console.time("onScriptParsed"),this.files=[],this.cdp.client.Debugger.on("scriptParsed",this.onScriptParsed.bind(this))}onScriptParsed(params){this.canAddFile(params)&&(this.isNewFileLazyLoaded(params)?this.parseNewFileLazyLoaded(params):(this.cdp.flagsAndEvents.scriptParsed.next(!1),this.calculateMaxLoadTime(),this.newTab(),this.onNewFileParsed(params),this.initDebounce(params.url),this.allScriptParsed()))}maxLoadTime=0;lastLoadTime=0;calculateMaxLoadTime(){var loadTime,timeMs=(new Date).getTime();0!=this.lastLoadTime&&(loadTime=timeMs-this.lastLoadTime)>this.maxLoadTime&&(this.maxLoadTime=loadTime),this.lastLoadTime=timeMs}saveMaxDebounceTime(){-1==this.cdp.persistantVars.maxDebounceTime?this.cdp.persistantVars.maxDebounceTime=0:0<=this.cdp.persistantVars.maxDebounceTime&&(this.cdp.persistantVars.maxDebounceTime=this.maxLoadTime+500,_common_logger__WEBPACK_IMPORTED_MODULE_4__.default.info("save Max Debounce Time "+this.cdp.persistantVars.maxDebounceTime))}initDebounce(url){null==this.allScriptParsed&&(url=this.getDurationDebounce(url),_common_logger__WEBPACK_IMPORTED_MODULE_4__.default.info("duration  debounce "+url),this.allScriptParsed=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.debounce)(()=>{this.allScriptParsedFn()},url,{leading:!1,trailing:!0}))}allScriptParsedFn(){_common_logger__WEBPACK_IMPORTED_MODULE_4__.default.info("All Scripts Parsed"),this.saveMaxDebounceTime(),this.cdp.flagsAndEvents.allScriptParsedTime=(new Date).getTime(),this.cdp.flagsAndEvents.allScriptParsed.next(!0),this.cdp.opts.name,this.files.length,this.cdp.flagsAndEvents.pauseCDP.next(!0),console.timeEnd("onScriptParsed"),this.afterScriptParsed(),this.allScriptParsed=null}getDurationDebounce(url){return url.startsWith("http://")||url.startsWith("https://")?10:100<=this.cdp.persistantVars.maxDebounceTime?this.cdp.persistantVars.maxDebounceTime:1500}isNewFileLazyLoaded(params){let newFileLazyLoaded=!1;return 1<=this.cdp.scriptParsedMgt.scripts?.length&&(newFileLazyLoaded=!0,this.cdp.scriptParsedMgt.scripts.forEach(scp=>{scp.script.url==params.url&&(newFileLazyLoaded=!1)})),newFileLazyLoaded}parseNewFileLazyLoaded(params){this.cdp.scriptParsedMgt.parseScripts([{scriptId:params.scriptId,url:params.url}],()=>{})}onNewFileParsed(params){this.files.push({scriptId:params.scriptId,url:params.url})}canAddFile({url,scriptId}){return!!(null==this.files.find(f=>f.scriptId==scriptId)&&1<=url?.length&&(url.startsWith("file:///")||url.startsWith("http://")||url.startsWith("https://"))&&-1==url.indexOf("node_modules")&&-1==url.indexOf(".min")&&-1==url.indexOf(".css"))}afterScriptParsed(){this.cdp.isTargetDebugApp()?this.afterScriptParsedDebugApp():this.afterScriptParsedFinished()}afterScriptParsedDebugApp(){var filesTmp=JSON.parse(JSON.stringify(this.files));this.files=[],this.cdp.scriptParsedMgt.parseScripts(filesTmp,()=>{this.afterScriptParsedFinished()})}afterScriptParsedFinished(){_common_logger__WEBPACK_IMPORTED_MODULE_4__.default.info("After Scripts Parsed Finished "+this.cdp.scriptParsedMgt.scripts.length),this.cdp.flagsAndEvents.scriptParsed.next(!0),this.cdp.checkTargetDebugAppStatus(),(0,_handlers_event_service_loading__WEBPACK_IMPORTED_MODULE_1__.loadingServiceIsLoaded)(),this.isDebugAppSameAsSelectedFile&&this.cdp.cdpReady.next(!0),this.cdp.isTargetDebugApp()&&(0,_tracer_handle_status_change_tracer__WEBPACK_IMPORTED_MODULE_2__.startTracer)(()=>{this.cdp.cdpConsole.queue.length(),this.cdp.flagsAndEvents.pauseCDP.getValue(),1<=this.cdp.cdpConsole.queue.length()||this.cdp.flagsAndEvents.pauseCDP.next(!1)})}scriptFailed(){this.cdp.client.Debugger.on("scriptFailedToParse",params=>{})}getAllFilesPaths(){let allFilesPath=[];return this.files.forEach(fil=>{1<=fil.filesFullPath?.length?allFilesPath=allFilesPath.concat(fil.filesFullPath):null!=fil.path&&allFilesPath.push(fil.path)}),allFilesPath}findFilePathWithPartialFilePath(filePathToFind){let found=null;for(let i=0;i<this.files.length;i++){var sc=this.files[i];if((sc.path==filePathToFind||sc?.sourcePath==filePathToFind||sc.url?.endsWith(filePathToFind)||sc.path.endsWith(filePathToFind))&&(found=sc.path),1<=sc.filesOriginalUrl?.length)for(let j=0;j<sc.filesOriginalUrl.length;j++)(sc.filesOriginalUrl[j]?.endsWith(filePathToFind)||sc.filesFullPath[j]?.endsWith(filePathToFind))&&(found=sc.filesFullPath[j])}return found}clear(){}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/source-map/SourceMap.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SourceMapClass:()=>SourceMapClass});var source_map__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("source-map"),__webpack_exports__=__webpack_require__("convert-source-map"),convert_source_map__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async"),fs_extra__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("fs-extra"),__webpack_exports__=__webpack_require__("axios"),axios__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(__webpack_exports__),_cdp_class_scripts_mgt_projectFiles__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/projectFiles.js");class SourceMapClass{cdp;sp;sourceMapConsumer;splitElmBase64="";splitRefbase64=["//# sourceMappingURL=data:application/json;base64,","//# sourceMappingURL=data:application/json;charset=utf-8;base64,"];sourceFile;constructor(cdp,sp){this.cdp=cdp,this.sp=sp}init(scriptId,done){(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({check:cb=>{null!=this.cdp.client?.Debugger?cb():cb("CDP connection lost")},getScriptSource:(check,cb)=>{this.cdp.scriptMgt.getScriptSource(scriptId,cb)},hasSourceMap:(getScriptSource,cb)=>{getScriptSource?.includes("//# sourceMappingURL")?cb(null,this.sp.isTranspiled=!0):(this.makeFilePathSingleFile(),cb("no source map",!1))},initSourceMap:(hasSourceMap,getScriptSource,cb)=>{this.initSourceMapConsumerFromScript(getScriptSource,cb)}},(err,result)=>{"no source map"==err?done():(console.error(err),done(err))})}initSourceMapConsumerFromScript(getScriptSource,cb){-1!==getScriptSource.indexOf(this.splitRefbase64[0])?(this.splitElmBase64=this.splitRefbase64[0],this.consumerFromBase64(getScriptSource,cb)):-1!==getScriptSource.indexOf(this.splitRefbase64[1])?(this.splitElmBase64=this.splitRefbase64[1],this.consumerFromBase64(getScriptSource,cb)):this.consumerFromPath(getScriptSource,cb)}consumerFromBase64(getScriptSource,cb){getScriptSource=getScriptSource.split(this.splitElmBase64)[1],getScriptSource=this.splitElmBase64+getScriptSource;try{var modified=convert_source_map__WEBPACK_IMPORTED_MODULE_1___default().fromComment(getScriptSource).toJSON();this.sourceFile=JSON.parse(modified),this.createSourceMapFromRawSourceMap(this.sourceFile,cb)}catch(e){cb("error convert sourcemap fromComment")}}consumerFromPath(getScriptSource,cb){var pathSourceMap,getScriptSource=getScriptSource.split("//# sourceMappingURL=")[1];null!=getScriptSource?(pathSourceMap=this.makePathSourceMapWithPartial(this.sp.script.url,getScriptSource),this.sp.script.url.startsWith("http")?this.readSourceMapFromUrl(pathSourceMap,cb):this.sp.script.url.startsWith("file//")?this.readSourceMapFromPath(pathSourceMap,cb):-1==getScriptSource.indexOf("/")?(getScriptSource=pathSourceMap.replace("file:///","/"),this.readSourceMapFromPath(getScriptSource,cb)):cb("sourceMappingURL does not start with http or file//")):cb("smFileName null")}readSourceMapFromUrl(urlSourceMap,cb){axios__WEBPACK_IMPORTED_MODULE_4___default().get(urlSourceMap).then(response=>{this.sourceFile=response.data,this.createSourceMapFromRawSourceMap(this.sourceFile,cb)},err=>{console.error("err readSourceMapFromUrl"),cb("path of source map from url invalid")})}readSourceMapFromPath(smPath,cb){(0,fs_extra__WEBPACK_IMPORTED_MODULE_3__.readJson)(smPath,(err,sourceMapFile)=>{if(err)return console.error(err),cb("path of source map invalid");this.sourceFile=sourceMapFile,this.createSourceMapFromRawSourceMap(this.sourceFile,cb)})}makePathSourceMapWithPartial(partialPath,sourceMapFileName){return partialPath.split("/").slice(0,-1).join("/")+"/"+sourceMapFileName}createSourceMapFromRawSourceMap(rawSourceMap,cb){try{new source_map__WEBPACK_IMPORTED_MODULE_0__.SourceMapConsumer(rawSourceMap).then(smConsumer=>{this.sourceMapConsumer=smConsumer,this.makeFilePath(cb)})}catch(e){console.error(e),this.sourceFile=null,cb(e)}}makeFilePath(cb){1<this.sourceMapConsumer.sources.length?(this.sp.hasBundle=!0,this.sourceMapConsumer.sources.forEach(source=>{this.sp.filesPath.push(this.getFilePathFromSource(source))})):this.makeFilePathSingleFile(),this.sourceFile=null,cb()}makeFilePathSingleFile(){var source;1<=this.sourceMapConsumer?.sources?.[0]?.length?(source=this.sourceMapConsumer.sources[0],this.sp.filesPath=[this.getFilePathFromSource(source)]):(source=this.makePartialPathWithOriginalUrl(),source=(0,_cdp_class_scripts_mgt_projectFiles__WEBPACK_IMPORTED_MODULE_5__.findFilePathInAppRoot)(source),this.sp.filesPath=[source])}makePartialPathWithOriginalUrl(){let partialFilePath="";return this.sp.script.url.startsWith("http")?partialFilePath=this.makePartialFilePathWithUrl():this.sp.script.url.startsWith("file:///")&&(partialFilePath=this.sp.script.url.replace("file://","")),partialFilePath=partialFilePath.split("?")[0]}makePartialFilePathWithUrl(){var myURL=new URL(this.sp.script.url);return this.sp.script.url.replace(myURL.origin,"")}replaceBpPosition(bpParams,selectedfile){selectedfile={line:bpParams.lineNumber,column:bpParams.columnNumber-1,source:this.getSourceWithFilePath(selectedfile.filePath)},selectedfile?.line<0&&(selectedfile.line=0),selectedfile?.column<0&&(selectedfile.column=0),selectedfile=this.sourceMapConsumer.generatedPositionFor(selectedfile);null!=selectedfile?.line&&(bpParams.lineNumber=selectedfile.line,bpParams.columnNumber=selectedfile.column+1),bpParams.url=this.sp.script.url}getSourceWithFilePath(filePath){return this.sp.hasBundle?this.findSourceInSourceMapWithFilePath(filePath):1==this.sourceMapConsumer.sources.length?this.sourceMapConsumer.sources[0]:this.sourceMapConsumer.file}findSourceInSourceMapWithFilePath(filePath){let sourceFile;for(let i=0;i<this.sourceMapConsumer.sources.length;i++)if(this.getFilePathFromSource(this.sourceMapConsumer.sources[i])==filePath){sourceFile=this.sourceMapConsumer.sources[i];break}return sourceFile}getOriginalPosition(loc){var bundlePosition;return null!=this.sourceMapConsumer?((bundlePosition={line:loc.line,column:loc.column}).line<0&&(bundlePosition.line=1),bundlePosition.column<0&&(bundlePosition.column=1),null==(bundlePosition=this.sourceMapConsumer.originalPositionFor(bundlePosition)).column&&null==bundlePosition.line&&(bundlePosition.column=loc.column,bundlePosition.line=loc.line),2<bundlePosition.source?.length&&(bundlePosition.source=this.getFilePathFromSource(bundlePosition.source)),null==bundlePosition.source&&(bundlePosition.source=this.sp.script.url.replaceAll("file://","").replace("http://","").replace("https://","")),bundlePosition):loc}getFilePathFromSource(source){let partialFilePath=source.replace(this.sourceMapConsumer.sourceRoot,"");return partialFilePath=partialFilePath.replace(/\.\.\//g,""),(0,_cdp_class_scripts_mgt_projectFiles__WEBPACK_IMPORTED_MODULE_5__.findFilePathInAppRoot)(partialFilePath)}}},"./dist/tsbuild/app/services/chrome-devtools-protocol/updateTargetDebugPort.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{updateTargetDebugPort:()=>function(port,done){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({getConfigFile:cb=>{var conf=(0,_common_config_load_loadConfigFromFile__WEBPACK_IMPORTED_MODULE_1__.loadConfigFromFile)(_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appStatus.rootPath);cb(null,null!=conf?conf:{})},overrideKey:(getConfigFile,cb)=>{(0,lodash__WEBPACK_IMPORTED_MODULE_2__.set)(getConfigFile,"targetApp.debugPort",port),cb(null,getConfigFile)},saveConfig:(overrideKey,cb)=>{nconf__WEBPACK_IMPORTED_MODULE_6___default().set("targetApp:debugPort",port),(0,_common_config_save_saveConfigToFile__WEBPACK_IMPORTED_MODULE_3__.saveConfigToFile)(overrideKey,cb)},reloadTargetCDP:(saveConfig,cb)=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__.getTargetCDP)()?.close(),setTimeout(()=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__.initTargetCDP)()},300),setTimeout(()=>{cb()},600)}},(err,data)=>{done(err)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_common_config_load_loadConfigFromFile__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/common/config/load/loadConfigFromFile.js"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lodash"),_common_config_save_saveConfigToFile__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/common/config/save/saveConfigToFile.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(__webpack_exports__)},"./dist/tsbuild/app/services/file-generator/generate/generate-imports/assignDataRunToImportTree.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{assignDataRunToImportTree:()=>function(fiImportWithDataRun,cb){const fiImport=JSON.parse(JSON.stringify(fiImportWithDataRun));fiImport.varName,fiImport.usage?.forEach(fiImportUsage=>{var toSet,argumentCallbackIndex;1!=fiImportUsage.dataRun?.provisioning&&(null!=fiImportUsage.dataRun||function(fiImportUsage){let has=!1;return fiImportUsage.arguments?.filter(_parser_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_1__.filterFunctionCallback).forEach(arg=>{null!=arg.dataRun&&(has=!0)}),has}(fiImportUsage)?(fiImport.varName,fiImportUsage.text,fiImportUsage.treePath=getUpdatedTreePath(fiImport.tree,fiImportUsage),"new-class"!=fiImportUsage.parentElm&&("callback"==fiImportUsage.returnType?(toSet={type:"callback",callback:fiImportUsage.dataRun},argumentCallbackIndex=fiImportUsage.arguments.findIndex(argu=>-1!==_parser_ast_parser_langs_grammar_config__WEBPACK_IMPORTED_MODULE_2__.callbackNames.indexOf(argu.name)),argumentCallbackIndex=fiImportUsage.treePath+".params.["+argumentCallbackIndex+"]",null!=fiImport?.tree&&(0,lodash__WEBPACK_IMPORTED_MODULE_0__.set)(fiImport.tree,argumentCallbackIndex,toSet)):"inline-set"!=fiImportUsage.returnType&&("inline-get"==fiImportUsage.returnType?(argumentCallbackIndex=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(fiImportUsage.dataRun,fiImportUsage.bpLoc.varPath),(0,lodash__WEBPACK_IMPORTED_MODULE_0__.set)(fiImport.tree,fiImportUsage.treePath,argumentCallbackIndex)):"inline-callback"==fiImportUsage.returnType&&(fiImportUsage.treePath,null!=fiImport?.tree)&&fiImportUsage.arguments.filter(_parser_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_1__.filterFunctionCallback).forEach(fiUsageArg=>{if(null!=fiUsageArg?.dataRun){const indexOfArg=function(astPath){astPath=astPath.split("arguments["),astPath=astPath.pop(),astPath=astPath.replace("]","");return parseInt(astPath)}(fiUsageArg.astPath);"string"!=typeof fiUsageArg.bpLoc.varPath&&fiUsageArg.bpLoc.varPath.forEach((cbName,indexOfData)=>{indexOfData=fiImportUsage.treePath+".params["+indexOfArg+"].callback["+indexOfData+"]";(0,lodash__WEBPACK_IMPORTED_MODULE_0__.set)(fiImport.tree,indexOfData,fiUsageArg.dataRun[cbName])})}})))):fiImportUsage.varName)}),cb(null,fiImport)},getUpdatedTreePath:()=>getUpdatedTreePath});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash"),_parser_ast_parser_langs_grammar_config__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/langs/grammar-config.js"),_parser_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-import-usage.js");function getUpdatedTreePath(tree,fiImportUsage){var found=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(tree,fiImportUsage.treePath);if(null==found||Array.isArray(found)){var pathArray=fiImportUsage.treePath.split(".");let currentPath=pathArray[0];for(let currentIndexPath=1;currentIndexPath<pathArray.length;currentIndexPath++){var pathNow=currentPath+"."+pathArray[currentIndexPath],pathNow=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(tree,pathNow);Array.isArray(pathNow)?(pathNow=pathNow.findIndex(foundInn=>foundInn?.params.length==fiImportUsage?.arguments?.length),currentPath+="."+pathArray[currentIndexPath]+"["+pathNow+"]"):currentPath+="."+pathArray[currentIndexPath]}return currentPath,currentPath}return fiImportUsage.treePath}},"./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateCodeFromIntermediateTree/generateCodeFromTree.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{generateCodeFromTree:()=>function(treee,esVersion){var astStart=(0,_handlers_babel_ast_empty_ast__WEBPACK_IMPORTED_MODULE_8__.getEmptyAst)(),treee=createAstFromTreeEs6(treee,astStart,"program",esVersion);return astToCodeClean(treee)},generateCodeFromTreeJson:()=>function(treee){var astStart=(0,_handlers_babel_ast_empty_const_data_ast__WEBPACK_IMPORTED_MODULE_9__.getEmptyConstData)(),treee=createAstFromTreeEs6(treee,astStart,"program.body[0].declarations[0].init","json");return astToCodeClean(treee)},getParentPath:()=>getParentPath});var __webpack_exports__=__webpack_require__("deepdash/eachDeep"),deepdash_eachDeep__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_babel_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("@babel/core"),_replacement_nodes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateCodeFromIntermediateTree/replacement-nodes.js"),_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/babel/astToCode.js"),__webpack_exports__=__webpack_require__("js-beautify"),js_beautify__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(__webpack_exports__),_handlers_babel_ast_empty_ast__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/handlers/babel/ast/empty-ast.js"),_global__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/global.js"),_handlers_babel_ast_empty_const_data_ast__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/handlers/babel/ast/empty-const-data-ast.js"),_babel_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("@babel/types"),_nodeForArray__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateCodeFromIntermediateTree/nodeForArray.js");function getParentPath(node,depth=0){return null!=node.value?.astPath?{node:node,depth:depth}:null!=node.parent?getParentPath(node.parent,++depth):void 0}function createAstFromTreeEs6(treee,ast,defaultPathToFind,esVersion){return deepdash_eachDeep__WEBPACK_IMPORTED_MODULE_0___default()(treee,function(value,key,parentValue,context){var nbInstances=(0,_global__WEBPACK_IMPORTED_MODULE_5__.countInstances)(context.path,"."),lastItemOfPath=String(context.path).split(".").pop(),isObjAnArray=parentValue[lastItemOfPath];"[object Array]"===Object.prototype.toString.call(isObjAnArray)&&"function"==isObjAnArray[0]?.type?function(parentValue,context,nbInstances,ast,defaultPathToFind,lastItemOfPath,value,key){parentValue.isAnArray=!0,2==nbInstances?(0,_nodeForArray__WEBPACK_IMPORTED_MODULE_7__.addFirstLevelFunctionArrayBlock)(ast,defaultPathToFind,context,lastItemOfPath):2<nbInstances&&(0,_nodeForArray__WEBPACK_IMPORTED_MODULE_7__.addSecondLevelFunctionArrayBlock)(parentValue,context,ast,value,key)}(parentValue,context,nbInstances,ast,defaultPathToFind,lastItemOfPath,value,key):String(context.path)?.endsWith("type")&&-1==String(context.path).indexOf("ast")&&!context.path.includes(".callback")&&"callback"!=parentValue.type&&"number"!=parentValue.type&&"string"!=parentValue.type&&function(parentValue,ctx,nbInstances,ast,defaultPathToFind,esVersion){ctx.path,parentValue.type,"json"!==esVersion&&-1!==["function","object"].indexOf(parentValue.type)&&1==nbInstances?(0,_nodeForArray__WEBPACK_IMPORTED_MODULE_7__.initExportBlock)(ast,ctx,esVersion):(nbInstances<=3&&(parentValue.type+="FirstLevel"),nbInstances=(0,_replacement_nodes__WEBPACK_IMPORTED_MODULE_2__.getNodeForType)(parentValue,ctx,esVersion),null!=(esVersion=getParentPath(ctx.parent))?.node&&null!=esVersion.node.value.astPathItem?parentValue.astPath=esVersion.node.value.astPathBlock+esVersion.node.value.astPathItem:parentValue.astPath=defaultPathToFind,parentValue.astPathItem=nbInstances.path,function(ast,parentValue,parentNode,blockForType){parentValue.astPath,(0,_babel_core__WEBPACK_IMPORTED_MODULE_1__.traverse)(ast,{enter(path){if(path.getPathLocation()===parentValue.astPath){var{key:key1,value:value1,keyNext}=blockForType,key1=null!=parentNode?.node?.value?.keyContainer?parentNode.node.value.keyContainer:key1;if(null!=path.node.body&&null!=path.node.body.body){key1=path.get("body.body.0.argument").pushContainer(key1,value1);appendValues(parentValue,keyNext,key1)}else if(null!=path.node.body){const vals=path.pushContainer("body",value1);appendValues(parentValue,keyNext,vals)}else if(null!=path.node.properties){const vals=path.pushContainer("properties",value1);appendValues(parentValue,keyNext,vals)}else if("NullLiteral"==path.node.type){const vals=path.replaceWith(_babel_types__WEBPACK_IMPORTED_MODULE_6__.objectExpression([value1]));appendValues(parentValue,keyNext,vals)}else console.error("CANNOT ADD TO AST");path.stop()}}})}(ast,parentValue,esVersion,nbInstances))}(parentValue,context,nbInstances,ast,defaultPathToFind,esVersion)},{callbackAfterIterate:!1,checkCircular:!1,childrenPath:void 0,includeRoot:!1,leavesOnly:!1,pathFormat:"string",rootIsChildren:!0}),ast}function appendValues(parentValue,keyNext,vals){parentValue.keyContainer=keyNext,parentValue.astPathBlock=vals[0].getPathLocation()}function astToCodeClean(ast){ast=(0,_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_3__.astToCode)(ast);return ast.code=js_beautify__WEBPACK_IMPORTED_MODULE_4___default()(ast.code),ast}},"./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateCodeFromIntermediateTree/nodeForArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{addBlockIsInsideArray:()=>function(obj,ctx){let memberExpressionCb;obj.params?.forEach((param,index)=>{"callback"==param?.type&&(memberExpressionCb=_babel_types__WEBPACK_IMPORTED_MODULE_0__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier("arguments"),_babel_types__WEBPACK_IMPORTED_MODULE_0__.numericLiteral(index),!0))});var expressionBody=(0,_replacement_nodes__WEBPACK_IMPORTED_MODULE_3__.getFunctionProps)(obj,memberExpressionCb)["expressionBody"],obj=_babel_types__WEBPACK_IMPORTED_MODULE_0__.ifStatement(_babel_types__WEBPACK_IMPORTED_MODULE_0__.binaryExpression("==",_babel_types__WEBPACK_IMPORTED_MODULE_0__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier("arguments"),_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier("length")),_babel_types__WEBPACK_IMPORTED_MODULE_0__.numericLiteral(obj.params.length)),expressionBody);return{path:".consequent.body[0].argument",keyNext:"body",key:"body",value:obj}},addBlockIsInsideArrayFirstLevel:()=>function(obj,ctx){let memberExpressionCb;obj.params?.forEach((param,index)=>{"callback"==param?.type&&(memberExpressionCb=_babel_types__WEBPACK_IMPORTED_MODULE_0__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier("arguments"),_babel_types__WEBPACK_IMPORTED_MODULE_0__.numericLiteral(index),!0))});var expressionBody=(0,_replacement_nodes__WEBPACK_IMPORTED_MODULE_3__.getFunctionProps)(obj,memberExpressionCb)["expressionBody"],obj=_babel_types__WEBPACK_IMPORTED_MODULE_0__.ifStatement(_babel_types__WEBPACK_IMPORTED_MODULE_0__.binaryExpression("==",_babel_types__WEBPACK_IMPORTED_MODULE_0__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier("arguments"),_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier("length")),_babel_types__WEBPACK_IMPORTED_MODULE_0__.numericLiteral(obj.params.length)),expressionBody);return{path:".consequent.body[0].argument",keyNext:"properties",key:"properties",value:obj}},addFirstLevelFunctionArrayBlock:()=>function(ast,defaultPathToFind,ctx,functionName){functionName=_babel_types__WEBPACK_IMPORTED_MODULE_0__.expressionStatement(_babel_types__WEBPACK_IMPORTED_MODULE_0__.assignmentExpression("=",_babel_types__WEBPACK_IMPORTED_MODULE_0__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier(String(ctx.parent.parent.key)),_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier(functionName)),_babel_types__WEBPACK_IMPORTED_MODULE_0__.functionExpression(null,[],_babel_types__WEBPACK_IMPORTED_MODULE_0__.blockStatement([])))),ast.program.body.push(functionName),functionName=ast.program.body.length-1;ctx.obj.astPathItem=".expression.right.body",ctx.obj.astPathBlock="program.body["+functionName+"]",ctx.obj.astPath=ctx.obj.astPathBlock+ctx.obj.astPathItem},addSecondLevelFunctionArrayBlock:()=>function(parentValue,ctx,ast,value,key){ctx=(0,_generateCodeFromTree__WEBPACK_IMPORTED_MODULE_1__.getParentPath)(ctx.parent).node.value,key=_babel_types__WEBPACK_IMPORTED_MODULE_0__.objectExpression([_babel_types__WEBPACK_IMPORTED_MODULE_0__.objectProperty(_babel_types__WEBPACK_IMPORTED_MODULE_0__.stringLiteral(key),_babel_types__WEBPACK_IMPORTED_MODULE_0__.functionExpression(null,[],_babel_types__WEBPACK_IMPORTED_MODULE_0__.blockStatement([])))]),ctx=ctx.astPathBlock+ctx.astPathItem+".body.body[0].argument";(0,lodash__WEBPACK_IMPORTED_MODULE_2__.set)(ast,ctx,key),value.astPathBlock=ctx,value.astPathItem=".properties[0].value.body",value.astPath=value.astPathBlock+value.astPathItem},initExportBlock:()=>function(ast,ctx,esVersion){{var exportBlock;"es6"==esVersion?(exportBlock=_babel_types__WEBPACK_IMPORTED_MODULE_0__.exportNamedDeclaration(_babel_types__WEBPACK_IMPORTED_MODULE_0__.functionDeclaration(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier(String(ctx.parent.key)),[],_babel_types__WEBPACK_IMPORTED_MODULE_0__.blockStatement([]))),ast.program.body.push(exportBlock)):"es5"==esVersion&&(esVersion=_babel_types__WEBPACK_IMPORTED_MODULE_0__.functionDeclaration(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier(String(ctx.parent.key)),[],_babel_types__WEBPACK_IMPORTED_MODULE_0__.blockStatement([])),ast.program.body.push(esVersion),esVersion=_babel_types__WEBPACK_IMPORTED_MODULE_0__.expressionStatement(_babel_types__WEBPACK_IMPORTED_MODULE_0__.assignmentExpression("=",_babel_types__WEBPACK_IMPORTED_MODULE_0__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier("module"),_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier("exports")),_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier(String(ctx.parent.key)))),ast.program.body.push(esVersion))}delete ctx.obj.astPathBlock,delete ctx.obj.astPathItem,delete ctx.obj.astPath}});var _babel_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@babel/types"),_generateCodeFromTree__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateCodeFromIntermediateTree/generateCodeFromTree.js"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lodash"),_replacement_nodes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateCodeFromIntermediateTree/replacement-nodes.js")},"./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateCodeFromIntermediateTree/replacement-nodes.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getFunctionProps:()=>getFunctionProps,getNodeForType:()=>function(obj,context,esVersion){obj.type;try{var objTyp;return"json"==esVersion&&obj.type.endsWith("FirstLevel")?(objTyp=obj.type.replace("FirstLevel",""),returnTypes[objTyp](obj,context)):1==context?.parent?.parent?.parent?.value?.isAnArray&&"functionFirstLevel"==obj.type?(0,_nodeForArray__WEBPACK_IMPORTED_MODULE_2__.addBlockIsInsideArrayFirstLevel)(obj,context):1==context?.parent?.parent?.parent?.value?.isAnArray&&"functionFirstLevel"!==obj.type?(0,_nodeForArray__WEBPACK_IMPORTED_MODULE_2__.addBlockIsInsideArray)(obj,context):"es5"!=esVersion&&"es6"!=esVersion||"functionFirstLevel"!=obj.type&&"objectFirstLevel"!=obj.type?("classFirstLevel"==obj.type&&clearParentAstPath(context.parent),returnTypes[obj.type](obj,context)):function(obj,ctx){ctx.path;obj=returnTypes[obj.type](obj,ctx).value,obj=_babel_types__WEBPACK_IMPORTED_MODULE_0__.expressionStatement(_babel_types__WEBPACK_IMPORTED_MODULE_0__.assignmentExpression("=",_babel_types__WEBPACK_IMPORTED_MODULE_0__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier(String(ctx.parent.parent.parent.key)),_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier(String(ctx.parent.key))),obj));return clearParentAstPath(ctx.parent),{path:".expression.right",key:"body",keyNext:"properties",value:obj}}(obj,context)}catch(e){console.error(e)}},returnTypes:()=>returnTypes});var _babel_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@babel/types"),_babel_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("@babel/core"),_nodeForArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateCodeFromIntermediateTree/nodeForArray.js");const varNamesToReplace=["new","import","const","let"],nameToPrepend="RENAMED";function getFunctionProps(obj,callExpressionReplace){let params=[],hasCallbackParameter=-1;obj.params&&(params=obj.params?.map((param,index)=>"string"==typeof param?(-1!==varNamesToReplace.indexOf(param)&&(param=nameToPrepend+param),_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier(param)||[]):(hasCallbackParameter=index,_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier("cb"))));let expressionBody;if(null!=obj.ast)expressionBody=_babel_types__WEBPACK_IMPORTED_MODULE_0__.blockStatement([obj.ast]);else if(-1==hasCallbackParameter)expressionBody=_babel_types__WEBPACK_IMPORTED_MODULE_0__.blockStatement([_babel_types__WEBPACK_IMPORTED_MODULE_0__.returnStatement(_babel_types__WEBPACK_IMPORTED_MODULE_0__.objectExpression([]))]);else{obj=obj.params[hasCallbackParameter];let callExpression=_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier("cb");null!=callExpressionReplace&&(callExpression=callExpressionReplace),obj.callback,expressionBody=_babel_types__WEBPACK_IMPORTED_MODULE_0__.blockStatement([_babel_types__WEBPACK_IMPORTED_MODULE_0__.expressionStatement(_babel_types__WEBPACK_IMPORTED_MODULE_0__.callExpression(callExpression,obj?.callback?.map(cb=>{return void 0===cb&&null==cb?_babel_types__WEBPACK_IMPORTED_MODULE_0__.nullLiteral():(cb="const cb = "+JSON.stringify(cb)+";",_babel_core__WEBPACK_IMPORTED_MODULE_1__.parseSync(cb,{filename:"file.js"}).program.body[0].declarations[0].init)})))])}return{params:params,expressionBody:expressionBody}}const returnTypes={object:(obj,ctx)=>({path:".value",keyNext:"properties",key:"properties",value:_babel_types__WEBPACK_IMPORTED_MODULE_0__.objectProperty(_babel_types__WEBPACK_IMPORTED_MODULE_0__.stringLiteral(String(ctx.parent.key)),_babel_types__WEBPACK_IMPORTED_MODULE_0__.objectExpression([]))}),objectFirstLevel:(obj,ctx)=>({path:".properties",key:"body",keyNext:"properties",value:_babel_types__WEBPACK_IMPORTED_MODULE_0__.objectExpression([])}),function:(obj,ctx)=>{var{params:obj,expressionBody}=getFunctionProps(obj);return{path:".value.body.body[0].argument",key:"properties",keyNext:"properties",value:_babel_types__WEBPACK_IMPORTED_MODULE_0__.objectProperty(_babel_types__WEBPACK_IMPORTED_MODULE_0__.stringLiteral(String(ctx.parent.key)),_babel_types__WEBPACK_IMPORTED_MODULE_0__.functionExpression(null,obj,expressionBody))}},functionFirstLevel:(obj,ctx)=>{var{params:obj,expressionBody}=getFunctionProps(obj);return{path:".body.body[0].argument",key:"properties",keyNext:"properties",value:_babel_types__WEBPACK_IMPORTED_MODULE_0__.functionExpression(null,obj,expressionBody)}},identifier:(obj,ctx)=>({path:".value",keyNext:"properties",key:"properties",value:_babel_types__WEBPACK_IMPORTED_MODULE_0__.objectProperty(_babel_types__WEBPACK_IMPORTED_MODULE_0__.stringLiteral(String(ctx.parent.key)),_babel_types__WEBPACK_IMPORTED_MODULE_0__.nullLiteral())}),identifierFirstLevel:(obj,ctx)=>({path:".value",keyNext:"properties",key:"body",value:_babel_types__WEBPACK_IMPORTED_MODULE_0__.exportNamedDeclaration(_babel_types__WEBPACK_IMPORTED_MODULE_0__.variableDeclaration("const",[_babel_types__WEBPACK_IMPORTED_MODULE_0__.variableDeclarator(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier(String(ctx.parent.key)),_babel_types__WEBPACK_IMPORTED_MODULE_0__.nullLiteral())]))}),class:(obj,ctx)=>({path:".value",keyNext:"properties",key:"properties",value:_babel_types__WEBPACK_IMPORTED_MODULE_0__.classDeclaration(_babel_types__WEBPACK_IMPORTED_MODULE_0__.identifier(String(ctx.parent.key)),null,_babel_types__WEBPACK_IMPORTED_MODULE_0__.classBody([]))}),classFirstLevel:(obj,ctx)=>({path:".declaration.body",keyNext:"body",key:"body",value:_babel_types__WEBPACK_IMPORTED_MODULE_0__.exportNamedDeclaration(returnTypes.class(obj,ctx).value)})};function clearParentAstPath(parent){delete parent.value.astPathBlock,delete parent.value.astPathItem,delete parent.value.astPath,null!=parent?.parent&&clearParentAstPath(parent?.parent)}},"./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateImportFiles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{generateImportCode:()=>generateImportCode,generateImportFiles:()=>function(fi,targetPath,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.map)(fi.imports,(fiImport,cb)=>{!function(fi,fiImport,targetPath,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.waterfall)([cb=>{generateImportCode(fi,fiImport,cb)},(code,cb)=>{!function(fi,fiImport,targetPath,code,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({clearFolder:cb=>{fs_extra__WEBPACK_IMPORTED_MODULE_3___default().ensureDirSync(targetPath+"imports"),fs_extra__WEBPACK_IMPORTED_MODULE_3___default().emptyDir(targetPath+"imports",cb)},createImportsFile:(clearFolder,cb)=>{const path=targetPath+"imports/"+getImportFileName(fiImport.name)+"."+fi.file.fileType;fs__WEBPACK_IMPORTED_MODULE_1___default().writeFile(path,js_beautify__WEBPACK_IMPORTED_MODULE_2___default()(code),err=>{cb(err,path)})}},(err,data)=>{callback(err,data?.createImportsFile)})}(fi,fiImport,targetPath,code,cb)}],callback)}(fi,fiImport,targetPath,cb)},callback)},getImportFileName:()=>getImportFileName});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("js-beautify"),js_beautify__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("fs-extra"),fs_extra__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(__webpack_exports__),_assignDataRunToImportTree__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generate-imports/assignDataRunToImportTree.js"),_generateCodeFromIntermediateTree_generateCodeFromTree__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateCodeFromIntermediateTree/generateCodeFromTree.js");function generateImportCode(fi,fiImport,callback){fi.file.file,fiImport.name,(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({assignDataRunToImportTreeFn:cb=>{(0,_assignDataRunToImportTree__WEBPACK_IMPORTED_MODULE_4__.assignDataRunToImportTree)(fiImport,cb)},treeToAstCode:(assignDataRunToImportTreeFn,cb)=>{null!=assignDataRunToImportTreeFn?.tree?cb(null,(0,_generateCodeFromIntermediateTree_generateCodeFromTree__WEBPACK_IMPORTED_MODULE_5__.generateCodeFromTree)(assignDataRunToImportTreeFn.tree||{},fi.file.esVersion)):cb()}},(err,result)=>{err&&console.error(err),callback(err,result?.treeToAstCode?.code)})}function getImportFileName(name){return name=(name=name.replaceAll("/","-").replaceAll("..","")).startsWith(".")?name.slice(1):name}},"./dist/tsbuild/app/services/file-generator/generate/generateApp.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>function(fileInterface,targetPath,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({baseFile:cb=>{var path=(0,path__WEBPACK_IMPORTED_MODULE_3__.normalize)(_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appStatus.defaultFilesPath+"/generate-app/"+fileInterface.file.fileType+"/"+fileInterface.file.esVersion+"/default-app."+fileInterface.file.fileType);fs__WEBPACK_IMPORTED_MODULE_1___default().readFile(path,"utf8",cb)},replace:(baseFile,cb)=>{var importsPath;1<=fileInterface.imports?.length&&((importsPath=fileInterface.imports.map(fiImport=>"file"==fiImport.type?fiImport.filePath.replace(_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.project.appRoot,""):"package"==fiImport.type?fiImport.name:null)).unshift(fileInterface.file.file),baseFile=baseFile.replace("['==-importsPath-==']",JSON.stringify(importsPath))),cb(null,baseFile)},file(replace,cb){var path=targetPath+"/app."+fileInterface.file.fileType;fs__WEBPACK_IMPORTED_MODULE_1___default().writeFile(path,replace,cb)}},(err,data)=>{callback(err)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),path__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("path")},"./dist/tsbuild/app/services/file-generator/generate/generateFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>function(fileInterface,mainFunctionSelected,targetPath,cb){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({originFile:cb=>{fs__WEBPACK_IMPORTED_MODULE_2___default().readFile(fileInterface.file.filePath,"utf8",cb)},file(originFile,cb){transformFile(originFile,fileInterface,mainFunctionSelected,cb)},writeFile:(file,cb)=>{var path=targetPath+"file."+fileInterface.file.fileType;fs__WEBPACK_IMPORTED_MODULE_2___default().writeFile(path,file,cb)}},(err,data)=>{cb(err)})},transformFile:()=>transformFile,updatePathOfImportEs6:()=>updatePathOfImportEs6});var _shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/shared/interfaces/interfaces.js"),async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("async"),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/babel/recast.js"),recast__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("recast"),__webpack_exports__=__webpack_require__("path"),path__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(__webpack_exports__),_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_babel_types__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("@babel/types"),_generate_imports_generateImportFiles__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateImportFiles.js"),_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/handlers/babel/astToCode.js");function transformFile(originFile,fileInterface,mainFunctionSelected,cb){let fileComplete;try{var ast=(0,_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_3__.parseRecast)(originFile,fileInterface.file.fileType),importsToAdd={};recast__WEBPACK_IMPORTED_MODULE_4__.visit(ast,function(fileInterface,importsToAdd){var methods={visitImportDeclaration(path){!function(path,fileInterface,importsToAdd){if(2<path.value?.source?.value?.length){var specifierName=path.value.specifiers?.[0]?.local?.name;const sourceName=path.value.source.value;var fileInterface=fileInterface.imports.find(fiImport=>fiImport.name==sourceName),provisioning=[],mock=[],mapVarName=fileInterface.mapVarName;for(const keyMap in mapVarName)("mock"==mapVarName[keyMap]?mock:provisioning).push(keyMap);null!=fileInterface.varName&&null==fileInterface.varNames?replaceImportVarName(fileInterface,path,0,fileInterface.mapVarName[fileInterface.varName]):0==mock.length&&1<=provisioning.length?replaceImportVarName(fileInterface,path,0,"provisioning"):0==provisioning.length&&1<=mock.length?replaceImportVarName(fileInterface,path,0,"mock"):function(fiImport,path,provisioning,mock,importsToAdd){const sourceProv=getSourceForProvisioning(fiImport),importProvAst=_babel_types__WEBPACK_IMPORTED_MODULE_7__.importDeclaration(getSpecifiers(fiImport,provisioning,path),_babel_types__WEBPACK_IMPORTED_MODULE_7__.stringLiteral(sourceProv)),sourceMock=getSourceForMock(fiImport),importMockAst=_babel_types__WEBPACK_IMPORTED_MODULE_7__.importDeclaration(getSpecifiers(fiImport,mock,path),_babel_types__WEBPACK_IMPORTED_MODULE_7__.stringLiteral(sourceMock)),pathLoc={start:path.value.start,end:path.value.end,loc:{start:path.value.loc.start,end:path.value.loc.end}},indexPrev=(importMockAst.loc=pathLoc.loc,importMockAst.start=pathLoc.start,importMockAst.end=pathLoc.end,path.replace(importProvAst),path.parentPath.value.findIndex(path=>path==importProvAst));importsToAdd[indexPrev]=(0,_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_9__.parseBlockBabelToCode)(importMockAst,"ts")}(fileInterface,path,provisioning,mock,importsToAdd)}}(path,fileInterface,importsToAdd),this.traverse(path)},visitVariableDeclaration(path){"Program"==path.parentPath.node.type&&!function(path,fileInterface){path=path.node.declarations[0];if("require"==path?.init?.callee?.name){const originalPath=path.init.arguments[0].value;var newPath,requireMock,fiImportt=fileInterface.imports.find(fiImport=>fiImport.name==originalPath);fiImportt.type==_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_0__.ETypeFileInterfaceImport.file&&(1==fiImportt.usage[0]?.dataRun?.provisioning?(newPath=updatePathOfImportEs5(fileInterface,originalPath),path.init.arguments[0].value=newPath):(requireMock='require("./imports/'+(0,_generate_imports_generateImportFiles__WEBPACK_IMPORTED_MODULE_8__.getImportFileName)(fiImportt.name)+'")',"es6"==fileInterface.file.esVersion&&null!=path.id.name&&(path.id="{ "+path.id.name+" }"),path.init=(0,_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_3__.parseBlockCodeToNode)(requireMock)))}else if("require"==path?.init?.object?.callee?.name){const originalPath=path.init.object.arguments[0].value;var newPath,fiImportt=fileInterface.imports.find(fiImport=>fiImport.name==originalPath);fiImportt.type==_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_0__.ETypeFileInterfaceImport.file&&(1==fiImportt.usage[0]?.dataRun?.provisioning?(newPath=updatePathOfImportEs5(fileInterface,originalPath),path.init.object.arguments[0].value=newPath):(newPath='require("./imports/'+(0,_generate_imports_generateImportFiles__WEBPACK_IMPORTED_MODULE_8__.getImportFileName)(fiImportt.name)+'")',"es6"==fileInterface.file.esVersion&&null!=path.id.name&&(path.id="{ "+path.id.name+" }"),path.init=(0,_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_3__.parseBlockCodeToNode)(newPath)))}}(path,fileInterface),this.traverse(path)}};return methods}(fileInterface,importsToAdd)),!function(ast,fileInterface,mainFunctionSelected){1!=mainFunctionSelected.exported&&"ts"==fileInterface.file.fileType&&ast.program.body.push(_babel_types__WEBPACK_IMPORTED_MODULE_7__.exportNamedDeclaration(null,[_babel_types__WEBPACK_IMPORTED_MODULE_7__.exportSpecifier(_babel_types__WEBPACK_IMPORTED_MODULE_7__.identifier(mainFunctionSelected.name),_babel_types__WEBPACK_IMPORTED_MODULE_7__.identifier(mainFunctionSelected.name))]))}(ast,fileInterface,mainFunctionSelected),fileComplete=function(fileComplete,importsToAdd){var fileArr=fileComplete.split("\n");for(const importsToAddKey in importsToAdd)fileArr[importsToAddKey]+=" "+importsToAdd[importsToAddKey];return fileComplete=fileArr.join("\n")}(fileComplete=(0,_handlers_babel_recast__WEBPACK_IMPORTED_MODULE_3__.astRecastToCode)(ast),importsToAdd)}catch(e){return console.error("error transformFile"),console.error(e),cb(e)}cb(null,fileComplete)}function getSpecifiers(fiImport,arr,path){return arr.map(pro=>{var specifierPath;return-1!==fiImport.varNames.indexOf(pro)?(specifierPath=path.value.specifiers.find(spec=>spec.local.name==pro),_babel_types__WEBPACK_IMPORTED_MODULE_7__.importSpecifier(_babel_types__WEBPACK_IMPORTED_MODULE_7__.identifier(specifierPath.local.name),_babel_types__WEBPACK_IMPORTED_MODULE_7__.identifier(specifierPath.imported.name))):_babel_types__WEBPACK_IMPORTED_MODULE_7__.importDefaultSpecifier(_babel_types__WEBPACK_IMPORTED_MODULE_7__.identifier(pro))})}function replaceImportVarName(fiImport,path,specifierName,type){path.value.source.value=("mock"==type?getSourceForMock:getSourceForProvisioning)(fiImport)}function getSourceForMock(fiImport){return"./imports/"+(0,_generate_imports_generateImportFiles__WEBPACK_IMPORTED_MODULE_8__.getImportFileName)(fiImport.name)}function getSourceForProvisioning(fiImport){return fiImport.type==_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_0__.ETypeFileInterfaceImport.package?fiImport.name:updatePathOfImportEs6(fiImport.filePath)}function updatePathOfImportEs6(fileImportPath){fileImportPath=fileImportPath.replace(_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__.appCache.project.appRoot,"");return path__WEBPACK_IMPORTED_MODULE_5___default().join("../../../",fileImportPath).replace(".ts","").replace(".js","")}function updatePathOfImportEs5(fileInterface,originalPath){fileInterface=fileInterface.file.filePath.split("/"),fileInterface.pop(),fileInterface=fileInterface.join("/"),fileInterface=path__WEBPACK_IMPORTED_MODULE_5___default().join(fileInterface,originalPath),originalPath=_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__.appCache.project.appRoot;return"../../../"+fileInterface.replace(originalPath,"")}},"./dist/tsbuild/app/services/file-generator/generate/generateFileParams.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>function(fi,mainFunctionSelected,targetPath,cb){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({ast:cb=>{var ast={type:"Program",body:[]},opts={createClassInstance:!1,staticMethod:!1,esVersion:fi.file.esVersion},imports=function(mainFunctionSelected,opts){var imports=[];"es6"==opts.esVersion?("classes"==mainFunctionSelected.fileInterfacePath?.[0]&&(opts.createClassInstance=!0,1==mainFunctionSelected?.static)&&(opts.staticMethod=!0,opts.createClassInstance=!1),opts.createClassInstance&&(mainFunctionSelected=_babel_types__WEBPACK_IMPORTED_MODULE_3__.importDeclaration([_babel_types__WEBPACK_IMPORTED_MODULE_3__.importDefaultSpecifier(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("paramsConstructor"))],_babel_types__WEBPACK_IMPORTED_MODULE_3__.stringLiteral("./paramsConstructor")),imports.push(mainFunctionSelected)),opts=_babel_types__WEBPACK_IMPORTED_MODULE_3__.importDeclaration([_babel_types__WEBPACK_IMPORTED_MODULE_3__.importDefaultSpecifier(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("params"))],_babel_types__WEBPACK_IMPORTED_MODULE_3__.stringLiteral("./params")),imports.push(opts),imports.push(_babel_types__WEBPACK_IMPORTED_MODULE_3__.importDeclaration([_babel_types__WEBPACK_IMPORTED_MODULE_3__.importNamespaceSpecifier(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("file"))],_babel_types__WEBPACK_IMPORTED_MODULE_3__.stringLiteral("./file")))):(mainFunctionSelected=_babel_types__WEBPACK_IMPORTED_MODULE_3__.variableDeclaration("const",[_babel_types__WEBPACK_IMPORTED_MODULE_3__.variableDeclarator(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("params"),_babel_types__WEBPACK_IMPORTED_MODULE_3__.callExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("require"),[_babel_types__WEBPACK_IMPORTED_MODULE_3__.stringLiteral("./params")]))]),imports.push(mainFunctionSelected),imports.push(_babel_types__WEBPACK_IMPORTED_MODULE_3__.variableDeclaration("const",[_babel_types__WEBPACK_IMPORTED_MODULE_3__.variableDeclarator(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("file"),_babel_types__WEBPACK_IMPORTED_MODULE_3__.callExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("require"),[_babel_types__WEBPACK_IMPORTED_MODULE_3__.stringLiteral("./file")]))])));return imports}(mainFunctionSelected,opts),opts=function(opts,bodyContent){let body;body="es6"==opts.esVersion?_babel_types__WEBPACK_IMPORTED_MODULE_3__.exportDefaultDeclaration(_babel_types__WEBPACK_IMPORTED_MODULE_3__.functionDeclaration(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("defaultFileParams"),[_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("req"),_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("res")],_babel_types__WEBPACK_IMPORTED_MODULE_3__.blockStatement(bodyContent))):_babel_types__WEBPACK_IMPORTED_MODULE_3__.expressionStatement(_babel_types__WEBPACK_IMPORTED_MODULE_3__.assignmentExpression("=",_babel_types__WEBPACK_IMPORTED_MODULE_3__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("module"),_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("exports")),_babel_types__WEBPACK_IMPORTED_MODULE_3__.functionExpression(null,[_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("req"),_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("res")],_babel_types__WEBPACK_IMPORTED_MODULE_3__.blockStatement(bodyContent))));return body}(opts,function(fi,mainFunctionSelected,opts){var bodyContent=[],argumentss=function(mainFunctionSelected){mainFunctionSelected=mainFunctionSelected.params.map((mParams,index)=>_babel_types__WEBPACK_IMPORTED_MODULE_3__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.callExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("params"),[_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("res")]),_babel_types__WEBPACK_IMPORTED_MODULE_3__.stringLiteral(mParams.name),!0));return mainFunctionSelected}(mainFunctionSelected),functionName=opts.createClassInstance?"classInstance":"file";let callExpression=_babel_types__WEBPACK_IMPORTED_MODULE_3__.callExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier(functionName),_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier(mainFunctionSelected.name)),argumentss);"exports"==mainFunctionSelected.name&&"es5"==opts.esVersion&&(callExpression=_babel_types__WEBPACK_IMPORTED_MODULE_3__.callExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier(functionName),argumentss));1==opts.createClassInstance&&bodyContent.push(function(fi,mainFunctionSelected){const className=mainFunctionSelected.fileInterfacePath[1],selectedClass=fi.classes.find(classe=>classe.name==className),argsConstrutor=selectedClass.construct?.params?.map(constructorParams=>_babel_types__WEBPACK_IMPORTED_MODULE_3__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("paramsConstructor"),_babel_types__WEBPACK_IMPORTED_MODULE_3__.stringLiteral(constructorParams.name),!0)),createClass=_babel_types__WEBPACK_IMPORTED_MODULE_3__.variableDeclaration("const",[_babel_types__WEBPACK_IMPORTED_MODULE_3__.variableDeclarator(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("classInstance"),_babel_types__WEBPACK_IMPORTED_MODULE_3__.newExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("file"),argsConstrutor))]);return createClass}(fi,mainFunctionSelected));"inline"==mainFunctionSelected.returnType?(functionName=_babel_types__WEBPACK_IMPORTED_MODULE_3__.variableDeclaration("const",[_babel_types__WEBPACK_IMPORTED_MODULE_3__.variableDeclarator(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("out"),callExpression)]),bodyContent.push(functionName),bodyContent.push(resSendOk)):bodyContent.push(_babel_types__WEBPACK_IMPORTED_MODULE_3__.expressionStatement(callExpression));return bodyContent}(fi,mainFunctionSelected,opts));ast.body=imports,ast.body.push(opts),cb(null,ast)},code:(ast,cb)=>{ast=(0,_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_4__.astToCode)(ast,fi.file.fileType).code;cb(null,js_beautify__WEBPACK_IMPORTED_MODULE_2___default()(ast))},write(code,cb){var path=targetPath+"file-params."+fi.file.fileType;code=(0,_prepend_tsNoCheck__WEBPACK_IMPORTED_MODULE_5__.prependTsNoCheck)(fi.file.fileType,code),fs__WEBPACK_IMPORTED_MODULE_1___default().writeFile(path,code,cb)}},(err,data)=>{console.error(err),cb(err,data)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("js-beautify"),js_beautify__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),_babel_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("@babel/types"),_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/babel/astToCode.js"),_prepend_tsNoCheck__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/prepend-tsNoCheck.js");const resSendOk=_babel_types__WEBPACK_IMPORTED_MODULE_3__.expressionStatement(_babel_types__WEBPACK_IMPORTED_MODULE_3__.callExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("res"),_babel_types__WEBPACK_IMPORTED_MODULE_3__.identifier("send")),[_babel_types__WEBPACK_IMPORTED_MODULE_3__.stringLiteral("ok")]))},"./dist/tsbuild/app/services/file-generator/generate/generateParams.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{addFunctionResnponseForCallback:()=>addFunctionResnponseForCallback,makeParams:()=>makeParams,makeParamsFile:()=>makeParamsFile});var fs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__),js_beautify__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("js-beautify"),js_beautify__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(js_beautify__WEBPACK_IMPORTED_MODULE_1__),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async"),async__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(async__WEBPACK_IMPORTED_MODULE_2__),serialize_javascript__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("serialize-javascript"),serialize_javascript__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(serialize_javascript__WEBPACK_IMPORTED_MODULE_3__),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lodash"),lodash__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__),_generate_imports_generateCodeFromIntermediateTree_generateCodeFromTree__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateCodeFromIntermediateTree/generateCodeFromTree.js"),_prepend_tsNoCheck__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/prepend-tsNoCheck.js"),_babel_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("@babel/types"),_babel_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_types__WEBPACK_IMPORTED_MODULE_6__),_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointTools.js"),_parser_ast_parser_langs_grammar_config__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/langs/grammar-config.js"),_prototype__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/prototype.js");function makeParams(fi,mainFunctionSelected,targetPath,done){(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({file:cb=>{makeParamsFile(fi,mainFunctionSelected,cb)},block:(file,cb)=>{let fileComplete;"es5"==fi.file.esVersion?fileComplete="module.exports = function (res) {\nreturn "+file+"; };":"es6"==fi.file.esVersion&&(fileComplete="const data = function (res) { \nreturn "+file+";} \n export default data;"),cb(null,js_beautify__WEBPACK_IMPORTED_MODULE_1___default()(fileComplete))},write:(block,cb)=>{var path=targetPath+"params."+fi.file.fileType;block=(0,_prepend_tsNoCheck__WEBPACK_IMPORTED_MODULE_9__.prependTsNoCheck)(fi.file.fileType,block),fs__WEBPACK_IMPORTED_MODULE_0___default().writeFile(path,block,cb)}},done)}function makeParamsFile(fileInterface,mainFunctionSelected,done){(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({data1:cb=>{let dataParams={};if(mainFunctionSelected?.dataRun)for(const key in dataParams=JSON.parse(JSON.stringify(mainFunctionSelected.dataRun)))"no data"==dataParams[key]&&delete dataParams[key],"function"==dataParams[key]?.type&&"Function"==dataParams[key]?.className&&delete dataParams[key];cb(null,dataParams)},dataTree1:(data1,cb)=>{let script=null;try{addFunctionResnponseForCallback(mainFunctionSelected),mainFunctionSelected.tree;const dataTree=(0,_generate_imports_generateCodeFromIntermediateTree_generateCodeFromTree__WEBPACK_IMPORTED_MODULE_5__.generateCodeFromTreeJson)(mainFunctionSelected.tree).code;dataTree;let code=dataTree.replace("const data = ","");code=code.slice(0,-1),code,script=eval("("+code+")")}catch(e){console.error(e)}cb(null,script)},merge:(data1,dataTree1,cb)=>{data1=(0,_prototype__WEBPACK_IMPORTED_MODULE_8__.mergeDeep)(data1,dataTree1);cb(null,js_beautify__WEBPACK_IMPORTED_MODULE_1___default()(serialize_javascript__WEBPACK_IMPORTED_MODULE_3___default()(data1)))}},(err,data)=>{done(err,data?.merge)})}function addFunctionResnponseForCallback(mf){mf.params.forEach(mfParams=>{mfParams.usage.forEach(mfParamsUsage=>{"callback"==mf.returnType&&-1!==_parser_ast_parser_langs_grammar_config__WEBPACK_IMPORTED_MODULE_10__.callbackNames.indexOf(mfParams.name)&&(mfParamsUsage="mainFunctions^"+mf.name+"^params^"+mfParams.name+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_7__.textForFiPath)(mfParamsUsage.text),mfParamsUsage=_babel_types__WEBPACK_IMPORTED_MODULE_6__.expressionStatement(_babel_types__WEBPACK_IMPORTED_MODULE_6__.callExpression(_babel_types__WEBPACK_IMPORTED_MODULE_6__.memberExpression(_babel_types__WEBPACK_IMPORTED_MODULE_6__.identifier("res"),_babel_types__WEBPACK_IMPORTED_MODULE_6__.identifier("send")),[_babel_types__WEBPACK_IMPORTED_MODULE_6__.objectExpression([_babel_types__WEBPACK_IMPORTED_MODULE_6__.objectProperty(_babel_types__WEBPACK_IMPORTED_MODULE_6__.identifier("status"),_babel_types__WEBPACK_IMPORTED_MODULE_6__.stringLiteral("ok")),_babel_types__WEBPACK_IMPORTED_MODULE_6__.objectProperty(_babel_types__WEBPACK_IMPORTED_MODULE_6__.identifier("arguments"),_babel_types__WEBPACK_IMPORTED_MODULE_6__.identifier("arguments")),_babel_types__WEBPACK_IMPORTED_MODULE_6__.objectProperty(_babel_types__WEBPACK_IMPORTED_MODULE_6__.identifier("fiPath"),_babel_types__WEBPACK_IMPORTED_MODULE_6__.stringLiteral(mfParamsUsage))])])),(0,lodash__WEBPACK_IMPORTED_MODULE_4__.set)(mf.tree,mfParams.name+".type","function"),(0,lodash__WEBPACK_IMPORTED_MODULE_4__.set)(mf.tree,mfParams.name+".ast",mfParamsUsage))})})}},"./dist/tsbuild/app/services/file-generator/generate/prepend-tsNoCheck.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{prependTsNoCheck:()=>function(fileType,code){let ret="";ret="ts"==fileType?"/* eslint-disable */\n// @ts-nocheck\n\n"+code:"/* eslint-disable */\n// jshint ignore: start\n\n"+code;return ret}})},"./dist/tsbuild/app/services/file-generator/generateFiles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{makeDefaultFiles:()=>function(targetPath,fileType,esVersion,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({folder:cb=>{fs_extra__WEBPACK_IMPORTED_MODULE_1___default().ensureDir(targetPath,cb)},app:(folder,cb)=>{(0,_generate_generateApp__WEBPACK_IMPORTED_MODULE_4__.default)({file:{fileType:fileType,esVersion:esVersion}},targetPath,cb)},fileParams:(folder,cb)=>{var path=targetPath+"file-params."+fileType;fs__WEBPACK_IMPORTED_MODULE_5___default().writeFile(path,"",cb)},file:(folder,cb)=>{var path=targetPath+"file."+fileType;fs__WEBPACK_IMPORTED_MODULE_5___default().writeFile(path,"",cb)}},err=>{console.error(err),callback(err)})},makeFiles:()=>function(fileInterface,cursor,targetPath,callback){fileInterface.file,(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({folder:cb=>{fs_extra__WEBPACK_IMPORTED_MODULE_1___default().ensureDir(targetPath,cb)},mainFunctionSelected(cb){(0,_fileinterface_mgt_findFunctionSelected__WEBPACK_IMPORTED_MODULE_8__.findFunctionSelected)(fileInterface,cursor,cb)},app:(folder,cb)=>{(0,_generate_generateApp__WEBPACK_IMPORTED_MODULE_4__.default)(fileInterface,targetPath,cb)},file:(folder,mainFunctionSelected,cb)=>{(0,_generate_generateFile__WEBPACK_IMPORTED_MODULE_3__.default)(fileInterface,mainFunctionSelected,targetPath,cb)},params:(folder,mainFunctionSelected,cb)=>{mainFunctionSelected?.dataRun?(0,_generate_generateParams__WEBPACK_IMPORTED_MODULE_7__.makeParams)(fileInterface,mainFunctionSelected,targetPath,cb):cb("no paramsData, can't generate files - ")},fileParams:(app,mainFunctionSelected,cb)=>{(0,_generate_generateFileParams__WEBPACK_IMPORTED_MODULE_2__.default)(fileInterface,mainFunctionSelected,targetPath,cb)},imports:(file,cb)=>{(0,_generate_generate_imports_generateImportFiles__WEBPACK_IMPORTED_MODULE_6__.generateImportFiles)(fileInterface,targetPath,cb)}},(err,result)=>{callback(err,result)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),__webpack_exports__=__webpack_require__("fs-extra"),fs_extra__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),_generate_generateFileParams__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generateFileParams.js"),_generate_generateFile__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generateFile.js"),_generate_generateApp__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generateApp.js"),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(__webpack_exports__),_fileinterface_mgt_findFunctionSelected__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/services/fileinterface-mgt/findFunctionSelected.js"),_generate_generate_imports_generateImportFiles__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generate-imports/generateImportFiles.js"),_generate_generateParams__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generate/generateParams.js")},"./dist/tsbuild/app/services/fileinterface-mgt/BpResponseToFileInterface.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BpResponseToFileInterface:()=>BpResponseToFileInterface,BpResponseToFileInterfaceForTracer:()=>function(fi,bpResDatas,cb){BpResponseToFileInterface(fi,[bpResDatas],(err,data)=>{if(err)return cb(err);err=setDefaultValuesForDataRun(data);cb(null,err)})},setDefaultValuesForDataRun:()=>setDefaultValuesForDataRun});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash"),_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointTools.js"),_parser_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-import-usage.js");const emptyDataSelect=function(){return[]},emptyDataSelectImport=function(){return[]};function BpResponseToFileInterface(fi,bpResDatas,cb){const fiMap={},bpResDatasGrouped=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.groupBy)(bpResDatas,"fiPath");let fiPath;fi.mainFunctions?.forEach(fiMf=>{fiPath="mainFunctions^"+fiMf.name,fiMf.dataRun={},fiMf.params?.forEach(fiMfParams=>{var fiPathParams=fiPath+"^params^"+fiMfParams.name,params=(fiMfParams.dataSelect=emptyDataSelect(),bpResDatasGrouped[fiPath]?.map(bpRes=>({name:bpRes.createdAt,data:bpRes.data?.[fiMfParams.name]})));null!=params&&(fiMfParams.dataSelect.unshift({file:fi.file.file,params:params}),fiMap[fiPathParams]=params)})}),fi.imports?.forEach(fiIm=>{null==fiIm.mapVarName&&(fiIm.mapVarName={}),fiIm.varNames?.forEach(varName=>{fiIm.mapVarName[varName]="provisioning"}),null!=fiIm?.varName&&(fiIm.mapVarName[fiIm.varName]="provisioning"),fiIm.usage?.filter(_parser_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_2__.filterImportUsage).forEach(fiImUsage=>{1<=fiIm.varNames?.length&&null!=fiImUsage.varName?fiPath="imports^"+fiImUsage.varName+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiImUsage.text):null!=fiIm.varName&&(fiPath="imports^"+fiIm.varName+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiImUsage.text));var params=bpResDatasGrouped[fiPath]?.map(bpRes=>({name:bpRes.createdAt,data:bpRes.data}));null!=params&&(null==fiImUsage.dataSelect&&(fiImUsage.dataSelect=emptyDataSelectImport(),fiImUsage.dataRun={}),fiImUsage.dataSelect.unshift({file:fi.file.file,params:params})),fiImUsage?.arguments?.forEach((fiImUsageArgs,argIndex)=>{1<=fiIm.varNames?.length&&null!=fiImUsage.varName?fiPath="imports^"+fiImUsage.varName+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiImUsage.text)+"^argument^"+argIndex:null!=fiIm.varName&&(fiPath="imports^"+fiIm.varName+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiImUsage.text)+"^argument^"+argIndex);argIndex=bpResDatasGrouped[fiPath]?.map(bpRes=>({name:bpRes.createdAt,data:bpRes.data}));null!=argIndex&&(null==fiImUsageArgs.dataSelect&&(fiImUsageArgs.dataSelect=emptyDataSelectImport(),fiImUsageArgs.dataRun={}),fiIm.mapVarName[fiImUsage.varName]="mock",fiImUsageArgs.dataSelect.unshift({file:fi.file.file,params:argIndex}))})})}),cb(null,fi,fiMap)}function setDefaultValuesForDataRun(fileInterface){return fileInterface.mainFunctions?.forEach(mf=>{mf.params?.forEach(mfParams=>{var firstValue=getFirstValue(mfParams.dataSelect);mf.dataRun[mfParams.name]=firstValue})}),fileInterface.classes?.forEach(fiClass=>{fiClass.methods?.forEach(mf=>{mf.params?.forEach(mfParams=>{var firstValue=getFirstValue(mfParams.dataSelect);null==mf.dataRun&&(mf.dataRun={}),mf.dataRun[mfParams.name]=firstValue})})}),fileInterface.imports?.forEach(fiImport=>{fiImport.usage?.forEach(fiImUsage=>{var firstValue=getFirstValue(fiImUsage.dataSelect);fiImUsage.dataRun=firstValue,fiImUsage.arguments?.filter(usageArg=>1<=usageArg.dataSelect?.length).forEach(usageArg=>{var firstValueArg=getFirstValue(usageArg.dataSelect);usageArg.dataRun=firstValueArg})})}),fileInterface}function getFirstValue(dataSelect){return null!=dataSelect?.[0]?.params?.[0]?.data?dataSelect[0]?.params?.[0]?.data:!0===dataSelect?.[0]?.data?.provisioning?dataSelect[0].data:"no data"}},"./dist/tsbuild/app/services/fileinterface-mgt/findFunctionSelected.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{findFunctionSelected:()=>function(fileInterface,cursor,cb){let mainFunctionFound=null,fileInterfacePathIndex;1<=fileInterface.mainFunctions?.length&&(null==(mainFunctionFound=fileInterface.mainFunctions.find((mf,indexMf)=>mf.loc.start.line<=cursor.line&&mf.loc.end.line>=cursor.line&&(fileInterfacePathIndex="mainFunctions."+indexMf,!0)))&&null!=fileInterface.mainFunctions?.[0]&&(mainFunctionFound=fileInterface.mainFunctions[0],fileInterfacePathIndex="mainFunctions.0"),mainFunctionFound.fileInterfacePath=["mainFunctions",mainFunctionFound.name]);1<=fileInterface.classes?.length&&fileInterface.classes.forEach((fnClass,indexClass)=>{null==(mainFunctionFound=fnClass.methods?.find((elm,indexMethod)=>elm.loc.start.line<=cursor.line&&elm.loc.end.line>=cursor.line&&(fileInterfacePathIndex="classes."+indexClass+".methods."+indexMethod,!0)))&&1<=fnClass.methods?.length&&(mainFunctionFound=fnClass.methods[0],fileInterfacePathIndex="classes.0.methods.0"),null!=mainFunctionFound&&(mainFunctionFound.fileInterfacePath=["classes",fnClass.name,mainFunctionFound.name])});null==mainFunctionFound?cb("no main function found"):(mainFunctionFound.fileInterfacePathIndex=fileInterfacePathIndex,cb(null,mainFunctionFound))}})},"./dist/tsbuild/app/services/fileinterface-mgt/getActiveFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getActiveFile:()=>function(cb){async__WEBPACK_IMPORTED_MODULE_0___default().autoInject({selectedFile:cb=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__.orm.SelectedFileModel.findOneSelected(cb)},fileInterface:(selectedFile,cb)=>{null==selectedFile?cb("no file selected"):_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__.orm.FileInterfaceModel.findWithFilePathSelectLean(selectedFile.filePath,"classes mainFunctions imports file date createdAt updatedAt",cb)},bpResponse:(fileInterface,cb)=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__.orm.BpResponseData.findLean(fileInterface._id,cb)},parseFileInterface:(fileInterface,cb)=>{cb(null,function(fi){fi._id&&(fi.imports=fi.imports?.filter(fiImport=>(fiImport.usage=fiImport.usage?.filter(_parser_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_1__.filterImportUsage),1<=fiImport.usage?.length)));return fi}(fileInterface))},dataSelect:(parseFileInterface,bpResponse,cb)=>{(0,_BpResponseToFileInterface__WEBPACK_IMPORTED_MODULE_2__.BpResponseToFileInterface)(parseFileInterface,bpResponse,(err,fi)=>{cb(err,fi)})},functionSelected:(parseFileInterface,selectedFile,cb)=>{(0,_findFunctionSelected__WEBPACK_IMPORTED_MODULE_4__.findFunctionSelected)(parseFileInterface,selectedFile.cursor,(err,data)=>{cb(null,data)})},send:(fileInterface,selectedFile,dataSelect,functionSelected,cb)=>{cb(null,{fileInterface:fileInterface,selectedFile:selectedFile,functionSelected:functionSelected})}},(err,data)=>{err?cb(err):cb(null,data.send)})}});var __webpack_exports__=__webpack_require__("async"),async__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_findFunctionSelected__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/fileinterface-mgt/findFunctionSelected.js"),_parser_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-import-usage.js"),_BpResponseToFileInterface__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/fileinterface-mgt/BpResponseToFileInterface.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js")},"./dist/tsbuild/app/services/fileinterface-mgt/getInfosDumpData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getInfosDumpData:()=>function(cb){async__WEBPACK_IMPORTED_MODULE_0___default().autoInject({selectedFile:cb=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_2__.orm.SelectedFileModel.findOneSelected(cb)},fileInterface:(selectedFile,cb)=>{null==selectedFile?cb("no file selected"):_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_2__.orm.FileInterfaceModel.findWithFilePathSelectLean(selectedFile.filePath,"classes mainFunctions imports file date createdAt updatedAt",cb)},breakpoints:cb=>{setTimeout(()=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__.getTargetCDP)()?.breakpoints.sendBpBySocket()},100),cb()}},cb)}});var __webpack_exports__=__webpack_require__("async"),async__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js")},"./dist/tsbuild/app/services/fileinterface-mgt/paramsDataMgt.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ParamsDataMgt:()=>ParamsDataMgt,ParamsDataMgtInstance:()=>ParamsDataMgtInstance,populateFiMaptoBpInfo:()=>function(bpInfo,fi,cb){ParamsDataMgtInstance.clear(),bpInfo.bpRequests.forEach(bpReq=>{null!=bpReq.fiPath&&(bpReq.fiMapObj=ParamsDataMgtInstance.getObjectFiMap(fi,bpReq.fiPath,bpInfo.paramsTarget[0]))}),cb()}});var _parser_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-import-usage.js"),_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/breakpoint/add-from-fi/CDPBreakpointTools.js");class ParamsDataMgt{fiMap={};constructor(){this.fiMap={}}clear(){this.fiMap={}}getObjectFiMap(fi,fiPath,bpParams){if(this.getDetailsWithFiPath(fi,fiPath,bpParams),null!=this.fiMap[fiPath])return this.fiMap[fiPath]}getDetailsWithFiPath(fi,fiPathTarget,bpParams){const fiPathMapObj={};let fiPath=null;fi.mainFunctions?.forEach(fiMf=>{fiPath="mainFunctions^"+fiMf.name,fiPathTarget.startsWith(fiPath)&&(fiPathMapObj.mainFunction=fiMf).params?.forEach(fiMfParams=>{const fiPathParams=fiPath+"^params^"+fiMfParams.name;fiPathTarget.startsWith(fiPathParams)&&(fiPathMapObj.params=fiMfParams),fiMfParams.usage?.forEach(fiMfParamsUsage=>{var fiPathUsage=fiPathParams+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiMfParamsUsage.text);fiPathTarget.startsWith(fiPathUsage)&&(fiPathMapObj.usage=fiMfParamsUsage)})})}),fi.functions?.forEach(fiMf=>{fiPath="functions^"+fiMf.name,fiPathTarget.startsWith(fiPath)&&function(fiFn,bpParams){if(fiFn.loc.body.start.line==bpParams.lineNumber&&fiFn.loc.body.start.column==bpParams.columnNumber)return 1}(fiMf,bpParams)&&(fiPathMapObj.function=fiMf).params?.forEach(fiMfParams=>{const fiPathParams=fiPath+"^params^"+fiMfParams.name;fiPathTarget.startsWith(fiPathParams)&&(fiPathMapObj.params=fiMfParams),fiMfParams.usage?.forEach(fiMfParamsUsage=>{var fiPathUsage=fiPathParams+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiMfParamsUsage.text);fiPathTarget.startsWith(fiPathUsage)&&(fiPathMapObj.usage=fiMfParamsUsage)})})}),fi.classes?.forEach(clas=>{1<=clas.construct?.name?.length&&(fiPath="classes^"+clas.name+"^construct",fiPathTarget.startsWith(fiPath))&&(fiPathMapObj.classe=clas,fiPathMapObj.construct=clas.construct),clas.methods?.forEach(method=>{fiPath="classes^"+clas.name+"^methods^"+method.name,fiPathTarget.startsWith(fiPath)&&(fiPathMapObj.classe=clas,fiPathMapObj.method=method),method.params?.forEach(fiMfParams=>{fiPath="classes^"+clas.name+"^methods^"+method.name+"^params^"+fiMfParams.name,fiPathTarget.startsWith(fiPath)&&(fiPathMapObj.params=fiMfParams),fiMfParams.usage?.forEach(fiMfParamsUsage=>{fiPath=fiPath+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiMfParamsUsage.text),fiPathTarget.startsWith(fiPath)&&(fiPathMapObj.usage=fiMfParamsUsage)})})})}),fi.imports?.forEach(fiIm=>{fiIm.usage.filter(_parser_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_0__.filterImportUsage).forEach(fiImUsage=>{1<=fiIm.varNames?.length&&null!=fiImUsage.varName?fiPath="imports^"+fiImUsage.varName+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiImUsage.text):null!=fiIm.varName&&(fiPath="imports^"+fiIm.varName+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiImUsage.text)),fiPathTarget.startsWith(fiPath)&&(fiPathMapObj.usage=fiImUsage,fiPathMapObj.import=fiIm),fiImUsage.arguments?.forEach((fiImUsageArgs,argIndex)=>{1<=fiIm.varNames?.length&&null!=fiImUsage.varName?fiPath="imports^"+fiImUsage.varName+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiImUsage.text)+"^argument^"+argIndex:null!=fiIm.varName&&(fiPath="imports^"+fiIm.varName+"^usage^"+(0,_chrome_devtools_protocol_cdp_class_breakpoint_add_from_fi_CDPBreakpointTools__WEBPACK_IMPORTED_MODULE_1__.textForFiPath)(fiImUsage.text)+"^argument^"+argIndex),fiPathTarget==fiPath&&(fiPathMapObj.argument=fiImUsageArgs)})})}),this.fiMap[fiPathTarget]=fiPathMapObj}}const ParamsDataMgtInstance=new ParamsDataMgt},"./dist/tsbuild/app/services/handle-status/breakpoints-ide/breakpointsIde.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getBreakpointsIde:()=>function(){return listBreakpointsIde},updateBreakpointsIde:()=>function(bps){2<=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project?.appRoot?.length&&(listBreakpointsIde=[],bps.forEach(bp=>{bp.filePath.startsWith(_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project.appRoot)&&listBreakpointsIde.push(bp)}),listBreakpointsIde.length,(0,_tracer_handle_status_change_tracer__WEBPACK_IMPORTED_MODULE_1__.startTracer)(()=>{}))}});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_tracer_handle_status_change_tracer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/tracer/handle-status-change-tracer.js");let listBreakpointsIde=[]},"./dist/tsbuild/app/services/handle-status/clear/clearData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{clearData:()=>function(toClear,cb){var tasks={};"files"!=toClear&&"all"!=toClear||(tasks.files=(0,async__WEBPACK_IMPORTED_MODULE_0__.apply)(clearFiles));"database"!=toClear&&"all"!=toClear||(tasks.database=(0,async__WEBPACK_IMPORTED_MODULE_0__.apply)(clearDatabase));(0,async__WEBPACK_IMPORTED_MODULE_0__.auto)(tasks,err=>{if(err)return cb(err);cb(null,"clear "+toClear+" ok")})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),__webpack_exports__=__webpack_require__("mongoose"),mongoose__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),fs_extra__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fs-extra"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js");function clearFiles(cb){1<=_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__.appCache.project?.appRoot?.length?(0,fs_extra__WEBPACK_IMPORTED_MODULE_2__.remove)(_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__.appCache.project.appRoot+"recompyle/",cb):cb()}function clearDatabase(cb){mongoose__WEBPACK_IMPORTED_MODULE_1___default().connection.db.dropDatabase().then(()=>{cb()})}},"./dist/tsbuild/app/services/handle-status/initAndClearChildInstances.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{initAndClearChildInstances:()=>function(fileInterface,selectedFile,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({instances:cb=>{instanceImportsMap={};var importss=(0,_queueParseFile__WEBPACK_IMPORTED_MODULE_1__.getImportsWithExternalCallback)(fileInterface.imports);let indexRteApp=0;(0,async__WEBPACK_IMPORTED_MODULE_0__.eachOfSeries)(importss,(mImport,index,cb2)=>{(0,async__WEBPACK_IMPORTED_MODULE_0__.eachOfSeries)(mImport.usage,(mImportUsage,index2,cb3)=>{mImportUsage=mImport.varName+"-"+mImportUsage._id;instanceImportsMap[mImportUsage]=(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__.getInstanceWithIndex)(indexRteApp),instanceImportsMap[mImportUsage].initInstance(mImport,cb3),indexRteApp++},cb2)},cb)}},err=>{callback()})},instancesImports:()=>function(){return instanceImportsMap}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_queueParseFile__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/handle-status/queueParseFile.js"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js");let instanceImportsMap={}},"./dist/tsbuild/app/services/handle-status/queueParseFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getImportsWithExternalCallback:()=>getImportsWithExternalCallback,parseFilesSeries:()=>function(fi,cb){1<=fi?.imports?.length?(fi=getImportsWithExternalCallback(fi.imports).map(mImport=>mImport.filePath),(0,_parser_parseFilePathArray__WEBPACK_IMPORTED_MODULE_0__.parseFilePathArray)(fi,err=>{cb()})):cb()}});var _parser_parseFilePathArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/parser/parseFilePathArray.js");function getImportsWithExternalCallback(importsss){return JSON.parse(JSON.stringify(importsss)).filter(importt=>"file"==importt.type)}},"./dist/tsbuild/app/services/handle-status/setBreakpointForProject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{setBreakpointForProject:()=>function(cb){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({fileInterface:cb=>{!function(cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__.orm.FileInterfaceModel.findWithFilePathSelectLean(_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.selectedFile.filePath,null,cb)}(cb)},setBp:(fileInterface,cb)=>{fileInterface.length,(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(fileInterface,(fi,cb)=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__.getTargetCDP)().breakpointsDump.setBreakPointForFileInterface(fi._id,cb)},cb)}},err=>{cb(err)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js")},"./dist/tsbuild/app/services/handle-status/status-change/checkActiveProject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{isDebugAppSameAsSelectedFile:()=>function(){let isDebugAppSameAsSelectedFile=!1;1<=(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__.getTargetCDP)()?.scriptParsedMgt.scripts?.length&&(isDebugAppSameAsSelectedFile=(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__.getTargetCDP)().scriptParsed.isDebugAppSameAsSelectedFile);_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appStatus.activeProject.isDebugAppSameAsSelectedFile!==isDebugAppSameAsSelectedFile&&(_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appStatus.activeProject.isDebugAppSameAsSelectedFile=isDebugAppSameAsSelectedFile,_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_2__.mSocketServer?.sendStatus());return isDebugAppSameAsSelectedFile}});var _runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js")},"./dist/tsbuild/app/services/handle-status/status-change/handle-status-change.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{handleStatusChange:()=>function(fileStatusChange,cb){debounceStatusChange(fileStatusChange,cb)},parse:()=>parse,runStatusChange:()=>runStatusChange,selectFile:()=>selectFile});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("async"),_parser_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/parser/filePathToFileInterface.js"),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),__webpack_exports__=__webpack_require__("lodash"),_middlewares_async_try_catch__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./dist/tsbuild/app/middlewares/async-try-catch.js"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_queueParseFile__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/handle-status/queueParseFile.js"),_checkActiveProject__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/checkActiveProject.js"),_mocksData__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/mocksData.js"),_project_change__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/project-change.js"),_updateSelectedFile__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/updateSelectedFile.js"),_tracer_handle_status_change_tracer__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./dist/tsbuild/app/services/tracer/handle-status-change-tracer.js"),_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./dist/tsbuild/app/handlers/helpers/filesExtensions.js");const debounceLive=(0,__webpack_exports__.debounce)(function(doc,cb){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({services:cb=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__.getMainRteApp)().cdp.cdpConnected.getValue(),cb()},parse:cb=>{!function(doc,cb){parse(doc,(err,dataParse)=>{_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterface=dataParse.processFile,cb(err,dataParse)})}(doc,cb)},mocksData:(parse,cb)=>{(0,_mocksData__WEBPACK_IMPORTED_MODULE_8__.mocksData)(cb)},makeFile:(mocksData,initProject,cb)=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__.getMainRteApp)().fileMgt.fileInterface=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterface,(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__.getMainRteApp)().fileMgt.cursor=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile.cursor,(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__.getMainRteApp)().fileMgt.makeFiles(cb)},restartApp:(makeFile,cb)=>{doc.elementsChanged.file?(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__.getMainRteApp)().restart(cb):cb()},initAndClearChildInstances:(mocksData,makeFile,cb)=>{cb()},setBpAndRun:(initAndClearChildInstances,restartApp,cb)=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_5__.getMainRteApp)().cdp.breakpointRte.setBpAndRun(cb)}},(err,result)=>{console.error(err),err?(_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_3__.mSocketServer.socketApp.emit("console",{err:err}),cb(err)):cb(null,"rte live ok")})},300),debounceStatusChange=(0,__webpack_exports__.debounce)(runStatusChange,100);function runStatusChange(fileStatusChange,callback){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)((0,_middlewares_async_try_catch__WEBPACK_IMPORTED_MODULE_13__.tryCatch)({prepopulate:cb=>{fileStatusChange?.fileInterface?.file?.filePath==_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile.filePath&&null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile?.filePath&&(fileStatusChange.selectedFile=JSON.parse(JSON.stringify(_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile)),fileStatusChange.filePath=fileStatusChange.selectedFile.filePath,fileStatusChange.cursor=fileStatusChange.selectedFile.cursor),null==fileStatusChange?.ideRoot||fileStatusChange.ideRoot.endsWith("/")||(fileStatusChange.ideRoot+="/"),fileStatusChange.appRoot=fileStatusChange.ideRoot,cb()},projectChange:(prepopulate,cb)=>{(0,_project_change__WEBPACK_IMPORTED_MODULE_9__.projectChange)(fileStatusChange,cb)},checkProject:(projectChange,cb)=>{!function(fileStatusChange,cb){if(null==fileStatusChange||null==fileStatusChange.filePath||0==fileStatusChange?.filePath?.length)cb("no fileStatusChange.filePath");else if(-1!=fileStatusChange.filePath?.indexOf("/recompyle/tmp")||-1!=fileStatusChange.filePath?.indexOf("/recompyle/provisioning.js"))cb("we don't parse files in  /recompyle/tmp");else if((0,_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_12__.isAllowedFileExtension)(fileStatusChange.filePath))if("cursor-change"==fileStatusChange.event&&fileStatusChange.filePath!==_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile.filePath)cb("cursor changed on a different file");else{if(null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project&&null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project.appRoot&&!_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project.appRoot.includes(fileStatusChange.appRoot)&&"select-file"!=fileStatusChange.event&&"start-tracer"!=fileStatusChange.event)return cb("we ignore this request as it is not from the selected project");cb()}else cb("File Extension not allowed")}(fileStatusChange,cb)},cursorOrFileChange:(checkProject,projectChange,cb)=>{!function(fileStatusChange,projectChange,cb){if(null==_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project||null==_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project.appRoot)return cb("project not setup");var doc={appRoot:fileStatusChange.appRoot,filePath:fileStatusChange.filePath,file:fileStatusChange.filePath.replace(fileStatusChange.appRoot,""),cursor:fileStatusChange.cursor,elementsChanged:{file:!1,fileContent:!1,cursor:!1,mocksData:!1,project:!1}};doc.file.startsWith("/")&&(doc.file=doc.file.substr(1));null==doc.appRoot&&(doc.appRoot=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project.appRoot);("select-file"!==fileStatusChange.event||_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project.appRoot.includes(fileStatusChange.appRoot))&&1!=projectChange?.projectChange||(doc.elementsChanged.project=!0);null!=doc.appRoot?(0!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appStatus.elementsLocked.file||null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile&&_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile.filePath===doc.filePath||(doc.elementsChanged.file=!0,doc.elementsChanged.fileContent=!0,null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile?.cursor?.line&&(doc.cursor.line=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile.cursor.line)),"file-saved"!=fileStatusChange.event&&"select-file"!==fileStatusChange.event||(doc.elementsChanged.fileContent=!0),"cursor-change"!=fileStatusChange.event||0!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appStatus.elementsLocked.cursor||_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile?.cursor?.line===fileStatusChange.cursor.line&&_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile?.cursor?.column===fileStatusChange.cursor.column||(doc.elementsChanged.cursor=!0),fileStatusChange.fileInterface&&(doc.elementsChanged.mocksData=!0,"mocks-updated"==fileStatusChange.event&&(_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterfaceWithMocks=JSON.parse(JSON.stringify(fileStatusChange.fileInterface))),_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterface=JSON.parse(JSON.stringify(fileStatusChange.fileInterface)),_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile=JSON.parse(JSON.stringify(fileStatusChange.selectedFile))),doc.elementsChanged.project&&(doc.elementsChanged.file=!0,doc.elementsChanged.fileContent=!0,doc.elementsChanged.cursor=!0),(0,_checkActiveProject__WEBPACK_IMPORTED_MODULE_7__.isDebugAppSameAsSelectedFile)(),cb(null,doc)):cb("appRoot empty")}(fileStatusChange,projectChange,cb)},then:(cursorOrFileChange,cb)=>{_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appStatus.mode,JSON.stringify(cursorOrFileChange?.elementsChanged),_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.docCursorChange=cursorOrFileChange,"dump"==_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appStatus.mode?((0,_tracer_handle_status_change_tracer__WEBPACK_IMPORTED_MODULE_11__.stopTracer)(),cursorOrFileChange.elementsChanged.file||cursorOrFileChange.elementsChanged.fileContent||cursorOrFileChange.elementsChanged.cursor?parse(cursorOrFileChange,cb):cb("Dump mode : file not changed, no need to do anything")):"rte"==_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appStatus.mode?((0,_tracer_handle_status_change_tracer__WEBPACK_IMPORTED_MODULE_11__.stopTracer)(),1==cursorOrFileChange.elementsChanged.file||1==cursorOrFileChange.elementsChanged.fileContent||1==cursorOrFileChange.elementsChanged.cursor||1==cursorOrFileChange.elementsChanged.mocksData?debounceLive(cursorOrFileChange,cb):cb("RTE mode : nothing  changed, no need to do anything")):"tracer"==_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appStatus.mode?1==cursorOrFileChange.elementsChanged.file?selectFile(cursorOrFileChange,err=>{err?cb(err):(0,_tracer_handle_status_change_tracer__WEBPACK_IMPORTED_MODULE_11__.startTracer)(cb)}):(0,_tracer_handle_status_change_tracer__WEBPACK_IMPORTED_MODULE_11__.startTracer)(cb):cb("unknow mode")}}),(err,data)=>{callback(err,data)})}function parse(doc,callback){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({processFile:cb=>{(0,_parser_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_2__.default)(doc.filePath,cb)},saveDb:(processFile,cb)=>{_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterface=processFile,(0,_updateSelectedFile__WEBPACK_IMPORTED_MODULE_10__.saveDbSelectedFile)(processFile,doc.cursor,cb)},parseExternalFiles:(processFile,cb)=>{(0,_queueParseFile__WEBPACK_IMPORTED_MODULE_6__.parseFilesSeries)(processFile,cb)},then:(saveDb,processFile,cb)=>{!function(doc,cb){_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appStatus.mode,(doc.elementsChanged.file||doc.elementsChanged.fileContent)&&_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_3__.mSocketServer.socketApp.emit("refresh-ui","document");doc.elementsChanged.cursor&&_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_3__.mSocketServer.socketApp.emit("cursor",doc.cursor);cb()}(doc,cb)}},function(err,data){console.error(err),callback(err,data)})}function selectFile(doc,callback){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({processFile:cb=>{(0,_parser_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_2__.default)(doc.filePath,cb)},saveDb:(processFile,cb)=>{_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterface=processFile,(0,_updateSelectedFile__WEBPACK_IMPORTED_MODULE_10__.saveDbSelectedFile)(processFile,doc.cursor,cb)}},function(err,data){console.error(err),callback(err,data)})}},"./dist/tsbuild/app/services/handle-status/status-change/makePaths.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{makePaths:()=>function(fileStatusChange,done){var tasks={findPackageJson:cb=>{findFileInRootDirectory(fileStatusChange.filePath,"package.json",fileStatusChange.ideRoot,cb)},projectName:(findPackageJson,cb)=>{!function(packageJsonPath,cb){(0,fs__WEBPACK_IMPORTED_MODULE_1__.readFile)(packageJsonPath,"utf8",(err,data)=>{if(err)return cb(err);err=JSON.parse(data);1<=err?.name?.length?cb(null,err.name):cb(null,"Project")})}(findPackageJson,cb)}};(0,_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_3__.fileEndWithExtension)(fileStatusChange.filePath,(0,_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_3__.getTypeScriptExtension)())&&(tasks.findTsConfig=cb=>{findFileInRootDirectory(fileStatusChange.filePath,"tsconfig.json",fileStatusChange.ideRoot,cb)});function callDone(err){done(err)}(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)(tasks,(err,result)=>{var cb;!function(result,fileStatusChange){null==_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project&&(_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project={});_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.ideRoot=fileStatusChange.ideRoot,_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.name=result.projectName,_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.packageJson=result.findPackageJson,_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.packageJsonFolder=path__WEBPACK_IMPORTED_MODULE_2___default().dirname(_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.packageJson)+"/",_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.appRoot=_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.packageJsonFolder,1<=result.findTsConfig?.length&&(_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.tsConfig=result.findTsConfig,_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.tsConfigFolder=path__WEBPACK_IMPORTED_MODULE_2___default().dirname(_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.tsConfig)+"/",_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.appRoot=_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.tsConfigFolder)}(result,fileStatusChange),fileStatusChange.appRoot=_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.appRoot,1<_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project?.appRoot?.length&&1<=_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project?.ideRoot?.length&&_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.appRoot!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.ideRoot?(cb=callDone,result=_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.appRoot+"project.json",(0,fs__WEBPACK_IMPORTED_MODULE_1__.readFile)(result,"utf8",(err,data)=>{if(null!=data&&null==err)try{var projectJson=JSON.parse(data);1<=projectJson?.name?.length&&(_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.name+=" "+projectJson.name,_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.name)}catch(e){}cb()})):callDone(err)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),fs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__),__webpack_exports__=__webpack_require__("path"),path__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/helpers/filesExtensions.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js");function findFileInRootDirectory(filePath,targetFileName,IdeRoot,callback){let currentPath=filePath;const search=()=>{const targetFilePath=path__WEBPACK_IMPORTED_MODULE_2___default().join(currentPath,targetFileName);fs__WEBPACK_IMPORTED_MODULE_1___default().access(targetFilePath,error=>{error?(error=path__WEBPACK_IMPORTED_MODULE_2___default().dirname(currentPath))===currentPath||error===IdeRoot?callback(null,null):(currentPath=error,search()):callback(null,targetFilePath)})};search()}},"./dist/tsbuild/app/services/handle-status/status-change/mocksData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{mocksData:()=>function(cb){{var fiWIthParamsDataMocks;_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterfaceWithMocks?(fiWIthParamsDataMocks=JSON.parse(JSON.stringify(_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterfaceWithMocks)),1<=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterface?.mainFunctions?.length&&1<=fiWIthParamsDataMocks.mainFunctions?.length&&fiWIthParamsDataMocks.mainFunctions.forEach(value=>{var mf;value.dataRun&&(mf=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterface.mainFunctions.find(value1=>value1.name==value.name))&&(mf.dataRun=value.dataRun)}),1<=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterface?.classes?.length&&1<=fiWIthParamsDataMocks.classes?.length&&fiWIthParamsDataMocks.classes.forEach(fiClasses=>{fiClasses.methods?.forEach(fiMethods=>{fiMethods.dataRun&&_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterface.classes.forEach(cacheFiClass=>{fiClasses.name==cacheFiClass.name&&(cacheFiClass=cacheFiClass.methods?.find(value1=>value1.name==fiMethods.name))&&(cacheFiClass.dataRun=fiMethods.dataRun)})})}),1<=fiWIthParamsDataMocks?.imports.length&&fiWIthParamsDataMocks.imports.forEach(fiImportMocks=>{const interfaceImports=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.fileInterface.imports.find(fiImportCache=>fiImportCache.name==fiImportMocks.name);interfaceImports.mapVarName=fiImportMocks.mapVarName,interfaceImports&&fiImportMocks.usage.forEach(fiImportUsageMock=>{const importUsageFound=interfaceImports.usage.find(fiImportUsageaa=>fiImportUsageaa.astPath==fiImportUsageMock.astPath);fiImportUsageMock.dataRun&&importUsageFound&&(importUsageFound.dataRun=fiImportUsageMock.dataRun),fiImportUsageMock.arguments.forEach(usageArgMock=>{null!=usageArgMock.dataRun&&(importUsageFound.arguments.find(arg=>arg._id==usageArgMock._id).dataRun=usageArgMock.dataRun)})})}),cb()):cb("no mocks data - fileInterfaceWithMocks")}}});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js")},"./dist/tsbuild/app/services/handle-status/status-change/project-change.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{projectChange:()=>function(fileStatusChange,cb){"select-file"==fileStatusChange?.event&&!_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project?.appRoot?.includes(fileStatusChange.appRoot)&&(0,_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_12__.isAllowedFileExtension)(fileStatusChange.filePath)?function(fileStatusChange,done){(0,neo_async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({clear:cb=>{_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_5__.mSocketServer.socketIde.close(),(0,_tracer_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_7__.clearTargetFiles)(),(0,_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_8__.clearTabSession)(),(0,_chrome_devtools_protocol_cdp_class_scripts_mgt_projectFiles__WEBPACK_IMPORTED_MODULE_13__.clearListFilesProject)(),(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_6__.clearRteInstances)(cb)},config:(clear,cb)=>{(0,_common_config_load_loadConfigFromFile__WEBPACK_IMPORTED_MODULE_9__.loadConfigForProject)(fileStatusChange.appRoot),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_5__.mSocketServer.socketApp.emit("project-change",!0),(0,_common_config_initConfig__WEBPACK_IMPORTED_MODULE_10__.makeProjectLastOpenedProject)(fileStatusChange.appRoot,cb)},makePaths:(config,cb)=>{(0,_makePaths__WEBPACK_IMPORTED_MODULE_11__.makePaths)(fileStatusChange,cb)},appServices:(makePaths,cb)=>{(0,_initServices__WEBPACK_IMPORTED_MODULE_3__.appServices)(cb)},project:(appServices,cb)=>{(0,_tracer_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_7__.clearTargetFiles)(),(0,_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_8__.clearTabSession)(),function(fileStatusChange,cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_14__.orm.ProjectModel.findOneAndUpdate({appRoot:fileStatusChange.appRoot},{appRoot:fileStatusChange.appRoot,ideRoot:_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project.ideRoot,name:_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project.name},(err,res)=>{err?cb(err):(_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project._id=String(res._id),cb())})}(fileStatusChange,cb)},removeFileHash:(project,cb)=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_14__.orm.FileInterfaceModel.removeFileHashWithFilePath(fileStatusChange.filePath,cb)},selectFile:(removeFileHash,cb)=>{(0,_parser_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_2__.default)(fileStatusChange.filePath,cb)},saveDbSelectedFile:(selectFile,cb)=>{null!=selectFile?._id?(0,_updateSelectedFile__WEBPACK_IMPORTED_MODULE_4__.saveDbSelectedFile)(selectFile,fileStatusChange.cursor,cb):cb("Error parsing "+fileStatusChange.filePath)},projectServices:(saveDbSelectedFile,cb)=>{(0,_initServices__WEBPACK_IMPORTED_MODULE_3__.projectServices)(cb)},wait:(saveDbSelectedFile,cb)=>{setTimeout(()=>{cb()},10)}},err=>{err?done(err):done(null,{projectChange:!0})})}(fileStatusChange,cb):cb()}});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),neo_async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("neo-async"),_parser_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/parser/filePathToFileInterface.js"),_initServices__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/initServices.js"),_updateSelectedFile__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/updateSelectedFile.js"),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_tracer_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/target-files-mgt.js"),_tracer_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/services/tracer/tab-session/get-tab-session.js"),_common_config_load_loadConfigFromFile__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/common/config/load/loadConfigFromFile.js"),_common_config_initConfig__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/common/config/initConfig.js"),_makePaths__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/makePaths.js"),_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./dist/tsbuild/app/handlers/helpers/filesExtensions.js"),_chrome_devtools_protocol_cdp_class_scripts_mgt_projectFiles__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/scripts-mgt/projectFiles.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js")},"./dist/tsbuild/app/services/handle-status/status-change/updateSelectedFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{saveDbSelectedFile:()=>function(fi,cursor,cb){if(null==cursor.line)return cb("Cursor cannot be null");_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_1__.orm.SelectedFileModel.findSelectedAndUpdate({filePath:fi.file.filePath,appRoot:fi.file.appRoot,project:fi.project,file:fi._id,cursor:cursor,fileType:fi.file.fileType,esVersion:fi.file.esVersion},(err,data)=>{null!=data?(_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.selectedFile=data,cb(err,data)):cb("no file selected")})}});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js")},"./dist/tsbuild/app/services/handle-status/ui-events/change-cursor-position.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{changeCursorPosition:()=>function(action,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({getPossibleBps:cb=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__.getTargetCDP)().bpTools.possibleBreakpoints.getCurrentPossibleBreakpoints(cb)},getNewCursorPosition:(getPossibleBps,cb)=>{if(1<=getPossibleBps.length){const cursor=action.cursor;null==cursor.column&&(cursor.column=0);let bps=getPossibleBps;getPossibleBps=(bps="prev"==action.cursorPosition?bps.reverse():bps).find(bp=>{if("next"==action.cursorPosition){if(bp.lineNumber==cursor.line&&bp.columnNumber>cursor.column)return!0;if(bp.lineNumber>cursor.line)return!0}else if("prev"==action.cursorPosition){if(bp.lineNumber==cursor.line&&bp.columnNumber<cursor.column)return!0;if(bp.lineNumber<cursor.line)return!0}return!1});if(null!=getPossibleBps){const cursor={line:getPossibleBps.lineNumber,column:getPossibleBps.columnNumber};cb(null,cursor)}else cb("new cursor position not found")}else cb("no other cursor locations")},updateUi:(getNewCursorPosition,cb)=>{getNewCursorPosition.line&&_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_4__.mSocketServer.socketApp.emit("cursor",getNewCursorPosition),cb()},statusChange:(updateUi,getNewCursorPosition,cb)=>{var fileStatusChange=JSON.parse(JSON.stringify(_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.selectedFile));fileStatusChange.cursor=getNewCursorPosition,fileStatusChange.event="cursor-change",(0,_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_3__.handleStatusChange)(fileStatusChange,cb)}},(err,result)=>{console.error(err),callback(err,result)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_status_change_handle_status_change__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/handle-status/status-change/handle-status-change.js"),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js")},"./dist/tsbuild/app/services/handle-status/ui-events/set-bp-and-run.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js");const __WEBPACK_DEFAULT_EXPORT__=function(fileInterface,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({selectedFile:cb=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_4__.orm.SelectedFileModel.findOneSelected(cb)},makeFiles:(selectedFile,cb)=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__.getMainRteApp)().fileMgt.fileInterface=fileInterface,(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__.getMainRteApp)().fileMgt.cursor=_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__.appCache.selectedFile.cursor,(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__.getMainRteApp)().fileMgt.makeFiles(err=>{cb(err)})},wait:(makeFiles,cb)=>{setTimeout(cb,1)},setBP:(wait,makeFiles,selectedFile,cb)=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__.getMainRteApp)().cdp.breakpointRte.setBpAndRun(()=>{cb()})}},(err,result)=>{err&&_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__.mSocketServer.socketApp.emit("console",{err:err}),callback(err,result)})}},"./dist/tsbuild/app/services/parser/ast-parser/ast-parser-classes.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{classes:()=>function(json,cb){let fiClasses=[];json=jsonpath__WEBPACK_IMPORTED_MODULE_0___default().query(json,'$..[?(@.type=="ClassDeclaration")]');json.forEach(classesDeclaration=>{var classesMethods=jsonpath__WEBPACK_IMPORTED_MODULE_0___default().query(classesDeclaration,'$..[?(@.type=="ClassMethod")]');const methods=[];classesMethods.forEach(classesMethod=>{const params=[];classesMethod.params.forEach(param=>{params.push({name:param.name||param?.parameter?.name,loc:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.pickLocation)(param.loc),tsType:param?.typeAnnotation?.typeAnnotation?.name||param?.parameter?.typeAnnotation?.typeAnnotation?.typeName?.name||param?.typeAnnotation?.typeAnnotation?.typeName?.name})});var loc=(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.pickLocation)(classesMethod.loc),loc=(loc.body=classesMethod.body.loc,{loc:loc,name:classesMethod.key.name,params:params,returnType:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.getReturnTypeOld)(params),accessibility:classesMethod?.accessibility});1==classesMethod?.static&&(loc.static=!0),1==classesMethod?.async&&(loc.async=!0),methods.push(loc)});classesMethods=methods.findIndex(meth=>"constructor"==meth.name);let constructorMethod=[];-1!==classesMethods&&(constructorMethod=methods.splice(classesMethods,1)),fiClasses.push({loc:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.pickLocation)(classesDeclaration.loc),construct:constructorMethod?.[0],name:classesDeclaration.id.name,methods:methods})}),fiClasses=(0,_global__WEBPACK_IMPORTED_MODULE_2__.removeNullAndUndefined)(fiClasses),cb(null,fiClasses)}});var __webpack_exports__=__webpack_require__("jsonpath"),jsonpath__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_ast_parser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser.js"),_global__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/global.js")},"./dist/tsbuild/app/services/parser/ast-parser/ast-parser-export-named-declarations.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{exportNamedDeclarations:()=>function(jsonFromBabel,mainFunctions,cb){if(1<=mainFunctions?.length)try{(0,_babel_core__WEBPACK_IMPORTED_MODULE_0__.traverse)(jsonFromBabel,{ExportNamedDeclaration(path){1<=path.node.specifiers?.length&&path.node.specifiers.forEach(specifier=>{specifier=specifier.local.name;setMfExported(mainFunctions,specifier)}),handleFunctionDeclaration(path,mainFunctions)},ExportDefaultDeclaration(path){handleFunctionDeclaration(path,mainFunctions)}})}catch(e){return console.error("error export named declarations"),console.error(e),cb(e)}cb()}});var _babel_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@babel/core");function handleFunctionDeclaration(path,mainFunctions){null!=path.node.declaration?.id?.name&&setMfExported(mainFunctions,path.node.declaration?.id?.name)}function setMfExported(mainFunctions,exportName){mainFunctions=mainFunctions.find(mf=>mf.name==exportName);null!=mainFunctions&&(mainFunctions.exported=!0)}},"./dist/tsbuild/app/services/parser/ast-parser/ast-parser-import-usage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{filterFunctionCallback:()=>filterFunctionCallback,filterImportUsage:()=>function(fiImport){return"import"!==fiImport.parentElm&&"TsType"!==fiImport.parentElm&&"ClassDeclaration"!==fiImport.parentElm},filterParentsElements:()=>filterParentsElements,findImportUsageAtPathIdentifier:()=>findImportUsageAtPathIdentifier,findImportUsageInLineOfCode:()=>function(varName,lineOfCode,done){const importUsages=[{varName:varName}];(0,async__WEBPACK_IMPORTED_MODULE_4__.autoInject)({ast:cb=>{cb(null,(0,_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_3__.codeStringToAstWithBabelSync)(lineOfCode,"ts"))},imports:(ast,cb)=>{importUsage(ast,importUsages,cb)}},(err,result)=>{err&&console.error(err);var originImport=[{varName:varName}];JSON.stringify(result.imports)==JSON.stringify(originImport)?done(err):done(err,result.imports)})},importUsage:()=>importUsage,isFunctionCallback:()=>function(argType){return"FunctionExpresion"==argType||"ArrowFunctionExpression"==argType}});var _babel_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@babel/core"),_ast_parser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser.js"),_langs_grammar_config__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/langs/grammar-config.js"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lodash"),_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/babel/fileToAstWithBabel.js"),async__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("async"),_global__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/global.js"),_babel_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("@babel/types"),_handlers_babel_babel__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/handlers/babel/babel.js");function importUsage(ast,imports,cb){try{(0,_babel_core__WEBPACK_IMPORTED_MODULE_0__.traverse)(ast,{Identifier(path){filterParentsElements(path)&&imports.forEach(fi=>{fi.varName&&fi.varName==path.node.name?findImportUsage(fi,path,fi.varName,ast):1<=fi.varNames?.length&&fi.varNames.forEach(varName=>{varName==path.node.name&&findImportUsage(fi,path,varName,ast)})})}})}catch(e){return console.error("error import Usage"),console.error(e),cb(e)}!function(imports){imports.forEach(fiImport=>{const mapVarName={};fiImport.usage?.forEach(importUsage=>{null==mapVarName?.[importUsage.varName]&&"import"!==importUsage.parentElm&&"TsType"==importUsage.parentElm&&(mapVarName[importUsage.varName]="TsType")}),0!=Object.keys(mapVarName).length&&(fiImport.mapVarName=mapVarName)})}(imports),cb(null,imports)}function filterParentsElements(path){return"OptionalMemberExpression"!=path.parentPath.node.type&&!(path.getPathLocation().endsWith("property")&&"MemberExpression"==path.parentPath.node.type||path.getPathLocation().endsWith("key")&&"ObjectProperty"==path.parentPath.node.type)}function findImportUsage(fiImport,path,nameToFind,ast){path=findImportUsageAtPathIdentifier(path,0,ast);null!=path&&(null!=fiImport&&null==fiImport.usage&&(fiImport.usage=[]),path.varName=nameToFind,fiImport.usage.push(path),fiImport.usage=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.uniqWith)(fiImport.usage,lodash__WEBPACK_IMPORTED_MODULE_2__.isEqual))}function findImportUsageAtPathIdentifier(path,nameToFind,ast){let blockElm=path,isValid=isParentInvalid(blockElm);for(;null==isValid;)blockElm=blockElm.parentPath,isValid=isParentInvalid(blockElm);let fiUsage={astPath:blockElm.getPathLocation(),loc:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.pickLocation)(blockElm.node.loc),parentElm:isValid,text:blockElm.toString()};var text;return fiUsage.parentElmDirection=function(fiUsage){return"AssignmentExpression"==fiUsage.parentElm||"test"==fiUsage.parentElm?fiUsage.astPath.endsWith(".left")?"left":fiUsage.astPath.endsWith(".right")?"right":void 0:"VariableDeclarator"!=fiUsage.parentElm&&"new-class"!=fiUsage.parentElm||!fiUsage.astPath.endsWith(".init")?void 0:"right"}(fiUsage),"import"!==fiUsage.parentElm&&({argumentss:path,text}=function(ast,fiUsage){ast=JSON.parse(JSON.stringify(ast));let argumentss=[],text=null;return(0,_babel_core__WEBPACK_IMPORTED_MODULE_0__.traverse)(ast,{BlockStatement(path){if(path.getPathLocation().startsWith(fiUsage.astPath)&&1<=path?.node?.body?.length){path.node.body=_babel_types__WEBPACK_IMPORTED_MODULE_6__.blockStatement([]);let blockPathElm=path;for(;blockPathElm.getPathLocation()!==fiUsage.astPath;)blockPathElm=blockPathElm.parentPath;text=blockPathElm.toString()}},CallExpression(path){path.getPathLocation().startsWith(fiUsage.astPath)&&1<=path.node?.arguments?.length&&path.node.arguments.forEach((argu,arguIndex)=>{argu={argType:argu.type,name:argu.name,value:argu.value,loc:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.pickLocation)(argu.loc),astPath:path.getPathLocation()+".arguments["+arguIndex+"]"};argumentss.push(argu)})}}),{argumentss:argumentss=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.orderBy)(argumentss,["loc.start.line","loc.start.column"]),text:text}}(ast,fiUsage),fiUsage.arguments=path,null!=text&&(fiUsage.text=text),fiUsage.returnType=function(fiUsage){return"body"==fiUsage.parentElm?1<=fiUsage.arguments?.length&&("ArrowFunctionExpression"==fiUsage.arguments.at(-1)?.argType||"FunctionExpression"==fiUsage.arguments.at(-1)?.argType)?"inline-callback":1<=fiUsage.arguments?.length&&-1!==_langs_grammar_config__WEBPACK_IMPORTED_MODULE_8__.callbackNames.indexOf(fiUsage.arguments.at(-1).name)?"callback":"void":"TsType"==fiUsage.parentElm?"TsType":"left"==fiUsage.parentElmDirection?"inline-set":"right"==fiUsage.parentElmDirection||"ArrayExpression"==fiUsage.parentElm||"ObjectProperty"==fiUsage.parentElm||"TemplateLiteral"==fiUsage.parentElm?"inline-get":function(fiUsage){var isACb=_langs_grammar_config__WEBPACK_IMPORTED_MODULE_8__.callbackNames.find(cbName=>!!fiUsage.text.startsWith(cbName));if(null!=isACb)return 1}(fiUsage)?"callback":"IfStatement"==fiUsage.parentElm||"argument"==fiUsage.parentElm?"inline-get":void 0}(fiUsage)),"AwaitExpression"!=blockElm.node?.type&&"AwaitExpression"!=blockElm.node?.expression?.type||(fiUsage.await=!0),function(blockElm,fiUsage,ast){let parentBlockElement=blockElm,isBlockWhereWeCanBp=isBlockWhereWeCanBpFn(parentBlockElement);for(;null==isBlockWhereWeCanBp;)parentBlockElement=parentBlockElement.parentPath,isBlockWhereWeCanBp=isBlockWhereWeCanBpFn(parentBlockElement);"import"!=fiUsage.parentElm&&"TsType"!=fiUsage.parentElm&&"ClassDeclaration"!=fiUsage.parentElm&&"void"!=fiUsage.returnType&&"callback"!=fiUsage.returnType&&("inline-set"==fiUsage.returnType?fiUsage.bpLoc={extract:!0}:"inline-get"==fiUsage.returnType?"VariableDeclarator"==fiUsage.parentElm||"new-class"==fiUsage.parentElm?(fiUsage.bpLoc=(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.pickLineCol)(parentBlockElement.node.loc.end),fiUsage.bpLoc.varPath=parentBlockElement.node?.declarations?.[0].id.name||parentBlockElement.node.declaration?.declarations?.[0]?.id.name):!function(ast,path){let foundMemberExpression=!1;return(0,_handlers_babel_babel__WEBPACK_IMPORTED_MODULE_7__.traverseNode)((0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(ast,path),{CallExpression(){foundMemberExpression=!0}}),foundMemberExpression}(ast,blockElm.getPathLocation())?(fiUsage.bpLoc=(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.pickLineCol)(parentBlockElement.node.loc.start),fiUsage.bpLoc.varPath=fiUsage.text):fiUsage.bpLoc={extract:!0}:"inline-callback"==fiUsage.returnType?fiUsage.arguments?.filter(filterFunctionCallback).forEach(argu=>{var blocFunction=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(ast,argu.astPath),bpLocForArg=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.pick)((0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(blocFunction,"body.loc.start"),["line","column"]),blocFunction=blocFunction.params;argu.bpLoc=bpLocForArg,argu.bpLoc.varPath=blocFunction.map(bpParam=>bpParam.name)}):fiUsage.bpLoc={extract:!1})}(blockElm,fiUsage,ast),fiUsage=(0,_global__WEBPACK_IMPORTED_MODULE_5__.removeNullAndUndefined)(fiUsage)}function filterFunctionCallback(argu){return"FunctionExpression"==argu.argType||"ArrowFunctionExpression"==argu.argType}function isBlockWhereWeCanBpFn(blockElm){return null==blockElm||null==blockElm.parentPath||1<=blockElm.parentPath.node?.body?.length?"body":"BinaryExpression"==blockElm.parentPath.node?.type?"test":null}function isParentInvalid(blockElm){return blockElm.getPathLocation().split(".").pop().startsWith("arguments")?"argument":"VariableDeclaration"==blockElm.node?.type&&"require"==blockElm.node?.declarations?.[0]?.init?.callee?.name&&"require"==blockElm.node?.declarations?.[0]?.init?.object?.callee?.name?"import":"TSTypeReference"==blockElm.parentPath.node?.type?"TsType":"ClassDeclaration"==blockElm.parentPath.node?.type?"ClassDeclaration":"IfStatement"==blockElm.parentPath.node?.type?"IfStatement":"NewExpression"==blockElm.node?.type?"new-class":"VariableDeclarator"==blockElm.parentPath.node?.type&&"require"!=blockElm.parentPath.node?.init?.callee?.name&&"require"!=blockElm.parentPath.node?.init?.object?.callee?.name?"VariableDeclarator":1<=blockElm.parentPath.node?.body?.length?"Program"==blockElm.parentPath?.node?.type&&("require"==blockElm.node?.declarations?.[0]?.init?.callee?.name||"require"==blockElm.node?.declarations?.[0]?.init?.object?.callee?.name)||"ImportDeclaration"==blockElm.node?.type?"import":"body":"ArrayExpression"==blockElm.parentPath.node?.type?"ArrayExpression":"ObjectProperty"==blockElm.parentPath.node?.type?"require"==blockElm.parentPath?.parentPath?.parentPath?.node?.init?.callee?.name||"require"==blockElm.parentPath?.parentPath?.parentPath?.node?.init?.object?.callee?.name?null:"ObjectProperty":"TemplateLiteral"==blockElm.parentPath.node?.type?"TemplateLiteral":"BinaryExpression"==blockElm.parentPath.node?.type?"test":"AssignmentExpression"==blockElm.parentPath.node?.type?"AssignmentExpression":null}},"./dist/tsbuild/app/services/parser/ast-parser/ast-parser-imports.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{imports:()=>function(json,done){(0,async__WEBPACK_IMPORTED_MODULE_6__.autoInject)({packageJsonDeps:cb=>{null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_5__.appCache?.project?.appRoot?function(cb){fs__WEBPACK_IMPORTED_MODULE_3___default().readFile(_handlers_status_status__WEBPACK_IMPORTED_MODULE_5__.appCache.project.appRoot+"package.json","utf8",(err,data)=>{var deps=[];if(null!=data){data=JSON.parse(data);if(null!=data?.dependencies)for(const dependenciesKey in data.dependencies)deps.push(dependenciesKey);if(null!=data?.devDependencies)for(const dependenciesKey in data.devDependencies)deps.push(dependenciesKey)}cb(null,deps)})}(cb):cb(null,[])},builtIn:(packageJsonDeps,cb)=>{cb(null,packageJsonDeps=packageJsonDeps.concat(builtin_modules__WEBPACK_IMPORTED_MODULE_4___default()))},parseImports:(builtIn,cb)=>{parseImports(json,builtIn,cb)}},(err,result)=>{done(err,result?.parseImports)})},parseImports:()=>parseImports,parseImportsForTest:()=>parseImports});var __webpack_exports__=__webpack_require__("jmespath"),jmespath__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/shared/interfaces/interfaces.js"),_ast_parser__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser.js"),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("builtin-modules"),builtin_modules__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(__webpack_exports__),_handlers_status_status__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),async__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("async"),lodash__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("lodash");function parseImports(json,packageJsonDeps,cb){var res=["program.body[].declarations[?init.callee.name=='require'] | []","program.body[].declarations[?init.object.callee.name=='require'] | []","program.body[?type=='ImportDeclaration'] | [] "].map(queryy=>jmespath__WEBPACK_IMPORTED_MODULE_0___default().search(json,queryy)).flat(1);let interfaceImports=[];res.forEach(item=>{if("ImportDeclaration"==item?.type){const fi={name:item.source.value,loc:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_2__.pickLocation)(item.loc)};!function(name,deps){let isInDeps=!1;deps.forEach(dep=>{name.startsWith(dep)&&(isInDeps=!0)}),name.startsWith("@")||-1!==name.indexOf("/")?(deps=_handlers_status_status__WEBPACK_IMPORTED_MODULE_5__.appCache.project.appRoot+"node_modules/"+name,fs__WEBPACK_IMPORTED_MODULE_3___default().existsSync(deps)&&(isInDeps=!0),deps=_handlers_status_status__WEBPACK_IMPORTED_MODULE_5__.appCache.project.appRoot+"node_modules/@types/"+name,fs__WEBPACK_IMPORTED_MODULE_3___default().existsSync(deps)&&(isInDeps=!0)):name.match(/^[a-z]+$/i)&&(isInDeps=!0);return isInDeps}(fi.name,packageJsonDeps)?fi.type=_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_1__.ETypeFileInterfaceImport.file:fi.type=_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_1__.ETypeFileInterfaceImport.package,item.specifiers.forEach(spec=>{"ImportDefaultSpecifier"==spec.type?fi.varName=spec.local.name:(null==fi.varNames&&(fi.varNames=[]),fi.varNames.push(spec.local.name))}),interfaceImports.push(fi)}else if(item.init?.arguments?.[0]?.value){var fi={name:item.init.arguments[0].value,varName:item.id.name,loc:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_2__.pickLocation)(item.loc),type:-1!==item.init.arguments[0].value.indexOf("./")?_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_1__.ETypeFileInterfaceImport.file:_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_1__.ETypeFileInterfaceImport.package,usage:[]};1<=item.id?.properties?.length&&(fi.varNames=item.id.properties?.map(prop=>prop.value.name),delete fi.varName),interfaceImports.push(fi)}else if(item.init?.object?.arguments?.[0]?.value){const fi={name:item.init.object.arguments[0].value,varName:item.id.name,loc:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_2__.pickLocation)(item.loc),type:-1!==item.init.object.arguments[0].value.indexOf("./")?_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_1__.ETypeFileInterfaceImport.file:_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_1__.ETypeFileInterfaceImport.package,usage:[]};1<=item.id?.properties?.length&&(fi.varNames=item.id.properties?.map(prop=>prop.value.name),delete fi.varName),interfaceImports.push(fi)}}),cb(null,interfaceImports=(0,lodash__WEBPACK_IMPORTED_MODULE_7__.orderBy)(interfaceImports,["loc.start.line","loc.start.column"]))}},"./dist/tsbuild/app/services/parser/ast-parser/ast-parser-log.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{parselogs:()=>function(ast,cb){let parseLogs=["console","log","logger"];var extrasLogFunctions=nconf__WEBPACK_IMPORTED_MODULE_2___default().get("consoleLog:logFunctions");null!=extrasLogFunctions&&1<=extrasLogFunctions.length&&(parseLogs=parseLogs.concat(extrasLogFunctions));const logs=[];try{(0,_babel_core__WEBPACK_IMPORTED_MODULE_0__.traverse)(ast,{ExpressionStatement(path){null!=path.node?.expression?.callee?.object?.name&&-1!==parseLogs.indexOf(path.node?.expression?.callee?.object?.name)&&logs.push((0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.pickLineCol)(path.node.loc.end))}})}catch(e){return console.error("error parser logs"),console.error(e),cb(e)}cb(null,logs)}});var _babel_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@babel/core"),_ast_parser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__)},"./dist/tsbuild/app/services/parser/ast-parser/ast-parser-main-function.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getParam:()=>getParam,mainFunctions:()=>function(json,fileType,cb){let fileInterfaceMainFunctions=[];function searchAstQuery(query,parseFunction){query.map(queryy=>jmespath__WEBPACK_IMPORTED_MODULE_0___default().search(json,queryy)).flat(1).forEach(item=>{parseFunction(fileInterfaceMainFunctions,item)})}try{searchAstQuery(["program.body[?type=='FunctionDeclaration'] | [] ","program.body[?declaration.type=='FunctionDeclaration'].declaration | []"],parseFunctionDeclaration),searchAstQuery(["program.body[?type.left.object.name=='exports'] | [] ","program.body[?expression.left.object.name=='exports'] | []","program.body[?expression.left.property.name=='exports'] | []"],parseExports),searchAstQuery(["program.body[?type=='ExportNamedDeclaration'] | [] "],parseExportNamed),searchAstQuery(["program.body[?expression.callee.property.name=='controller'] | []","program.body[?expression.callee.property.name=='factory'] | []","program.body[?expression.callee.property.name=='directive'] | []"],parseAngularJs),"jsx"==fileType&&searchAstQuery(["program.body[].declarations[?init.type=='ArrowFunctionExpression'] | []","program.body[].declarations[?init.type=='FunctionExpression'] | []","program.body[].declarations[].init.body.body[].declarations[?init.type=='ArrowFunctionExpression'] | []"],parseReact),null==(fileInterfaceMainFunctions=fileInterfaceMainFunctions.sort((a,b)=>a.loc.start.line-b.loc.start.line))?.[0]&&(fileInterfaceMainFunctions=null)}catch(e){return console.error("error parse mainFunction"),console.error(e),cb(e.toString())}fileInterfaceMainFunctions=(0,_global__WEBPACK_IMPORTED_MODULE_2__.removeNullAndUndefined)(fileInterfaceMainFunctions),cb(null,fileInterfaceMainFunctions)}});var __webpack_exports__=__webpack_require__("jmespath"),jmespath__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_ast_parser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser.js"),_global__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/global.js");function parseExports(fileInterfaceMainFunctions,item){var params;(null!=item?.expression?.left?.property?.name&&"exports"!==item?.expression?.left?.property?.name||"module"==item?.expression?.left?.object?.name&&"exports"==item?.expression?.left?.property?.name&&"FunctionExpression"==item?.expression?.right?.type)&&(params=item.expression?.right?.params?.map(getParam),params={name:item.expression.left.property.name,loc:item.loc,params:params,returnType:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.getReturnTypeOld)(params)},1==item?.expression?.right?.async&&(params.async=!0),params.loc.body=item.expression.right.body?.loc||item.body?.loc,fileInterfaceMainFunctions.push(params))}function parseExportNamed(fileInterfaceMainFunctions,item){var varDeclaration,params;"ExportNamedDeclaration"==item?.type&&"VariableDeclarator"==item?.declaration?.declarations?.[0]?.type&&null!=item.declaration.declarations[0]?.init?.body?.loc&&(params=(varDeclaration=item.declaration.declarations[0]).init.params?.map(getParam),item={name:varDeclaration.id.name,loc:item.loc,params:params,returnType:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.getReturnTypeOld)(params)},1==varDeclaration?.init?.async&&(item.async=!0),item.loc.body=varDeclaration.init.body.loc,fileInterfaceMainFunctions.push(item))}function parseFunctionDeclaration(fileInterfaceMainFunctions,item){var params;"FunctionDeclaration"==item?.type&&(params=item.params?.map(getParam),(params={name:item.id.name,loc:item.loc,params:params,returnType:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.getReturnTypeOld)(params)}).loc.body=item.body.loc,1==item?.async&&(params.async=!0),fileInterfaceMainFunctions.push(params))}function parseAngularJs(fileInterfaceMainFunctions,item){var params;null!=item.expression?.arguments?.[0]?.value&&(params=item.expression.arguments?.[1].params?.map(getParam),(params={name:item.expression.arguments[0].value,loc:item.loc,params:params}).loc.body=item.expression.arguments?.[1]?.body?.loc,null!=params.loc.body)&&fileInterfaceMainFunctions.push(params)}function parseReact(fileInterfaceMainFunctions,item){var params;"ArrowFunctionExpression"!=item?.init?.type&&"FunctionExpression"!=item?.init?.type||(params=item.init?.params?.map(getParam),(params={name:item.id.name,loc:item.loc,params:params,returnType:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.getReturnTypeOld)(params)}).loc.body=item.init.body?.loc,fileInterfaceMainFunctions.push(params))}function getParam(path){var param={loc:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.pickLocation)(path.loc)};return path.name?param.name=path.name:path.left?.name&&(param.name=path.left.name),1<=path.typeAnnotation?.typeAnnotation?.typeName?.name?.length?param.tsType=path.typeAnnotation.typeAnnotation.typeName.name:"ObjectPattern"==path.type&&1<=path.properties?.length&&(param.object=path.properties.map(prop=>prop?.key?.name)),param}},"./dist/tsbuild/app/services/parser/ast-parser/ast-parser-mf-usage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{classesMethodsParamsUsage:()=>function(jsonFromBabel,classes,cb){if(1<=classes?.length)try{(0,_babel_core__WEBPACK_IMPORTED_MODULE_0__.traverse)(jsonFromBabel,{Identifier(path){(0,_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_1__.filterParentsElements)(path)&&classes.forEach(clas=>{clas?.construct&&findParamsUsage(clas.construct,path,jsonFromBabel),clas.methods?.forEach(method=>{findParamsUsage(method,path,jsonFromBabel)})})}})}catch(e){return console.error("error import Usage"),console.error(e),cb(e)}cb(null,classes)},findMainFunctionParamsUsageInLineOfCode:()=>function(paramsName,lineOfCode,done){const mf=[{name:"aa",loc:{start:{line:1,column:1},end:{line:100,column:1},body:{start:{line:1,column:1},end:{line:100,column:1}}},params:[{name:paramsName}]}];(0,async__WEBPACK_IMPORTED_MODULE_3__.autoInject)({ast:cb=>{cb(null,(0,_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_4__.codeStringToAstWithBabelSync)(lineOfCode,"ts"))},mf:(ast,cb)=>{mainFunctionsParamsUsage(ast,mf,cb)}},(err,result)=>{err&&console.error(err),done(err,result.mf?.[0]?.params?.[0]?.usage)})},isCursorInBetweenLoc:()=>isCursorInBetweenLoc,mainFunctionsParamsUsage:()=>mainFunctionsParamsUsage});var _babel_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@babel/core"),_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-import-usage.js"),_global__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/global.js"),async__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("async"),_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/babel/fileToAstWithBabel.js");function mainFunctionsParamsUsage(jsonFromBabel,mainFunctions,cb){if(1<=mainFunctions?.length)try{(0,_babel_core__WEBPACK_IMPORTED_MODULE_0__.traverse)(jsonFromBabel,{Identifier(path){(0,_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_1__.filterParentsElements)(path)&&mainFunctions.forEach(mf=>{findParamsUsage(mf,path,jsonFromBabel)})}})}catch(e){return console.error("error import Usage"),console.error(e),cb(e)}cb(null,mainFunctions)}function findParamsUsage(mf,path,ast){mf.params?.forEach(mfParams=>{var paramUsage;!function(mf,path,mfParams){return path.node.name==mfParams.name&&isCursorInBetweenLoc(path.node.loc.start,mf.loc.body)}(mf,path,mfParams)||null==(paramUsage=(0,_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_1__.findImportUsageAtPathIdentifier)(path,mfParams.name,ast))||(mfParams.usage=(0,_global__WEBPACK_IMPORTED_MODULE_2__.pushNotDefined)(mfParams.usage,paramUsage))})}function isCursorInBetweenLoc(cursor,block){return block.start.line<cursor.line&&block.end.line>cursor.line||block.start.line==cursor.line&&block.start.column<cursor.column||block.end.line==cursor.line&&block.end.column>cursor.column}},"./dist/tsbuild/app/services/parser/ast-parser/ast-parser.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{astParser:()=>function(jsonFromBabel,fileType,cbb){function getJsonBabel(){return JSON.parse(JSON.stringify(jsonFromBabel))}async__WEBPACK_IMPORTED_MODULE_0___default().autoInject((0,_middlewares_async_try_catch__WEBPACK_IMPORTED_MODULE_10__.tryCatch)({mainFunctions:cb=>{(0,_ast_parser_main_function__WEBPACK_IMPORTED_MODULE_4__.mainFunctions)(getJsonBabel(),fileType,cb)},mainFunctionsParamsUsage:(mainFunctions,cb)=>{(0,_ast_parser_mf_usage__WEBPACK_IMPORTED_MODULE_6__.mainFunctionsParamsUsage)(getJsonBabel(),mainFunctions,cb)},imports:(mainFunctionsParamsUsage,cb)=>{(0,_ast_parser_imports__WEBPACK_IMPORTED_MODULE_3__.imports)(getJsonBabel(),cb)},importsUsage:(imports,cb)=>{(0,_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_5__.importUsage)(getJsonBabel(),imports,cb)},classes:(importsUsage,cb)=>{(0,_ast_parser_classes__WEBPACK_IMPORTED_MODULE_2__.classes)(getJsonBabel(),cb)},classesMethodsParamsUsage:(classes,cb)=>{(0,_ast_parser_mf_usage__WEBPACK_IMPORTED_MODULE_6__.classesMethodsParamsUsage)(getJsonBabel(),classes,cb)},exportNamedDeclarations:(mainFunctions,classesMethodsParamsUsage,cb)=>{(0,_ast_parser_export_named_declarations__WEBPACK_IMPORTED_MODULE_7__.exportNamedDeclarations)(getJsonBabel(),mainFunctions,cb)},logs:(exportNamedDeclarations,cb)=>{(0,_ast_parser_log__WEBPACK_IMPORTED_MODULE_8__.parselogs)(getJsonBabel(),cb)},functions:(logs,exportNamedDeclarations,mainFunctions,classes,cb)=>{(0,_other_functions_ast_parser_other_functions__WEBPACK_IMPORTED_MODULE_9__.parseOtherFunctions)(getJsonBabel(),{mainFunctions:mainFunctions,classes:classes},cb)}}),function(err,data){console.error(err);data=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.pick)(data,["mainFunctions","classes","imports","logs","functions"]);cbb(err,data)})},getReturnTypeOld:()=>function(params){return 0<=params?.length&&_langs_grammar_config__WEBPACK_IMPORTED_MODULE_11__.callbackNames.includes(params[params.length-1]?.name)?"callback":"inline"},pickLineCol:()=>function(loc){return(0,lodash__WEBPACK_IMPORTED_MODULE_1__.pick)(loc,["line","column"])},pickLocation:()=>pickLocation,pickLocationWithBody:()=>function(floc){var flocOk=pickLocation(floc);return flocOk.body=pickLocation(floc.body),flocOk}});var __webpack_exports__=__webpack_require__("async"),async__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lodash"),_middlewares_async_try_catch__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/app/middlewares/async-try-catch.js"),_langs_grammar_config__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/langs/grammar-config.js"),_ast_parser_classes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-classes.js"),_ast_parser_imports__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-imports.js"),_ast_parser_main_function__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-main-function.js"),_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-import-usage.js"),_ast_parser_mf_usage__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-mf-usage.js"),_ast_parser_export_named_declarations__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-export-named-declarations.js"),_ast_parser_log__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-log.js"),_other_functions_ast_parser_other_functions__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/other-functions/ast-parser-other-functions.js");function pickLocation(loc){return(0,lodash__WEBPACK_IMPORTED_MODULE_1__.pick)(loc,["start.line","start.column","end.line","end.column"])}},"./dist/tsbuild/app/services/parser/ast-parser/langs/grammar-config.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{callbackNames:()=>callbackNames,errorNames:()=>errorNames});const callbackNames=["cb","cb1","cb2","cb3","cb4","cb5","callback","callback2","callback3","callback4","next","res","done"],errorNames=["err","error","err0","error0","err1","error1","err2","error2"]},"./dist/tsbuild/app/services/parser/ast-parser/other-functions/ast-parser-other-functions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{parseOtherFunctions:()=>function(jsonFromBabel,fi,cbb){!function(jsonFromBabel,fi,cb){const fns=[];try{const hub=new(_babel_traverse_lib_hub__WEBPACK_IMPORTED_MODULE_3___default())({jsonFromBabel:jsonFromBabel});(0,_babel_core__WEBPACK_IMPORTED_MODULE_0__.traverse)(jsonFromBabel,{FunctionExpression(path){path.hub=hub,functionVisitor(path,fi,fns)},FunctionDeclaration(path){path.hub=hub,functionVisitor(path,fi,fns)},ArrowFunctionExpression(path){path.hub=hub,functionVisitor(path,fi,fns)}})}catch(e){return console.error("error other Functions"),console.error(e),cb(e)}cb(null,fns)}(jsonFromBabel,fi,cbb)}});var _babel_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@babel/core"),_ast_parser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser.js"),_ast_parser_main_function__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-main-function.js"),__webpack_exports__=__webpack_require__("@babel/traverse/lib/hub"),_babel_traverse_lib_hub__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(__webpack_exports__),_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/babel/astToCode.js");function functionVisitor(path,fi,fns){var functionsName=function(path){{if(1<=path.node?.id?.name?.length)return path.node.id.name;if(1<=path.parentPath?.node.key?.name?.length)return path.parentPath?.node.key?.name;if("VariableDeclarator"==path.parentPath?.node?.type&&null!=path.parentPath?.node?.id?.name){let name="";return 1<=path.parentPath?.node?.id?.name.length&&(name+=path.parentPath.node.id.name),name}var bodyBackup,fnName;if("AssignmentExpression"!=path.parentPath?.node?.type||null==path.parentPath?.node?.left?.property?.name)return"CallExpression"==path.parentPath.type&&1<=path.parentPath.node?.callee?.name?.length?path.parentPath.node.callee.name:"CallExpression"==path.parentPath.type&&null!=path.parentPath.node?.callee?(0,_handlers_babel_astToCode__WEBPACK_IMPORTED_MODULE_4__.parseBlockBabelToCode)(path.parentPath.node?.callee).substring(0,100):null!=path.node?.body?.body?(bodyBackup=path.node.body.body,path.node.body.body=[],fnName=path.toString(),path.node.body.body=bodyBackup,fnName):"*";{let name="";return 1<=path.parentPath.node?.left?.object?.name?.length&&(name+=path.parentPath.node.left.object.name+"."),name+=path.parentPath.node?.left?.property?.name}}}(path);if(!function(fi,name,locStart){let found=!1;return fi.mainFunctions?.forEach(mf=>{mf.name==name&&mf.loc.body?.start?.line==locStart.line&&(found=!0)}),fi.classes?.forEach(classe=>{classe.methods?.forEach(mf=>{mf.name==name&&mf.loc.start.line==locStart.line&&(found=!0)})}),found}(fi,functionsName,path.node.loc.start)){const fi={name:functionsName,loc:(0,_ast_parser__WEBPACK_IMPORTED_MODULE_1__.pickLocationWithBody)(function(path){return{start:path.node.loc.start,end:path.node.loc.end,body:path.node.body.loc}}(path)),params:path.node?.params?.map(_ast_parser_main_function__WEBPACK_IMPORTED_MODULE_2__.getParam)};fns.push(fi)}}},"./dist/tsbuild/app/services/parser/filePathToFileInterface.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{checkFileBeforeParse:()=>checkFileBeforeParse,default:()=>function(filePath,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({checkHash:cb=>{checkFileBeforeParse(filePath,cb)},parseAndSave:(checkHash,cb)=>{!function(filePath,file,checkHash,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({doParseFile:cb=>{doParseFileFn(filePath,file,cb)},saveDb:(doParseFile,cb)=>{doParseFile.fileHash=checkHash,doParseFile.project=_handlers_status_status__WEBPACK_IMPORTED_MODULE_9__.appCache.project._id,_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_10__.orm.FileInterfaceModel.findWithFilePathAndUpdate(doParseFile.file.filePath,doParseFile,function(err,newDoc){cb(err,newDoc)})}},function(err,data){console.error(err),err==fileHashIdentical&&null!=data.getFileInterface?callback(null,data.getFileInterface):callback(null==err?null:err,data.saveDb)})}(filePath,checkHash.file,checkHash.checkHash,cb)}},function(err,data){err==fileHashIdentical&&null!=data.checkHash?.checkHash?callback(null,data.checkHash.checkHash):callback(null==err?null:err,data.parseAndSave)})},doParseFileFn:()=>doParseFileFn,doParseFileFnOld:()=>function(filePath,file,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({fileType:cb=>{cb(null,(0,_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_1__.getFileType)(filePath))},esVersion:cb=>{(0,_project_files_esCheck__WEBPACK_IMPORTED_MODULE_6__.esCheck)(file,cb)},fileToJsonBabel:(fileType,esVersion,cb)=>{(0,_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_1__.filePathToAst)(filePath,fileType,cb)},astParser:(fileToJsonBabel,cb)=>{(0,_ast_parser_ast_parser__WEBPACK_IMPORTED_MODULE_5__.astParser)(JSON.parse(JSON.stringify(fileToJsonBabel)),"ts",cb)},pathTsImports:(fileType,astParser,cb)=>{"ts"==fileType?(0,_ts_config_parse_project__WEBPACK_IMPORTED_MODULE_8__.getOriginalPathForTsImports)(filePath,cb):cb()},intermediateTree:(astParser,fileToJsonBabel,cb)=>{astParser.babel=JSON.parse(JSON.stringify(fileToJsonBabel)),(0,_intermediateTree_intermediateTreeFromFileInterface__WEBPACK_IMPORTED_MODULE_2__.generateTreeForFileInterface)(astParser,cb)},fileInterface:(fileToJsonBabel,intermediateTree,fileType,esVersion,cb)=>{intermediateTree.babel=fileToJsonBabel,intermediateTree.file=getFileObjectWithCache(filePath),intermediateTree.project=_handlers_status_status__WEBPACK_IMPORTED_MODULE_9__.appCache.project._id,intermediateTree.file.fileType=fileType,intermediateTree.file.esVersion=esVersion,intermediateTree.date=new Date,cb(null,intermediateTree)},postFileInterface:(fileInterface,pathTsImports,cb)=>{(0,_postFileInterface__WEBPACK_IMPORTED_MODULE_4__.postFileInterface)(fileInterface,pathTsImports,cb)}},(err,result)=>{callback(err,result?.postFileInterface)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/babel/fileToAstWithBabel.js"),_intermediateTree_intermediateTreeFromFileInterface__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/parser/intermediateTree/intermediateTreeFromFileInterface.js"),__webpack_exports__=__webpack_require__("object-hash"),object_hash__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(__webpack_exports__),_middlewares_async_try_catch__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./dist/tsbuild/app/middlewares/async-try-catch.js"),_postFileInterface__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/parser/postFileInterface.js"),_ast_parser_ast_parser__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser.js"),_project_files_esCheck__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/project-files/esCheck.js"),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(__webpack_exports__),_ts_config_parse_project__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/services/ts-config/parse-project.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js");const fileHashIdentical="File hash identical, no need to parse again";function checkFileBeforeParse(filePath,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)((0,_middlewares_async_try_catch__WEBPACK_IMPORTED_MODULE_11__.tryCatch)({file:cb=>{1<=filePath?.length?fs__WEBPACK_IMPORTED_MODULE_7___default().readFile(filePath,"utf8",(err,data)=>{err?"ENOENT"==err.code?function(filePath,cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_10__.orm.FileInterfaceModel.deleteOne(filePath,_handlers_status_status__WEBPACK_IMPORTED_MODULE_9__.appCache.project._id,err=>{err?cb(err):function(filePath,cb){filePath={project:_handlers_status_status__WEBPACK_IMPORTED_MODULE_9__.appCache.project._id,filePath:filePath};_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_10__.orm.TargetFileModel.remove(filePath,err=>{cb(err||"file removed")})}(filePath,cb)})}(filePath,cb):cb(err):cb(null,data.toString())}):cb("filepath not defined")},getFileInterface:cb=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_10__.orm.FileInterfaceModel.findWithFilePathSelectLean(filePath,"fileHash",cb)},checkHash:(file,getFileInterface,cb)=>{file=object_hash__WEBPACK_IMPORTED_MODULE_3___default()(file);null==getFileInterface||getFileInterface.fileHash!=file?cb(null,file):_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_10__.orm.FileInterfaceModel.findWithFilePathSelectLean(filePath,"mainFunctions functions classes file logs",(err,res)=>{cb(fileHashIdentical,res)})}}),function(err,data){fileHashIdentical,callback(err,data)})}function doParseFileFn(filePath,file,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({fileType:cb=>{cb(null,(0,_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_1__.getFileType)(filePath))},esVersion:cb=>{(0,_project_files_esCheck__WEBPACK_IMPORTED_MODULE_6__.esCheck)(file,cb)},fileToJsonBabel:(fileType,esVersion,cb)=>{(0,_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_1__.filePathToAst)(filePath,fileType,cb)},astParser:(fileToJsonBabel,fileType,cb)=>{(0,_ast_parser_ast_parser__WEBPACK_IMPORTED_MODULE_5__.astParser)(JSON.parse(JSON.stringify(fileToJsonBabel)),fileType,cb)},pathTsImports:(fileType,astParser,cb)=>{cb()},fileInterface:(fileToJsonBabel,astParser,fileType,esVersion,cb)=>{astParser.file=getFileObjectWithCache(filePath),astParser.project=_handlers_status_status__WEBPACK_IMPORTED_MODULE_9__.appCache.project._id,astParser.file.fileType=fileType,astParser.file.esVersion=esVersion,astParser.date=new Date,cb(null,astParser)},postFileInterface:(fileInterface,pathTsImports,cb)=>{(0,_postFileInterface__WEBPACK_IMPORTED_MODULE_4__.postFileInterface)(fileInterface,pathTsImports,cb)}},(err,result)=>{callback(err,result?.postFileInterface)})}function getFileObjectWithCache(filePath){return{appRoot:_handlers_status_status__WEBPACK_IMPORTED_MODULE_9__.appCache.project.appRoot,filePath:filePath,file:filePath.replace(_handlers_status_status__WEBPACK_IMPORTED_MODULE_9__.appCache.project.appRoot,"")}}},"./dist/tsbuild/app/services/parser/intermediateTree/generateIntermediateTreeFromAst.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{generateTreeFromAst:()=>function(node){node=function(node){let nodeAdjusted=JSON.parse(JSON.stringify(node));"VariableDeclarator"==nodeAdjusted.type&&null!=nodeAdjusted.init.type&&(nodeAdjusted=nodeAdjusted.init);"AwaitExpression"==nodeAdjusted.type&&null!=nodeAdjusted.argument.type&&(nodeAdjusted=nodeAdjusted.argument);return nodeAdjusted}(node),node=(0,_handlers_babel_babel__WEBPACK_IMPORTED_MODULE_2__.addNodeToEmptyAst)(node);return traverseAst(node)},generateTreeFromLineOfCode:()=>function(lineOfCode,done){(0,async__WEBPACK_IMPORTED_MODULE_3__.autoInject)({ast:cb=>{cb(null,(0,_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_4__.codeStringToAstWithBabelSync)(lineOfCode,"ts"))},tree:(ast,cb)=>{var{tree:ast,treePath}=traverseAst(ast);cb(null,{tree:ast,treePath:treePath})}},(err,result)=>{done(err,result.tree)})},traverseAst:()=>traverseAst});var _babel_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@babel/core"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lodash"),_handlers_babel_babel__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/babel/babel.js"),async__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("async"),_handlers_babel_fileToAstWithBabel__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/babel/fileToAstWithBabel.js");function traverseAst(json){const tree={};let treePath="";return(0,_babel_core__WEBPACK_IMPORTED_MODULE_0__.traverse)(json,{Identifier(path){!function(path,tree){if(!function(path){if(-1!==path.getPathLocation().indexOf(".arguments["))return 1}(path)){var pathLoc=path.getPathLocation();let type;const value={type:type="CallExpression"==path.parentPath.node.type||pathLoc.endsWith(".callee.property")?"function":"MemberExpression"==path.parentPath.node.type?"object":"NewExpression"==path.parentPath.node.type?"class":"Identifier"==path.node.type?"identifier":"typee??"};""!=treePath&&(pathLoc=treePath.slice(0,-6)+".type",value.parentType=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.get)(tree,pathLoc)),treePath+=path.node.name,1<=path.parentPath.parentPath?.node?.arguments?.length&&"function"==type&&(value.params=[],path.parentPath.parentPath?.node?.arguments.forEach((arg,index)=>{var callbackParams;"FunctionExpression"==arg.type||"ArrowFunctionExpression"==arg.type?(callbackParams=arg.params?.map(paramIdentifier=>paramIdentifier.name),value.params.push({type:"callback",callback:callbackParams})):(callbackParams=null!=arg.name?arg.name:"params"+index,value.params.push(callbackParams))})),(0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(tree,treePath,value),treePath+=".data."}}(path,tree)},BlockStatement(path){path=path.get("body.0");path?.node&&path.remove()}}),treePath.endsWith(".data.")&&(treePath=treePath.slice(0,-6)),{tree:tree,treePath:treePath}}},"./dist/tsbuild/app/services/parser/intermediateTree/intermediateTreeFromFileInterface.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{generateTreeForAstBlockTest:()=>function(tree,astBlock){astBlock=(0,_generateIntermediateTreeFromAst__WEBPACK_IMPORTED_MODULE_1__.generateTreeFromAst)(astBlock);MergeRecursiveAndAddToArrayWhenMultipleParams(tree,astBlock.tree)},generateTreeForClasses:()=>generateTreeForClasses,generateTreeForFileInterface:()=>function(fi,done){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({imports:cb=>{!function(fi,cb){fi.imports?.forEach(fiImport=>{fiImport.tree={},fiImport.usage?.filter(_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_3__.filterImportUsage).forEach(fiImportUsage=>{genTreeForUsage(fiImportUsage,fi.babel,fiImport.tree)})}),cb(null,fi)}(fi,cb)},mainFunctions:cb=>{generateTreeForMainFunctions(fi,cb)},classes:cb=>{generateTreeForClasses(fi,cb)},then:(imports,mainFunctions,classes,cb)=>{fi.imports=imports.imports,1<=fi.mainFunctions?.length&&(fi.mainFunctions=mainFunctions.mainFunctions),1<=fi.classes?.length&&(fi.classes=classes.classes),cb(null,fi)}},(err,data)=>{console.error(err),done(err,data?.then)})},generateTreeForMainFunctions:()=>generateTreeForMainFunctions});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_generateIntermediateTreeFromAst__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/intermediateTree/generateIntermediateTreeFromAst.js"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lodash"),_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/parser/ast-parser/ast-parser-import-usage.js");function generateTreeForMainFunctions(fi,cb){fi.mainFunctions?.forEach(mf=>{mf.tree={},genTreeForParams(mf.params,fi.babel,mf.tree)}),cb(null,fi)}function generateTreeForClasses(fi,cb){fi.classes?.forEach(fiClass=>{const tree={};null!=fiClass.construct?.params&&genTreeForParams(fiClass.construct.params,fi.babel,tree),fiClass.methods?.forEach(mf=>{genTreeForParams(mf.params,fi.babel,tree)}),tree!=={}&&(fiClass.tree=tree)}),cb(null,fi)}function genTreeForParams(mfParams,ast,tree){mfParams?.filter(param=>null!=param.usage).forEach(mfParams=>{mfParams.usage.filter(_ast_parser_ast_parser_import_usage__WEBPACK_IMPORTED_MODULE_3__.filterImportUsage)?.forEach(mfParamsUsage=>{genTreeForUsage(mfParamsUsage,ast,tree)})})}function genTreeForUsage(paramsUsage,ast,tree){ast=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(ast,paramsUsage.astPath);null!=ast?(MergeRecursiveAndAddToArrayWhenMultipleParams(tree,(tree=(0,_generateIntermediateTreeFromAst__WEBPACK_IMPORTED_MODULE_1__.generateTreeFromAst)(ast)).tree),paramsUsage.treePath=tree.treePath):JSON.stringify(paramsUsage)}function MergeRecursiveAndAddToArrayWhenMultipleParams(obj1,obj2){for(const p in obj2)try{obj2[p].constructor==Object?null!=obj1[p].params&&null!=obj2[p].params&&JSON.stringify(obj1[p].params)!=JSON.stringify(obj2[p].params)?obj1[p]=[obj1[p],obj2[p]]:Array.isArray(obj1[p])&&null!=obj2[p].params?obj1[p].push(obj2[p]):obj1[p]=MergeRecursiveAndAddToArrayWhenMultipleParams(obj1[p],obj2[p]):obj1[p]=obj2[p]}catch(e){obj1[p]=obj2[p]}return obj1}},"./dist/tsbuild/app/services/parser/parseAllFilesOfTheProject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{parseAllFilesOfTheProject:()=>parseAllFilesOfTheProject,scanProject:()=>function(cb){var files=(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__.getTargetCDP)().scriptParsed.getAllFilesPaths();parseAllFilesOfTheProject(files,cb)}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/filePathToFileInterface.js"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),fs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("fs");function parseAllFilesOfTheProject(files,cb){(0,fs__WEBPACK_IMPORTED_MODULE_3__.writeFileSync)("out/scan-project-error.json",""),(0,async__WEBPACK_IMPORTED_MODULE_0__.eachSeries)(files,(file,cb2)=>{(0,_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_1__.default)(file,(err,data)=>{cb2()})},err=>{cb(err)})}},"./dist/tsbuild/app/services/parser/parseFilePathArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{parseFilePathArray:()=>function(files,cb){(0,async__WEBPACK_IMPORTED_MODULE_0__.mapLimit)(files,10,_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_1__.default,(err,data)=>{err&&console.error(err),cb(null,data)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/filePathToFileInterface.js")},"./dist/tsbuild/app/services/parser/postFileInterface.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{postFileInterface:()=>function(fi,pathTsImports,cb){(function(fi){fi.imports.filter(importt=>importt.type==_shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_0__.ETypeFileInterfaceImport.file).forEach(fiImport=>{fiImport.filePath=function(fi,imports){let filePath=path__WEBPACK_IMPORTED_MODULE_1___default().join(path__WEBPACK_IMPORTED_MODULE_1___default().dirname(fi.file.filePath),imports.name);fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(filePath+".js")?filePath+=".js":fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(filePath+".ts")&&(filePath+=".ts");return filePath}(fi,fiImport)})})(fi),function(fi,pathTsImports){"ts"==fi.file.fileType&&1<=pathTsImports?.length&&fi.imports.filter(fiImport=>fiImport.name.startsWith("@")).forEach(fiImport=>{var adjusutedPath=pathTsImports.find(itemMap=>itemMap.text==fiImport.name);null!=adjusutedPath?.path?fiImport.filePath=_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__.appCache.project.appRoot+adjusutedPath.path:console.error("Cannot find adjusted path for : "+fiImport.name+" - "+fiImport.filePath)})}(fi,pathTsImports);pathTsImports=(0,_global__WEBPACK_IMPORTED_MODULE_3__.removeNullAndUndefined)(fi);cb(null,pathTsImports)}});var _shared_interfaces_interfaces__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/shared/interfaces/interfaces.js"),__webpack_exports__=__webpack_require__("path"),path__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),_global__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/global.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js")},"./dist/tsbuild/app/services/project-files/data-filter/dataFilter.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getDataDumpFilter:()=>function(){return mDataFilter},mDataFilter:()=>mDataFilter,parseDataFilterFile:()=>function(cb){var filePath=_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appCache.project?.appRoot+"/recompyle/data-filter.js";{if(fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(filePath))try{var filteFilter=fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(filePath,"utf-8"),ctx={exports:{filter:[]}};vm__WEBPACK_IMPORTED_MODULE_2___default().runInNewContext(filteFilter,ctx),1<=ctx.exports?.filter?.length&&(mDataFilter=ctx.exports.filter)}catch(e){console.error(e)}cb()}},setDataDumpFilter:()=>function(data){mDataFilter=data}});var __webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),__webpack_exports__=__webpack_require__("vm"),vm__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__);let mDataFilter=[]},"./dist/tsbuild/app/services/project-files/esCheck.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{esCheck:()=>function(fileString,cb){try{(0,acorn__WEBPACK_IMPORTED_MODULE_0__.parse)(fileString,{ecmaVersion:5}),cb(null,"es5")}catch(e){cb(null,"es6")}}});var acorn__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("acorn")},"./dist/tsbuild/app/services/project-files/init-project/add-recompyle-folder-and-files.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{addRecompyleFolderAndFiles:()=>function(done){const projetRoot=_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.project.appRoot;(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({folder:cb=>{fs_extra__WEBPACK_IMPORTED_MODULE_1___default().ensureDir(projetRoot+"recompyle/",cb)},config:(folder,cb)=>{var from,to=projetRoot+"recompyle/config.js";fs__WEBPACK_IMPORTED_MODULE_3___default().existsSync(to)||(from=_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appStatus.defaultFilesPath+"extras-files/config.js",fs_extra__WEBPACK_IMPORTED_MODULE_1___default().copySync(from,to,{overwrite:!1})),cb()},helper:(folder,cb)=>{var from,to=projetRoot+"recompyle/recompyle-helper.js";fs__WEBPACK_IMPORTED_MODULE_3___default().existsSync(to)||(from=_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appStatus.defaultFilesPath+"extras-files/recompyle-helper.js",fs_extra__WEBPACK_IMPORTED_MODULE_1___default().copySync(from,to,{overwrite:!1})),cb()},filter:(folder,cb)=>{var from,to=projetRoot+"recompyle/data-filter.js";fs__WEBPACK_IMPORTED_MODULE_3___default().existsSync(to)||(from=_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appStatus.defaultFilesPath+"extras-files/data-filter.js",fs_extra__WEBPACK_IMPORTED_MODULE_1___default().copySync(from,to,{overwrite:!1})),cb()},initFilter:(filter,cb)=>{(0,_data_filter_dataFilter__WEBPACK_IMPORTED_MODULE_4__.parseDataFilterFile)(cb)}},done)}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),__webpack_exports__=__webpack_require__("fs-extra"),fs_extra__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(__webpack_exports__),_data_filter_dataFilter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/project-files/data-filter/dataFilter.js")},"./dist/tsbuild/app/services/runner/node-app/FileManagement.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FileManagement:()=>FileManagement});var _file_generator_generateFiles__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generateFiles.js"),async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("async"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lodash"),_parser_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/parser/filePathToFileInterface.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js");class FileManagement{rteApp;fileInterface;cursor;fileType;esVersion;constructor(rteApp){this.rteApp=rteApp}initRteApp(mImport,done){this.fileInterface=null,this.cursor=null,mImport.filePath,(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({getFileFinterface:cb=>{this.getFileInterface(mImport.filePath,cb)},parseFileInterface:(getFileFinterface,cb)=>{null!=this.fileInterface?cb():this.parseFile(mImport.filePath,cb)},makeFile:(parseFileInterface,cb)=>{this.cursor={line:1,column:0},this.makeFiles(cb)}},(err,result)=>{done()})}getFileInterface(filePath,cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_4__.orm.FileInterfaceModel.findWithFilePathSelectLean(filePath,null,(error,result)=>{null!=result?._id?(this.fileInterface=result,this.fileType=this.fileInterface.file.fileType,cb(null,result)):cb("FI not found with filePath "+filePath)})}parseFile(filePath,cb){(0,async__WEBPACK_IMPORTED_MODULE_1__.series)([(0,async__WEBPACK_IMPORTED_MODULE_1__.apply)(_parser_filePathToFileInterface__WEBPACK_IMPORTED_MODULE_3__.default,filePath),(0,async__WEBPACK_IMPORTED_MODULE_1__.apply)(this.getFileInterface,filePath)],cb)}makeFiles(cb){(0,_file_generator_generateFiles__WEBPACK_IMPORTED_MODULE_0__.makeFiles)(this.fileInterface,this.cursor,this.rteApp.opts.rteAppPath,cb)}getFiWithDataRunForChildInstance(filePath,cb){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({file:cb=>{this.getFileInterface(filePath,cb)},paramsData:(file,cb)=>{this.fileInterface._id,_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_4__.orm.ParamsDataModel.findLean(this.fileInterface._id,cb)},parse:(paramsData,cb)=>{this.appendFiPath(paramsData,this.fileInterface);paramsData=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.keyBy)(paramsData,"fiPath");(0,lodash__WEBPACK_IMPORTED_MODULE_2__.each)(paramsData,(value,key)=>{null!=value?.data?.local&&(value=value.data.local,-1!==key.indexOf("mainFunctions"))&&(0,lodash__WEBPACK_IMPORTED_MODULE_2__.set)(this.fileInterface,key+".dataRun",value)}),cb()},provisioning:(parse,cb)=>{this.fileInterface.imports.forEach(importt=>{importt.usage.forEach(importUsage=>{importUsage.dataRun={provisioning:!0}})}),cb()}},(err,result)=>{cb(err)})}appendFiPath(paramsData,fi){paramsData.forEach(paramsD=>{const pathArray=paramsD.fiPath.split(".");var indexUsage,indexImport;"imports"===pathArray[0]?(indexImport=fi.imports.findIndex(iimport=>iimport.varName==pathArray[1]),indexUsage=fi.imports[indexImport].usage.findIndex(uusage=>uusage.text==pathArray[3]),paramsD.fiPath="imports["+indexImport+"].usage["+indexUsage+"]"):"mainFunctions"==pathArray[0]&&(indexImport=fi.mainFunctions.findIndex(mf=>mf.name==pathArray[1]),paramsD.fiPath="mainFunctions["+indexImport+"]")})}}},"./dist/tsbuild/app/services/runner/node-app/node-app.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NodeApp:()=>NodeApp});var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("rxjs"),child_process__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("child_process"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("fs-extra"),fs_extra__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(__webpack_exports__),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),_file_generator_generateFiles__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/file-generator/generateFiles.js"),_handlers_externalApp__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/handlers/externalApp.js");class NodeApp extends _handlers_externalApp__WEBPACK_IMPORTED_MODULE_7__.ExternalApp{rteApp;appReady=new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject(!1);rteAppFilePath;opts;fileType;constructor(rteApp){super(),this.rteApp=rteApp,this.opts=rteApp.opts,this.rteApp.opts.nodeAppPort,this.init()}init(){this.initFileType(),this.getRteAppPath(),this.checkPortFree().then(()=>{this.prepareAppStart()})}initFileType(){this.rteApp.fileMgt.fileType=_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.selectedFile.fileType,this.rteApp.fileMgt.esVersion=_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.selectedFile.esVersion,this.fileType=this.rteApp.fileMgt.fileType}async checkPortFree(){await(0,_handlers_externalApp__WEBPACK_IMPORTED_MODULE_7__.killPidWithPort)(this.opts.nodeAppPort)}getRteAppPath(){this.rteAppFilePath=this.opts.rteAppPath+"file."+this.fileType}prepareAppStart(){var fileRun,fileParams;2<_handlers_status_status__WEBPACK_IMPORTED_MODULE_2__.appCache.project?.appRoot?.length?(fs_extra__WEBPACK_IMPORTED_MODULE_4___default().ensureFileSync(this.opts.rteAppPath+"app."+this.fileType),fileRun=fs__WEBPACK_IMPORTED_MODULE_3___default().readFileSync(this.opts.rteAppPath+"app."+this.fileType).toString(),fs_extra__WEBPACK_IMPORTED_MODULE_4___default().ensureFileSync(this.opts.rteAppPath+"file-params."+this.fileType),fileParams=fs__WEBPACK_IMPORTED_MODULE_3___default().readFileSync(this.opts.rteAppPath+"file-params."+this.fileType).toString(),2<fileRun.length&&2<fileParams.length?this.start():this.makeDefaultFiles()):console.error("can't start app no project selected")}makeDefaultFiles(){(0,_file_generator_generateFiles__WEBPACK_IMPORTED_MODULE_6__.makeDefaultFiles)(this.opts.rteAppPath,this.rteApp.fileMgt.fileType,this.rteApp.fileMgt.esVersion,err=>{console.error(err),err||this.start()})}start(){var commandStart={js:"PORT="+this.opts.nodeAppPort+" node --inspect="+this.opts.cdpPort+" app.js",ts:"PORT="+this.opts.nodeAppPort+" node --inspect="+this.opts.cdpPort+" -r ts-node/register/transpile-only  app.ts"};try{var cmd=commandStart[this.fileType];this.childProcess=(0,child_process__WEBPACK_IMPORTED_MODULE_1__.spawn)(cmd,{cwd:this.opts.rteAppPath,detached:!0,shell:!0}),this.onData(),this.errors(),this.otherlogs()}catch(e){console.error(e)}}onData(){this.childProcess.stdout.on("data",data=>{-1!==data.indexOf("Debug App ready")?this.appReady.next(!0):null!=data&&(this.opts.name,this.sendLogToUI(data))})}sendLogToUI(data){_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_5__.mSocketServer.socketApp.emit("console",{data:"\n"+this.opts.name+" : \n"+data})}errors(){this.childProcess.stderr.on("data",data=>{-1===data.indexOf(") Warning")&&-1===data.indexOf("Debugger attached.")&&-1===data.indexOf("Debugger listening on")&&(-1!==data.indexOf("Waiting for the debugger to disconnect")&&this.closeAndRestartNodeApp(),console.error("err nodeApp:"+this.opts.name+" "+data),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_5__.mSocketServer.socketApp.emit("console",{err:"\n"+this.opts.name+" : \n"+data}))})}closeAndRestartNodeApp(){this.rteApp.cdp.disconnect()}otherlogs(){this.childProcess.on("close",code=>{this.appReady.next(!1)})}}},"./dist/tsbuild/app/services/runner/rte-instances.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{clearRteInstances:()=>clearRteInstances,closeAllPorts:()=>closeAllPorts,getInstanceWithIndex:()=>function(index){return null!=instances[index]?instances[index]:(index=function(index){return new _rte_class__WEBPACK_IMPORTED_MODULE_0__.RteApp({cdpPort:rteCDPPortRange+index,nodeAppPort:rteAppPortRange+index,name:"instance-"+index})}(instances.length+1),instances.push(index),index)},getInstanceWithName:()=>function(name){return"instance-0"==name?mainRteApp:instances.find(inst=>inst.opts?.name==name)},getMainRteApp:()=>function(){return mainRteApp},getTargetCDP:()=>function(){return targetCDP},initTargetCDP:()=>initTargetCDP,instances:()=>instances,rteAppPortRange:()=>rteAppPortRange,rteCDPPortRange:()=>rteCDPPortRange,rteInstancesInit:()=>function(done){(0,async__WEBPACK_IMPORTED_MODULE_3__.autoInject)({clear:cb=>{clearRteInstances(cb)},initRte:(clear,cb)=>{cb()},initTargetCdp:(initRte,cb)=>{initTargetCDP(),cb()}},err=>{console.error(err),done()})}});var _rte_class__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/runner/rte.class.js"),_chrome_devtools_protocol_cdp_class_CDP_class__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/CDP.class.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),async__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("async");let instances=[],mainRteApp,targetCDP;const rteAppPortRange=nconf__WEBPACK_IMPORTED_MODULE_2___default().get("rte:appPortRange"),rteCDPPortRange=nconf__WEBPACK_IMPORTED_MODULE_2___default().get("rte:cdpPortRange");function closeAllPorts(){mainRteApp&&mainRteApp.close(),targetCDP&&targetCDP.close(),instances?.forEach(instances=>{instances.close()})}function clearRteInstances(cb){closeAllPorts(),setTimeout(()=>{instances=[],mainRteApp=null,targetCDP=null,cb()},300)}function initTargetCDP(){(targetCDP=new _chrome_devtools_protocol_cdp_class_CDP_class__WEBPACK_IMPORTED_MODULE_1__.CDPP(null,{name:"target-debug-app",cdpPort:nconf__WEBPACK_IMPORTED_MODULE_2___default().get("targetApp:debugPort"),nodeAppPort:nconf__WEBPACK_IMPORTED_MODULE_2___default().get("targetApp:port")})).runAndWaitForConnection()}},"./dist/tsbuild/app/services/runner/rte.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RteApp:()=>RteApp});var _chrome_devtools_protocol_cdp_class_CDP_class__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/chrome-devtools-protocol/cdp-class/CDP.class.js"),async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("async"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("rxjs/operators"),_node_app_node_app_class__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/runner/node-app/node-app.class.js"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("rxjs"),_global__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/global.js"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_node_app_FileManagement__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/runner/node-app/FileManagement.js");class RteApp{opts;cdp;nodeApp;fileMgt=new _node_app_FileManagement__WEBPACK_IMPORTED_MODULE_7__.FileManagement(this);rteAppReady=new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject(!1);constructor(opts){this.opts=opts,this.opts.rteAppPath=_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__.appCache.project.appRoot+"recompyle/tmp/app-"+this.opts.nodeAppPort+"/",this.run()}run(){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({nodeApp:cb=>{this.nodeApp=new _node_app_node_app_class__WEBPACK_IMPORTED_MODULE_3__.NodeApp(this),this.nodeApp.appReady.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.first)(val=>1==val)).subscribe((0,_global__WEBPACK_IMPORTED_MODULE_5__.toCallback)(cb))},CDP:cb=>{this.cdp=new _chrome_devtools_protocol_cdp_class_CDP_class__WEBPACK_IMPORTED_MODULE_0__.CDPP(this),this.cdp.cdpConnected.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.first)(val=>1==val)).subscribe((0,_global__WEBPACK_IMPORTED_MODULE_5__.toCallback)(cb)),this.cdp.runAndWaitForConnection()}},(err,result)=>{console.error(err)}),this.isReady()}isReady(){(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.zip)([this.nodeApp.appReady,this.cdp.cdpConnected]).subscribe(res=>{2==res.filter(status=>1==status).length?this.rteAppReady.next(!0):this.rteAppReady.next(!1)})}close(){this.cdp.close(),this.nodeApp.close()}initInstance(mImport,cb2){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({bp:cb=>{this.cdp.breakpoints.removeAllBreakpoints(cb)},cdp:cb=>{this.cdp.pausedEvents.resumeAndTerminate(cb)},initRte:cb=>{this.fileMgt.initRteApp(mImport,cb)}},cb2)}restart(done){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({close:cb=>{this.close(),setTimeout(()=>{cb()},100)},run:(close,cb)=>{this.rteAppReady.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.first)(value=>1==value)).subscribe(value=>{cb()}),this.run()}},err=>{done(err)})}}},"./dist/tsbuild/app/services/tracer/bpResDataToLog.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{bpResDataToLog:()=>function(bpInfo,bpReq,resDataDump,pickData,done){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({check:cb=>{"bp-ide"==bpReq.type?cb():function(fiPath,cb){fiPath.startsWith("mainFunctions")&&2==fiPath.split("^").length||fiPath.startsWith("functions")&&2==fiPath.split("^").length||fiPath.startsWith("imports")||fiPath.startsWith("classes^")?cb():cb("ignore "+fiPath)}(bpReq.fiPath,cb)},getFileInterface:(check,cb)=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__.orm.FileInterfaceModel.findWithIdSelectLean(bpInfo.fileInterfaceId,_models_mongo_mongoose_static_fiConvertTreeJson__WEBPACK_IMPORTED_MODULE_1__.selectFiMain,cb)},log:(getFileInterface,cb)=>{!function(getFileInterface,bpReq,bpInfo,dataScope,pickData,cb){var fiPathMapObj=bpReq.fiMapObj,getFileInterface={filePath:getFileInterface.file.filePath,params:[],fiPath:bpReq.fiPath,result:[{scope:dataScope.dataDump}],timeStamp:bpInfo.timeStamp};null!=fiPathMapObj?(null!=fiPathMapObj.mainFunction?.name&&getMfObjectsFromFunction(getFileInterface,fiPathMapObj.mainFunction,pickData),null!=fiPathMapObj.function?.name&&getMfObjectsFromFunction(getFileInterface,fiPathMapObj.function,pickData),null!=fiPathMapObj.classe?.name&&(getFileInterface.className=fiPathMapObj.classe.name,null!=fiPathMapObj.method?.name&&getMfObjectsFromFunction(getFileInterface,fiPathMapObj.method,pickData),null!=fiPathMapObj.construct?.name)&&getMfObjectsFromFunction(getFileInterface,fiPathMapObj.construct,pickData),null!=fiPathMapObj.import?.name&&null!=fiPathMapObj.usage?.text&&(getFileInterface.importUsageName=fiPathMapObj.usage.text,getFileInterface.loc=fiPathMapObj.usage.loc.start,fiPathMapObj.argument?._id)&&1<=fiPathMapObj.argument.bpLoc.varPath?.length&&"string"!=typeof fiPathMapObj.argument.bpLoc.varPath&&(getFileInterface.params=fiPathMapObj.argument.bpLoc.varPath.map(varName=>({name:varName,data:pickData?.[varName]})))):"bp-ide"==bpReq.type&&(getFileInterface.title="Breakpoint");getFileInterface.loc={line:bpInfo.paramsTarget[0].lineNumber,column:bpInfo.paramsTarget[0].columnNumber},null!=bpReq.typeLocation&&(getFileInterface.typeLocation=bpReq.typeLocation);getFileInterface.duration=dataScope.duration,cb(null,getFileInterface)}(getFileInterface,bpReq,bpInfo,resDataDump,pickData,cb)},sendSocket:(log,cb)=>{(0,_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_2__.getActiveTabSession)((err,tabSessionClass)=>{tabSessionClass.onNewConsoleLine(log,cb)})},wait:(sendSocket,cb)=>{setTimeout(()=>{cb()},1)}},(err,data)=>{console.error(err),done()})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_models_mongo_mongoose_static_fiConvertTreeJson__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/models/mongo/mongoose/static/fiConvertTreeJson.js"),_tab_session_get_tab_session__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/tracer/tab-session/get-tab-session.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js");function getMfObjectsFromFunction(logFromDump,fn,pickData){logFromDump.functionName=fn.name;const paramsRet=[];fn.params?.map(param=>{1<=param?.name?.length?paramsRet.push({name:param.name,data:pickData?.[param.name]}):1<=param?.object?.length&&param.object.forEach(param=>{paramsRet.push({name:param,data:pickData?.[param]})})}),logFromDump.params=paramsRet}},"./dist/tsbuild/app/services/tracer/handle-status-change-tracer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{startTracer:()=>function(done){{var idReq;1==(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__.getTargetCDP)()?.flagsAndEvents.scriptParsed.getValue()&&(idReq=(0,uuid__WEBPACK_IMPORTED_MODULE_4__.v4)(),1==isRunning?(waiting=1<=waiting.length?[]:waiting).push({cb:done,uid:idReq}):function startReqs(task){isRunning=!0;runTracer(()=>{if(task.forEach(tt=>{tt.uid,tt.cb()}),1<=waiting.length){waiting.length;const toRun=waiting.slice(0);waiting=[],startReqs(toRun)}else isRunning=!1})}([{cb:done,uid:idReq}]))}},stopTracer:()=>function(){(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__.getTargetCDP)()?.cdpConsole?.closeConsole()}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_setBreakpointsForTarget__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/tracer/setBreakpointsForTarget.js"),_handlers_event_service_play_stop__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/event-service/play-stop.js"),uuid__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("uuid");let isRunning=!1,waiting=[];function runTracer(done){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({wait:cb=>{setTimeout(cb,3)},cdp:(wait,cb)=>{null!=(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__.getTargetCDP)()?(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__.getTargetCDP)().isCDPReadyForAction(cb):cb("CDP not initialized")},isRunning:cb=>{1==(0,_handlers_event_service_play_stop__WEBPACK_IMPORTED_MODULE_3__.getIsRunning)().getValue()?cb():cb("Console not enabled")},start:(isRunning,cdp,cb)=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_1__.getTargetCDP)().cdpConsole.init(),cb()},setBreakpoints:(start,cb)=>{(0,_setBreakpointsForTarget__WEBPACK_IMPORTED_MODULE_2__.setBreakpointsForTarget)(cb)}},(err,data)=>{done(err,data)})}},"./dist/tsbuild/app/services/tracer/setBreakpointsForTarget.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{setBreakpointsForTarget:()=>function(done){_common_logger__WEBPACK_IMPORTED_MODULE_6__.default.info("START setBreakpointsForTarget"),1<=_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.target?.length?(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({clearBps:cb=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__.getTargetCDP)().tracerBreakpoints.resetBreakpoints(cb)},parseFi:cb=>{console.time("parse FI");var filesP=_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.target.map(tf=>tf.filePath);(0,_parser_parseFilePathArray__WEBPACK_IMPORTED_MODULE_5__.parseFilePathArray)(filesP,cb)},setBpsTargets:(clearBps,parseFi,cb2)=>{console.timeLog("parse FI"),(0,async__WEBPACK_IMPORTED_MODULE_1__.eachSeries)(JSON.parse(JSON.stringify(_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.target)),(target,cb)=>{!function(target,done){(0,async__WEBPACK_IMPORTED_MODULE_1__.autoInject)({check:cb=>{(0,_target_files_onOpenedFiles__WEBPACK_IMPORTED_MODULE_3__.isFileInScriptParsed)(target.filePath)?cb():cb("file is not in script parsed")},getFileInterfaceId:(check,cb)=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_4__.orm.FileInterfaceModel.findWithFilePathSelectLean(target.filePath,"file mainFunctions classes functions logs _id",(err,data)=>{err?cb(err):data?._id?cb(null,data):cb("fi not found setBpForFile")})},mergeTargetFileAndFi:(getFileInterfaceId,cb)=>{getFileInterfaceId.mainFunctions?.forEach(fn=>{setOptionForFn(fn,target.mainFunctions,"mainFunctions",target)}),getFileInterfaceId.functions?.forEach(fn=>{setOptionForFn(fn,target.functions,"functions",target)}),getFileInterfaceId.classes?.forEach(claass=>{const tfClass=target.classes?.find(cl=>cl.name==claass.name);claass.methods?.forEach(fn=>{setOptionForFn(fn,tfClass?.methods,"mainFunctions",target)}),null!=claass.construct&&setOptionForFn(claass.construct,[tfClass?.construct],"mainFunctions",target)}),cb(null,getFileInterfaceId)},setBp:(mergeTargetFileAndFi,cb)=>{(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__.getTargetCDP)().tracerBreakpoints.setBreakPointForTracer(mergeTargetFileAndFi,cb)},wait:(setBp,cb)=>{setTimeout(cb,3)}},err=>{console.error(err),done()})}(target,cb)},cb2)}},(err,data)=>{_common_logger__WEBPACK_IMPORTED_MODULE_6__.default.info("END setBreakpointsForTarget - "+(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__.getTargetCDP)().breakpoints.breakpoints.length+" breakpoints"),console.error(err),done(err)}):done()}});var _runner_rte_instances__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("async"),_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/target-files-mgt.js"),_target_files_onOpenedFiles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/onOpenedFiles.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js"),_parser_parseFilePathArray__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/parser/parseFilePathArray.js"),_common_logger__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/common/logger.js");function setOptionForFn(fn,tfns,name,target){tfns=tfns?.find(mf=>mf?.name==fn.name);null!=tfns?.options?fn.options=tfns.options:fn.options={start:!1,allLines:!1,end:!1},"mainFunctions"==name&&1==target.options?.mainFunctions&&(fn.options.start=!0),"functions"==name&&1==target.options?.allFunctions&&(fn.options.start=!0),1==target.options?.allLines&&(fn.options.start=!0,fn.options.allLines=!0)}},"./dist/tsbuild/app/services/tracer/tab-session/get-tab-session.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{clearTabSession:()=>function(){tabSessionInstance=null,nbTabs=0,tabSessionLoaded.next(!1)},createNewTabIfActiveIsNotEmpty:()=>function(cb){1<=tabSessionInstance?.tabSession?.lines?.length?createNewTabSession(cb):cb()},createNewTabSession:()=>createNewTabSession,getActiveTabSession:()=>getActiveTabSession,getTabSessionWithId:()=>function(tabSessionId,cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_7__.orm.TabSessionModel.getTabSessionWithId(tabSessionId,_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project._id,cb)},getTabSessionsForProject:()=>getTabSessionsForProject,getTabSessionsForProjectReq:()=>function(done){(0,async__WEBPACK_IMPORTED_MODULE_3__.autoInject)({loaded:cb=>{_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_5__.targetFilesLoaded.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.first)(val=>1==val)).subscribe(()=>{cb()})},getTabs:(loaded,cb)=>{getTabsDbWithLinesSimple(cb)},remove:(getTabs,cb)=>{!function(tabs,cb){const emptyTabs=tabs.filter(tab=>null==tab.lines||0==tab.lines.length);1<=tabs.length&&1<=emptyTabs?.length?(tabs.length==emptyTabs.length&&(nbTabs=0),doRemoveTabSessions(emptyTabs.map(tab=>tab._id),err=>{cb(err,emptyTabs)})):cb()}(getTabs,cb)},createNewTabIfActiveTabRemoved:(getTabs,remove,cb)=>{makeNbTabs(getTabs.filter(function(el){return remove?.indexOf(el)<0})),createNewTabSession(cb)},getTabs2:(createNewTabIfActiveTabRemoved,cb)=>{getTabsDb(cb)},nbTabs:(getTabs2,cb)=>{makeNbTabs(getTabs2),cb()}},(err,data)=>{done(err,data?.getTabs2)})},initTabSession:()=>function(cb){getTabSessionsForProject((err,data)=>{getActiveTabSession(()=>{tabSessionLoaded.next(!0),cb()})})},newTabSessionActive:()=>newTabSessionActive,removeTabSessions:()=>function(tabSessionIds,done){(0,async__WEBPACK_IMPORTED_MODULE_3__.autoInject)({loaded:cb=>{_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_5__.targetFilesLoaded.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.first)(val=>1==val)).subscribe(()=>{cb()})},remove:(loaded,cb)=>{doRemoveTabSessions(tabSessionIds,cb)},getTabs:(remove,cb)=>{getTabsDbWithLinesSimple(cb)},createIfNewIfNotTabs:(getTabs,cb)=>{0==getTabs.length||function(tabSessionIds){let closeCurrent=!1;return tabSessionIds.forEach(tabId=>{tabId==tabSessionInstance.tabSession._id&&(closeCurrent=!0)}),closeCurrent}(tabSessionIds)?createNewTabSession(cb):cb()}},(err,data)=>{done(err,"Tabs removed")})},tabSessionLoaded:()=>tabSessionLoaded});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_prototype__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/prototype.js"),_tabSession_class__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/tracer/tab-session/tabSession.class.js"),async__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("async"),__webpack_exports__=__webpack_require__("rxjs"),_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/target-files-mgt.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("rxjs/operators"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js");const tabSessionLoaded=new __webpack_exports__.BehaviorSubject(!1);let tabSessionInstance=null,nbTabs=0;function getActiveTabSession(cb){null==tabSessionInstance?newTabSessionActive(err=>{cb(err,tabSessionInstance)}):cb(null,tabSessionInstance)}function newTabSessionActive(cb){0==nbTabs&&nbTabs++,tabSessionInstance=null,(tabSessionInstance=new _tabSession_class__WEBPACK_IMPORTED_MODULE_2__.TabSessionClass(""+nbTabs)).saveTabSession(cb),nbTabs++}function createNewTabSession(done){(0,async__WEBPACK_IMPORTED_MODULE_3__.autoInject)({loaded:cb=>{_target_files_target_files_mgt__WEBPACK_IMPORTED_MODULE_5__.targetFilesLoaded.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.first)(val=>1==val)).subscribe(()=>{cb()})},getTabs:(loaded,cb)=>{getTabsDbWithLinesSimple(cb)},newTabSession:(getTabs,cb)=>{makeNbTabs(getTabs),newTabSessionActive(cb)},send:(newTabSession,cb)=>{tabSessionInstance.sendConsoleLineSocket(null),cb()}},(err,res)=>{done(err,"ok")})}function getTabsDb(cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_7__.orm.TabSessionModel.findWithProject(_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project._id,cb)}function getTabsDbWithLinesSimple(cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_7__.orm.TabSessionModel.findWithProjectLines(_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project._id,cb)}function getTabSessionsForProject(done){(0,async__WEBPACK_IMPORTED_MODULE_3__.autoInject)({getTabs:cb=>{getTabsDbWithLinesSimple(cb)},createNewTabIfActiveTabRemoved:(getTabs,cb)=>{makeNbTabs(getTabs),function(tabSessionIds,cb){var tabSessionIsTheActiveOne=tabSessionIds?.findIndex(tabS=>tabS._id==tabSessionInstance?.tabSession._id);-1!==tabSessionIsTheActiveOne||0==tabSessionIds.length?createNewTabSession(cb):cb()}(getTabs,cb)},getTabs2:(createNewTabIfActiveTabRemoved,cb)=>{getTabsDb(cb)}},(err,data)=>{done(err,data?.getTabs2)})}function makeNbTabs(tabs){var nbs;1<=tabs?.length?(nbs=tabs.map(tab=>parseInt(tab.name)).filter(nb=>!isNaN(nb)),(nbTabs=(0,_prototype__WEBPACK_IMPORTED_MODULE_1__.biggestNumberInArray)(nbs)+1)<tabs.length&&(nbTabs=tabs.length+1)):nbTabs=0}function doRemoveTabSessions(tabSessionIds,cb){tabSessionIds.length,(0,async__WEBPACK_IMPORTED_MODULE_3__.parallel)([cb1=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_7__.orm.TabSessionModel.removeWithTabSession(tabSessionIds,_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project._id,cb1)},cb2=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_7__.orm.ConsoleLineModel.removeWithTabSession(tabSessionIds,cb2)}],cb)}},"./dist/tsbuild/app/services/tracer/tab-session/tabSession.class.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TabSessionClass:()=>TabSessionClass});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js"),lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("lodash"),async__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("async");class TabSessionClass{tabSession;linesTmp=[];throttleDelay=100;sendUpdateOrder=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.throttle)(()=>{const timeStampUpdate=(new Date).getTime()-this.throttleDelay;var arr=this.filterConsoleLinesTmp(this.linesTmp,cl=>cl.timeStamp<timeStampUpdate);this.linesTmp=arr.bad,(0,lodash__WEBPACK_IMPORTED_MODULE_3__.sortBy)(arr.good,"timeStamp").forEach(cl=>{this.saveNewLine(cl)}),1<=arr.bad?.length&&this.sendUpdateOrder()},this.throttleDelay,{leading:!1,trailing:!0});constructor(name){this.tabSession={name:name,project:_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project._id,lines:[]}}saveTabSession(cb){null==this.tabSession?._id?_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_2__.orm.TabSessionModel.create(this.tabSession,(err,doc)=>{this.tabSession._id=doc?._id?.toString(),this.tabSession.createdAt=doc?.createdAt,cb(err)}):cb()}onNewConsoleLine(consoleLine,cb){this.linesTmp.push(consoleLine),this.sendUpdateOrder(),cb()}sendConsoleLineSocket(consoleLine){_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__.mSocketServer?.socketAppClass&&_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_1__.mSocketServer.socketAppClass?.addConsoleMessage({tabSession:this.tabSession,consoleLine:consoleLine})}saveNewLine(consoleLine){this.tabSession.lines.push(consoleLine),this.sendConsoleLineSocket(consoleLine),this.saveConsoleLine(consoleLine,()=>{})}filterConsoleLinesTmp(a,fun){var ret={good:[],bad:[]};for(let i=0;i<a.length;i++)(fun(a[i])?ret.good:ret.bad).push(a[i]);return ret}saveConsoleLine(consoleLine,done){setTimeout(()=>{(0,async__WEBPACK_IMPORTED_MODULE_4__.autoInject)({consoleLineI:cb=>{consoleLine.project=_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project._id,consoleLine.tab=this.tabSession._id,_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_2__.orm.ConsoleLineModel.create(consoleLine,cb)},tabSession:(consoleLineI,cb)=>{_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_2__.orm.TabSessionModel.addLineToTab(this.tabSession._id,consoleLineI._id.toString(),cb)}},err=>{done(err)})},1)}}},"./dist/tsbuild/app/services/tracer/target-files/getTargetFiles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getTargetFiles:()=>function(done){(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({getTargetFiles:cb=>{!function(cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_5__.orm.TargetFileModel.findWithProjectLean(_handlers_status_status__WEBPACK_IMPORTED_MODULE_0__.appCache.project._id,(error,result)=>{cb(error,result)})}(cb)},parseFiles:(getTargetFiles,cb)=>{getTargetFiles=getTargetFiles.map(tf=>tf.filePath);(0,_parser_parseFilePathArray__WEBPACK_IMPORTED_MODULE_3__.parseFilePathArray)(getTargetFiles,cb)},merge:(getTargetFiles,parseFiles,cb)=>{getTargetFiles.forEach((tf,index)=>{(0,_onOpenedFiles__WEBPACK_IMPORTED_MODULE_4__.mergeFItoTargetFile)(tf,parseFiles[index])}),cb(null,getTargetFiles)}},(err,data)=>{1<=data?.merge?.length?(data={...(0,lodash__WEBPACK_IMPORTED_MODULE_1__.groupBy)(data.merge,"status"),activeTabs:_target_files_mgt__WEBPACK_IMPORTED_MODULE_6__.targetFilesPickList.activeTabs},done(null,data)):done(err)})}});var _handlers_status_status__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lodash"),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async"),_parser_parseFilePathArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/parser/parseFilePathArray.js"),_onOpenedFiles__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/onOpenedFiles.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js"),_target_files_mgt__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/target-files-mgt.js")},"./dist/tsbuild/app/services/tracer/target-files/onOpenedFiles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{doParseOpenedFiles:()=>doParseOpenedFiles,getCurrentOpenedFiles:()=>function(){return currentFilesToParse},isFileInScriptParsed:()=>isFileInScriptParsed,isInAppRoot:()=>isInAppRoot,mergeFItoTargetFile:()=>mergeFItoTargetFile,onOpenedFiles:()=>function(files){_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__.appCache.project?.appRoot,null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__.appCache.project?.appRoot&&(filesToParse=filesToParse.concat(files.filter(isInAppRoot).filter(_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_8__.isAllowedFileExtension).filter(isNotNodeModules).filter(isFileInScriptParsed)),filesToParse=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.uniq)(filesToParse),_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesLoaded.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.first)(val=>1==val)).subscribe(()=>{debounceOpenedFiles()}))}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_parser_parseFilePathArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/parser/parseFilePathArray.js"),_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/target-files-mgt.js"),_saveTargetAndAvailableFiles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/saveTargetAndAvailableFiles.js"),_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/handlers/sockets/initSocket.js"),lodash__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lodash"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_runner_rte_instances__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/tsbuild/app/services/runner/rte-instances.js"),_handlers_helpers_filesExtensions__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/app/handlers/helpers/filesExtensions.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("rxjs/operators"),_common_logger__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/common/logger.js");let filesToParse=[],currentFilesToParse=[];const debounceOpenedFiles=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.debounce)(()=>{var filesToParseCopy;1<=filesToParse?.length&&(filesToParseCopy=filesToParse.slice(0)).toString()!==currentFilesToParse.toString()&&(currentFilesToParse=filesToParse.slice(0),filesToParse=[],doParseOpenedFiles(filesToParseCopy))},100);function doParseOpenedFiles(filesOpened,cb){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({parseFiles:cb=>{(0,_parser_parseFilePathArray__WEBPACK_IMPORTED_MODULE_1__.parseFilePathArray)(filesOpened,cb)},buildTargetFiles:(parseFiles,cb)=>{var fis;fis=parseFiles,filesOpened.forEach((fPath,index)=>{var foundIndexInTarget=_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.target?.findIndex(ff=>ff.filePath==fPath),foundIndexInAvailable=_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.available?.findIndex(ff=>ff.filePath==fPath);-1!=foundIndexInTarget?mergeFItoTargetFile(_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.target[foundIndexInTarget],fis[index]):-1!=foundIndexInAvailable?mergeFItoTargetFile(_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.available[foundIndexInAvailable],fis[index]):(foundIndexInTarget=[..._target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.target,function(filePath,fi){filePath={filePath:filePath,options:{mainFunctions:!0,allFunctions:!1,allLines:!1,lock:!1}};return mergeFItoTargetFile(filePath,fi),filePath}(fPath,fis[index])],_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.target=foundIndexInTarget)}),cb()},updateTargetList:(buildTargetFiles,cb)=>{(0,_saveTargetAndAvailableFiles__WEBPACK_IMPORTED_MODULE_3__.saveTargetAndAvailableFiles)(_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList,cb)},activeTabs:cb=>{_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.activeTabs=filesOpened,cb()},sendTargetListSocket:(updateTargetList,cb)=>{_handlers_sockets_initSocket__WEBPACK_IMPORTED_MODULE_4__.mSocketServer.socketApp.emit("target-list",_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList),cb()}},(err,data)=>{console.error(err),_common_logger__WEBPACK_IMPORTED_MODULE_10__.default.info("END Parse Opened Files"),null!=cb&&cb()})}function mergeFItoTargetFile(tf,fi){null!=fi?._id&&(1<=fi.mainFunctions?.length&&(tf.mainFunctions=parseTpTargetFileFunction(fi.mainFunctions,tf.mainFunctions)),1<=fi.functions?.length&&(tf.functions=parseTpTargetFileFunction(fi.functions,tf.functions)),1<=fi.classes?.length)&&(tf.classes=fi.classes.map(clas=>{var tfCl=tf?.classes?.find(cl=>cl.name==clas.name),ret={name:clas.name};return 1<=clas.methods?.length&&(ret.methods=parseTpTargetFileFunction(clas.methods,tfCl?.methods)),null!=clas.construct&&(ret.construct=parseTpTargetFileFunction([clas.construct],[tfCl?.construct])?.[0]),ret}))}function parseTpTargetFileFunction(fiFn,tfs){if(null!=fiFn&&1<=fiFn.length)return fiFn.map(fn=>{var newTf={name:fn.name,loc:{start:fn.loc.start},params:fn.params?.map(param=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.pick)(param,["name"])),options:{start:!1,allLines:!1,end:!1}},currentTf=tfs?.find(tf=>tf?.name==fn.name);return null!=currentTf&&(newTf.options=currentTf.options),newTf})}function isFileInScriptParsed(filePath){var cdpTarget=(0,_runner_rte_instances__WEBPACK_IMPORTED_MODULE_7__.getTargetCDP)();return 1!=cdpTarget?.cdpReady.getValue()||null!=cdpTarget.scriptParsedMgt.getExtrasWithFilePath(filePath)}function isInAppRoot(filePath){return!!filePath.startsWith(_handlers_status_status__WEBPACK_IMPORTED_MODULE_6__.appCache.project.appRoot)}function isNotNodeModules(filePath){return-1==filePath.indexOf("node_modules")}},"./dist/tsbuild/app/services/tracer/target-files/saveTargetAndAvailableFiles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{saveTargetAndAvailableFiles:()=>function(filePickList,cb){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({clearTargetFiles:cb=>{null!=_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appCache?.project?._id?function(cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__.orm.TargetFileModel.remove({project:_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appCache.project._id},cb)}(cb):cb("no project selected")},makeList:cb=>{!function(filePickList,cb){let toSave=[];1<=filePickList?.available?.length&&(filePickList.available.forEach(f=>{f.status="available",f.project=_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appCache.project._id}),toSave=[...toSave,...filePickList.available]);1<=filePickList?.target?.length&&(filePickList.target.forEach(f=>{f.status="target",f.project=_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appCache.project._id}),toSave=[...toSave,...filePickList.target]);1<=(toSave=toSave.filter(tf=>(0,_onOpenedFiles__WEBPACK_IMPORTED_MODULE_4__.isInAppRoot)(tf.filePath))).length?cb(null,toSave):cb("nothing to save")}(filePickList,cb)},saveTargetFiles:(clearTargetFiles,makeList,cb)=>{!function(targetFiles,cb){_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__.orm.TargetFileModel.bulkWrite(targetFiles,err=>{console.error(err),cb(err)})}(makeList,cb)},updateLocalList:(saveTargetFiles,cb)=>{_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.target=filePickList.target,_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__.targetFilesPickList.available=filePickList.available,cb()}},(err,data)=>{console.error(err),cb(err,data?.saveList)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),_target_files_mgt__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/target-files-mgt.js"),_models_app_orm_orm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/models/app-orm/orm.js"),_onOpenedFiles__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/onOpenedFiles.js")},"./dist/tsbuild/app/services/tracer/target-files/target-files-mgt.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{clearTargetFiles:()=>function(){targetFilesPickList.available=[],targetFilesPickList.target=[],targetFilesLoaded.next(!1)},initTargetFiles:()=>function(cb){(0,_getTargetFiles__WEBPACK_IMPORTED_MODULE_0__.getTargetFiles)((err,data)=>{1<=data?.target?.length&&(targetFilesPickList.target=data.target),1<=data?.available?.length&&(targetFilesPickList.available=data.available),targetFilesLoaded.next(!0),cb()})},isFileInTargetFiles:()=>function(filePath){var index=targetFilesPickList.target.findIndex(tf=>tf.filePath==filePath);return-1!=index},targetFilesLoaded:()=>targetFilesLoaded,targetFilesPickList:()=>targetFilesPickList});var _getTargetFiles__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/tracer/target-files/getTargetFiles.js"),__webpack_exports__=__webpack_require__("rxjs");const targetFilesLoaded=new __webpack_exports__.BehaviorSubject(!1),targetFilesPickList={available:[],target:[],activeTabs:[]}},"./dist/tsbuild/app/services/transpiler/TsNodeTranspiler.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{transpileFileTsNode:()=>function(fileName,fileToTranspile,originFile,callback){const functionExport="(function (exports, require, module, __filename, __dirname) { ";(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({transpile:cb=>{_ts_config_tsConfig__WEBPACK_IMPORTED_MODULE_1__.tsCompiler.transpileFileTsNode(fileName,fileToTranspile,cb)},addFunctionExport:(transpile,cb)=>{originFile.startsWith(functionExport)?cb(null,functionExport+transpile+"\n});"):cb(null,transpile)}},(err,data)=>{callback(err,data?.addFunctionExport)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_ts_config_tsConfig__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/ts-config/tsConfig.js")},"./dist/tsbuild/app/services/transpiler/transpiler.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{transpileFileTs:()=>function(fileName,originFile,fileToTranspile,callback){(0,async__WEBPACK_IMPORTED_MODULE_0__.autoInject)({getTsConfig:cb=>{_ts_config_tsConfig__WEBPACK_IMPORTED_MODULE_1__.tsCompiler.getTsConfig(cb)},transpile:(getTsConfig,cb)=>{null!=getTsConfig?.["ts-node"]?(0,_TsNodeTranspiler__WEBPACK_IMPORTED_MODULE_2__.transpileFileTsNode)(fileName,fileToTranspile,originFile,cb):_ts_config_tsConfig__WEBPACK_IMPORTED_MODULE_1__.tsCompiler.transpileFileTsc(fileName,fileToTranspile,cb)},check:(transpile,cb)=>{originFile.slice(0,40)!==transpile.slice(0,40)&&console.error("THERE MAY BE A TYPESCRIPT TRANSPILATION ERROR"),cb()}},(err,data)=>{callback(err,data?.transpile)})}});var async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("async"),_ts_config_tsConfig__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/services/ts-config/tsConfig.js"),_TsNodeTranspiler__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/services/transpiler/TsNodeTranspiler.js")},"./dist/tsbuild/app/services/ts-config/parse-project.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getOriginalPathForTsImports:()=>function(filePath,callback){1==_tsConfig__WEBPACK_IMPORTED_MODULE_0__.tsCompiler.appReady.getValue()?_tsConfig__WEBPACK_IMPORTED_MODULE_0__.tsCompiler.getImportPathForFile(filePath,(err,data)=>{console.error(err),callback(err,data)}):callback()}});var _tsConfig__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/services/ts-config/tsConfig.js")},"./dist/tsbuild/app/services/ts-config/tsConfig.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TsConfig:()=>TsConfig,tsCompiler:()=>tsCompiler});var _handlers_externalApp__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/handlers/externalApp.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),child_process__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("child_process"),_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),__webpack_exports__=__webpack_require__("axios"),axios__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(__webpack_exports__),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("rxjs"),__webpack_exports__=__webpack_require__("path"),path__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(__webpack_exports__);class TsConfig extends _handlers_externalApp__WEBPACK_IMPORTED_MODULE_0__.ExternalApp{port;appReady=new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject(!1);constructor(){super()}init(){this.checkPortFree(),this.start()}async checkPortFree(){this.port=nconf__WEBPACK_IMPORTED_MODULE_1___default().get("app:port")+2,await(0,_handlers_externalApp__WEBPACK_IMPORTED_MODULE_0__.killPidWithPort)(this.port)}start(){var pathParseTsFile=path__WEBPACK_IMPORTED_MODULE_6___default().join(_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__.appStatus.defaultFilesPath,"../wip/extras-files/parse-ts-project-app.ts"),nodeModulePath=_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__.appCache.project.packageJsonFolder+"node_modules/";let tsNodePath=nodeModulePath+".bin/ts-node";pathParseTsFile=(tsNodePath=null!=nconf__WEBPACK_IMPORTED_MODULE_1___default().get("tsNodePath")?nconf__WEBPACK_IMPORTED_MODULE_1___default().get("tsNodePath"):tsNodePath)+" -v && PORT="+this.port+" "+tsNodePath+" --transpileOnly --skipIgnore "+pathParseTsFile+" --nodeModulePath="+nodeModulePath;_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__.appCache.project.appRoot,this.childProcess=(0,child_process__WEBPACK_IMPORTED_MODULE_2__.spawn)(pathParseTsFile,{cwd:_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__.appCache.project.appRoot,detached:!0,shell:!0}),this.events()}events(){this.childProcess.stdout.on("data",data=>{-1!==data.indexOf("Ts App Ready")&&this.appReady.next(!0)}),this.childProcess.on("exit",data=>{console.error("exit"),console.error(data),this.appReady.next(!1)}),this.childProcess.stderr.on("data",data=>{console.error("tsApp stdout.err : "+data)})}setProject(cb){this.doRequest("project/"+encodeURIComponent(_handlers_status_status__WEBPACK_IMPORTED_MODULE_3__.appCache.project.appRoot),cb)}getImportPathForFile(filePath,cb){this.doRequest("import-path/"+encodeURIComponent(filePath),(err,data)=>{cb(err,data?.importPaths)})}getTsConfig(cb){this.doRequest("tsConfig",cb)}doRequest(url,cb){url="http://localhost:"+this.port+"/ts/"+url;axios__WEBPACK_IMPORTED_MODULE_4___default().get(url).then(function(response){cb(null,response?.data)}).catch(err=>{console.error("Err TSCompiler once"),console.error(err),cb(err)})}transpileFileTsc(fileName,file,cb){this.transpileFile(fileName,file,"transpile-tsc",cb)}transpileFileTsNode(fileName,file,cb){this.transpileFile(fileName,file,"transpile-ts-node",cb)}transpileFile(fileName,file,url,cb){url="http://localhost:"+this.port+"/ts/"+url;axios__WEBPACK_IMPORTED_MODULE_4___default().post(url,JSON.stringify({file:file,fileName:fileName}),{headers:{"Content-type":"application/json"}}).then(function(response){response.data,cb(null,response?.data?.result)}).catch(err=>{console.error("Err transpileFile once"),console.error(err),cb(err)})}close(){super.close(),this.appReady.next(!1)}}const tsCompiler=new TsConfig},"./dist/tsbuild/common/angular.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>function(app){const root=__dirname;app.use(express__WEBPACK_IMPORTED_MODULE_0___default().static(root+"/public")),app.use(express__WEBPACK_IMPORTED_MODULE_0___default().static(root+"/licenses")),app.use("*",(req,res,next)=>{-1===req.originalUrl.indexOf("/api")?res.sendFile(root+"/public/index.html"):next()})}});var __webpack_exports__=__webpack_require__("express"),express__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__)},"./dist/tsbuild/common/config/_config.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);var __webpack_exports__=__webpack_require__("nconf"),__webpack_exports__=__webpack_require__.n(__webpack_exports__),_load_default__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("dotenv/config"),__webpack_require__("./dist/tsbuild/common/config/load/default.js")),_load_args__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/common/config/load/args.js"),_load_env__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/common/config/load/env.js"),__webpack_require__=__webpack_require__("./dist/tsbuild/common/config/load/main.js");__webpack_exports__().use("memory"),(0,_load_default__WEBPACK_IMPORTED_MODULE_2__.defaultConf)(),(0,_load_args__WEBPACK_IMPORTED_MODULE_3__.args)(),(0,_load_env__WEBPACK_IMPORTED_MODULE_4__.env)(),(0,__webpack_require__.main)()},"./dist/tsbuild/common/config/initConfig.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{isRecompyleLaunchedFromGlobal:()=>isRecompyleLaunchedFromGlobal,loadConfigFromPreviousProjectOrCurrentProject:()=>function(cb){var pathProjectConfig=process.cwd()+"/recompyle/";!(0,_isAppDev__WEBPACK_IMPORTED_MODULE_4__.isAppDev)()&&(0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(pathProjectConfig+"config.js")?(isRecompyleLaunchedFromGlobal=!1,function(pathProjectConfig){pathProjectConfig=(0,_load_loadConfigFromFile__WEBPACK_IMPORTED_MODULE_1__.loadConfigFromFile)(pathProjectConfig);null!=pathProjectConfig&&(0,_load_loadConfigFromFile__WEBPACK_IMPORTED_MODULE_1__.overrideNconf)(pathProjectConfig)}(pathProjectConfig),cb()):(isRecompyleLaunchedFromGlobal=!0,function(done){(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({fileListProjects:cb=>{(0,fs__WEBPACK_IMPORTED_MODULE_3__.readFile)(getListProjectPath(),"utf-8",cb)},lastProjectPath:(fileListProjects,cb)=>{3<=fileListProjects?.length?2<=(fileListProjects=fileListProjects.split("\n")?.[0])?.length?cb(null,fileListProjects):cb("lastProjectPath empty"):cb("empty fileListProjects")},configLastProject:(lastProjectPath,cb)=>{(0,_load_loadConfigFromFile__WEBPACK_IMPORTED_MODULE_1__.loadConfigForProject)(lastProjectPath),cb()}},(err,data)=>{done()})}(cb));isRecompyleLaunchedFromGlobal},makeProjectLastOpenedProject:()=>function(appRoot,done){0==isRecompyleLaunchedFromGlobal?done():(0,async__WEBPACK_IMPORTED_MODULE_2__.autoInject)({fileListProjects:cb=>{(0,fs__WEBPACK_IMPORTED_MODULE_3__.readFile)(getListProjectPath(),"utf-8",(err,data)=>{cb(null,data)})},updateListProject:(fileListProjects,cb)=>{let listProjects=[];(listProjects=1<=fileListProjects?.length?fileListProjects.split("\n"):listProjects).unshift(appRoot),cb(null,(0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniq)(listProjects).join("\n"))},writeFileListProjects:(updateListProject,cb)=>{(0,fs__WEBPACK_IMPORTED_MODULE_3__.writeFile)(getListProjectPath(),updateListProject,cb)}},err=>{done(err)})}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash"),_load_loadConfigFromFile__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/common/config/load/loadConfigFromFile.js"),async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("async"),fs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("fs"),_isAppDev__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/common/config/isAppDev.js");let isRecompyleLaunchedFromGlobal;function getListProjectPath(){return process.cwd()+"/list_projects"}},"./dist/tsbuild/common/config/isAppDev.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{isAppDev:()=>function(){var nconfAppBuildState=nconf__WEBPACK_IMPORTED_MODULE_0___default().get("appBuildState");return null==nconfAppBuildState||nconfAppBuildState==(nconfAppBuildState=[{key:"appBuildState"},{ll:":dev"}])[0].key+nconfAppBuildState[1].ll}});var __webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__)},"./dist/tsbuild/common/config/load/args.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{args:()=>function(){nconf__WEBPACK_IMPORTED_MODULE_0___default().argv({transform:obj=>{switch(obj.key){case"port":obj.key="app:port";break;case"websocket_port":obj.key="app:websocketPort";break;case"mongo_url":obj.key="models:mongo:url";break;case"target_app_debug_port":obj.key="targetApp:debugPort";break;case"target_app_port":obj.key="targetApp:port";break;case"rte_app_port_range":obj.key="rte:appPortRange";break;case"rte_cdp_port_range":obj.key="rte:cdpPortRange";break;case"nb_rte_instances":obj.key="rte:nbInstances"}return obj}})}});var __webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__)},"./dist/tsbuild/common/config/load/default.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{defaultConf:()=>function(){nconf__WEBPACK_IMPORTED_MODULE_0___default().defaults({log:{level:"info",name:"recompyle"},appBuildState:"appBuildState:build",defaultFilesPath:"./default-files/"})}});var __webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__)},"./dist/tsbuild/common/config/load/env.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{env:()=>function(){nconf__WEBPACK_IMPORTED_MODULE_0___default().env({lowerCase:!0,parseValues:!1,whitelist:["app:port","app:websocketPort","db:mongo:url","targetApp:debugPort","targetApp:port","rte:appPortRange","rte:cdpPortRange","rte:nbInstances"],transform:obj=>{switch(obj.key){case"recompyle_port":obj.key="app:port";break;case"recompyle_websocket_port":obj.key="app:websocketPort";break;case"recompyle_mongo_url":obj.key="db:mongo:url";break;case"recompyle_target_app_debug_port":obj.key="targetApp:debugPort";break;case"recompyle_target_app_port":obj.key="targetApp:port";break;case"recompyle_rte_app_port_range":obj.key="rte:appPortRange";break;case"recompyle_rte_cdp_port_range":obj.key="rte:cdpPortRange";break;case"recompyle_nb_rte_instances":obj.key="rte:nbInstances"}return obj}})}});var __webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__)},"./dist/tsbuild/common/config/load/loadConfigFromFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{loadConfigForProject:()=>function(appRoot){appRoot=loadConfigFromFile(appRoot+"recompyle/");null!=appRoot&&((0,lodash__WEBPACK_IMPORTED_MODULE_3__.unset)(appRoot,"app.port"),(0,_isAppDev__WEBPACK_IMPORTED_MODULE_5__.isAppDev)()&&((0,lodash__WEBPACK_IMPORTED_MODULE_3__.unset)(appRoot,"app.websocketPort"),(0,lodash__WEBPACK_IMPORTED_MODULE_3__.unset)(appRoot,"db")),overrideNconf(appRoot))},loadConfigFromFile:()=>loadConfigFromFile,overrideNconf:()=>overrideNconf});var __webpack_exports__=__webpack_require__("path"),path__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("fs"),fs__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("vm"),vm__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("lodash"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(__webpack_exports__),_isAppDev__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/common/config/isAppDev.js");const consoleee=console;function loadConfigFromFile(rootPath){rootPath=path__WEBPACK_IMPORTED_MODULE_0___default().normalize(rootPath+"/config.js"),consoleee.log("Load config from "+rootPath),rootPath=function(filePath){if(fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(filePath))try{var aa=fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(filePath,"utf-8"),ctx={exports:{}};return vm__WEBPACK_IMPORTED_MODULE_2___default().runInNewContext(aa,ctx),ctx.exports?.config}catch(e){console.error("Error in "+filePath),console.error(e)}return{}}(rootPath);return rootPath}function overrideNconf(config){(function jsonToArrayDoublePoint(obj,path=[]){return Object.entries(obj).flatMap(([key,value])=>{const newPath=path.concat(key);return"object"==typeof value&&null!==value?jsonToArrayDoublePoint(value,newPath):[[newPath.join(":"),value]]})})(config).forEach(value=>{nconf__WEBPACK_IMPORTED_MODULE_4___default().set(value[0],value[1])})}},"./dist/tsbuild/common/config/load/main.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{main:()=>function(){let mainConfig={env:"prod",db:{local:!0},app:{port:3030,websocketPort:3031},targetApp:{debugPort:9229},rte:{appPortRange:3211,cdpPortRange:3311,nbInstances:1},consoleLog:{showScopeForLog:{targetFiles:!0,allFiles:!1}},scope:{show:{local:!0,closure:!0,global:!1},mergeAll:!1,maxDepth:7,timeout:300,showHashtagInfos:!0},ui:{showDuration:!0,showExtras:!0}},rootPath=__dirname;mainConfig.appPath=rootPath,(0,_isAppDev__WEBPACK_IMPORTED_MODULE_4__.isAppDev)()&&(rootPath=path__WEBPACK_IMPORTED_MODULE_1___default().join(__dirname,"../../../"),mainConfig.appPath=path__WEBPACK_IMPORTED_MODULE_1___default().join(__dirname,"../../../.."));null==(mainConfig=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.merge)(mainConfig,(0,_loadConfigFromFile__WEBPACK_IMPORTED_MODULE_3__.loadConfigFromFile)(rootPath)))?.db?.mongo&&null==mainConfig?.db?.mysql||(delete mainConfig.db.local,nconf__WEBPACK_IMPORTED_MODULE_0___default().clear("db.local"));nconf__WEBPACK_IMPORTED_MODULE_0___default().overrides(mainConfig)}});var __webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("path"),path__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lodash"),_loadConfigFromFile__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/common/config/load/loadConfigFromFile.js"),_isAppDev__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/common/config/isAppDev.js")},"./dist/tsbuild/common/config/save/saveConfigToFile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{saveConfigToFile:()=>function(config,cb){var configFilePath=path__WEBPACK_IMPORTED_MODULE_0___default().normalize(_app_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__.appStatus.rootPath+"config.js"),config="exports.config ="+JSON.stringify(config)+";";(0,fs__WEBPACK_IMPORTED_MODULE_2__.writeFile)(configFilePath,js_beautify__WEBPACK_IMPORTED_MODULE_3___default()(config),cb)}});var __webpack_exports__=__webpack_require__("path"),path__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),_app_handlers_status_status__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/app/handlers/status/status.js"),fs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fs"),__webpack_exports__=__webpack_require__("js-beautify"),js_beautify__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(__webpack_exports__)},"./dist/tsbuild/common/logger.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,initLogger:()=>function(){if(!(0,_config_isAppDev__WEBPACK_IMPORTED_MODULE_3__.isAppDev)()){const aaa={1:"lo",2:"g"};l.info=function(arg){console[aaa[1]+aaa[2]](arg)}}!function(){const origConsoleErr=console.error;console.error=function(arg){null!=arg&&origConsoleErr(arg)},"prod"==nconf__WEBPACK_IMPORTED_MODULE_2___default().get("env")&&(l.error=function(arg){null!=arg&&origConsoleErr(arg)})}()},loggerTest:()=>function(){global.loggerr=pino__WEBPACK_IMPORTED_MODULE_0___default()(pino_pretty__WEBPACK_IMPORTED_MODULE_1___default()({colorize:!0})),console.log=function(arg){global.loggerr.info(arg)},console.error=function(arg){global.loggerr.error(arg)}}});var __webpack_exports__=__webpack_require__("pino"),pino__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("pino-pretty"),pino_pretty__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),_config_isAppDev__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/common/config/isAppDev.js");const l=pino__WEBPACK_IMPORTED_MODULE_0___default()(nconf__WEBPACK_IMPORTED_MODULE_2___default().get("log")),__WEBPACK_DEFAULT_EXPORT__=l},"./dist/tsbuild/common/openapi.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>function(app,routes){routes(app),app.use(_app_middlewares_error_handler__WEBPACK_IMPORTED_MODULE_0__.default)}});var _app_middlewares_error_handler__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/tsbuild/app/middlewares/error.handler.js")},"./dist/tsbuild/common/server.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ExpressServer,getExpressServer:()=>function(){return server}});var __webpack_exports__=__webpack_require__("express"),express__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("path"),path__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("body-parser"),body_parser__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("http"),http__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=__webpack_require__("cookie-parser"),cookie_parser__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(__webpack_exports__),_logger__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/common/logger.js"),_openapi__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./dist/tsbuild/common/openapi.js"),_app_middlewares_log_routes_handler__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/middlewares/log-routes.handler.js"),_app_middlewares_response_handler__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/tsbuild/app/middlewares/response.handler.js"),__webpack_exports__=__webpack_require__("cors"),cors__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(__webpack_exports__),_angular__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./dist/tsbuild/common/angular.js"),__webpack_exports__=__webpack_require__("nconf"),nconf__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(__webpack_exports__),_app_handlers_update_notifier_borderedText__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./dist/tsbuild/app/handlers/update-notifier/borderedText.js");const app=express__WEBPACK_IMPORTED_MODULE_0___default()();let server;class ExpressServer{routes;constructor(){var root=path__WEBPACK_IMPORTED_MODULE_1___default().normalize(__dirname+"/../");app.set("appPath",root),app.use(express__WEBPACK_IMPORTED_MODULE_0___default().json({limit:"150MB"})),app.use(express__WEBPACK_IMPORTED_MODULE_0___default().urlencoded({limit:"150MB",extended:!0,parameterLimit:9e5})),app.use(cors__WEBPACK_IMPORTED_MODULE_7___default()()),app.use(body_parser__WEBPACK_IMPORTED_MODULE_2___default().text({limit:process.env.REQUEST_LIMIT||"150MB"})),app.use(cookie_parser__WEBPACK_IMPORTED_MODULE_4___default()(process.env.SESSION_SECRET)),(0,_angular__WEBPACK_IMPORTED_MODULE_8__.default)(app),app.use(_app_middlewares_log_routes_handler__WEBPACK_IMPORTED_MODULE_6__.logRoutes),app.use(_app_middlewares_response_handler__WEBPACK_IMPORTED_MODULE_10__.default)}router(routes){return this.routes=routes,this}listen(){(0,_openapi__WEBPACK_IMPORTED_MODULE_12__.default)(app,this.routes);var p,port=nconf__WEBPACK_IMPORTED_MODULE_9___default().get("app:port");return(server=http__WEBPACK_IMPORTED_MODULE_3___default().createServer(app)).listen(port,(p=port,()=>{var msgStarted="Recompyle running on port : "+p+"\nOpen http://localhost:"+p+"\nIDE port : "+nconf__WEBPACK_IMPORTED_MODULE_9___default().get("app:websocketPort");_logger__WEBPACK_IMPORTED_MODULE_5__.default.info("\n"+(0,_app_handlers_update_notifier_borderedText__WEBPACK_IMPORTED_MODULE_11__.default)(msgStarted))})),app}}},"./dist/tsbuild/global.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{cbToAsync:()=>function(fn){return(...args)=>new Promise((resolve,reject)=>{fn(...args,(err,data)=>{err?reject(err):resolve(data)})})},countInstances:()=>function(string,word){return string.split(word).length-1},promToCb:()=>function(callback){return[value=>callback(null,value),err=>callback(err)]},promToCbNotEmpty:()=>function(callback){return[value=>{null!=value?callback(null,value):callback("No Document found")},err=>{callback(err)}]},pushNotDefined:()=>function(array,elm){(Array.isArray(array)?array:array=[]).push(elm);return array},removeLocInObject:()=>function(data){return deepdash_omitDeep__WEBPACK_IMPORTED_MODULE_0___default()(data,["loc"],{onMatch:{skipChildren:!0}})},removeNullAndUndefined:()=>function removeNullAndUndefined(object){null!=object&&Object.entries(object).forEach(([k,v])=>{v&&"object"==typeof v&&removeNullAndUndefined(v),(v&&"object"==typeof v&&!Object.keys(v).length||null==v||0===v.length)&&(Array.isArray(object)?object.splice(k,1):v instanceof Date||delete object[k])});return object},toCallback:()=>function(callback){return{next:value=>callback(null,value),error:err=>callback(err)}}});var __webpack_exports__=__webpack_require__("deepdash/omitDeep"),deepdash_omitDeep__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(__webpack_exports__)},"./dist/tsbuild/prototype.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{biggestNumberInArray:()=>biggestNumberInArray,deserializeJavascript:()=>deserializeJavascript,endsWithAny:()=>endsWithAny,isObject:()=>isObject,mergeArrayNull:()=>mergeArrayNull,mergeDeep:()=>mergeDeep,mergeObjectNull:()=>mergeObjectNull,removeKeyFromObject:()=>removeKeyFromObject,removeLocFromObject:()=>removeLocFromObject,replaceAll:()=>replaceAll,sortObject:()=>sortObject});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lodash"),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);function replaceAll(str,find,replace){return str.replace(new RegExp((0,lodash__WEBPACK_IMPORTED_MODULE_0__.escapeRegExp)(find),"g"),replace)}function endsWithAny(suffixes,string){return suffixes.some(function(suffix){return string.endsWith(suffix)})}function removeKeyFromObject(obj,keys){let index;for(const prop in obj)if(obj.hasOwnProperty(prop))switch(typeof obj[prop]){case"string":-1<(index=keys.indexOf(prop))&&delete obj[prop];break;case"object":-1<(index=keys.indexOf(prop))?delete obj[prop]:removeKeyFromObject(obj[prop],keys)}return obj}function removeLocFromObject(obj){return removeKeyFromObject(obj,["loc"])}function deserializeJavascript(serializedJavascript){return eval("("+serializedJavascript+")")}function isObject(item){return item&&"object"==typeof item&&!Array.isArray(item)}function mergeDeep(target,...sources){if(!sources.length)return target;var source=sources.shift();if(isObject(target)&&isObject(source))for(const key in source)isObject(source[key])?(target[key]||Object.assign(target,{[key]:{}}),mergeDeep(target[key],source[key])):Object.assign(target,{[key]:source[key]});return mergeDeep(target,...sources)}function biggestNumberInArray(arr){return Math.max.apply(Math,arr)}function sortObject(obj){return null!=obj?Object.keys(obj).sort((a,b)=>a.toLowerCase().localeCompare(b.toLowerCase())).reduce((result,key)=>(result[key]=obj[key],result),{}):obj}function mergeArrayNull(arr,arr2){return arr=[...arr||[],...arr2||[]]}function mergeObjectNull(obj,obj2){return obj={...obj||{},...obj2||{}}}},"./dist/tsbuild/shared/interfaces/interfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var ETypeFileInterfaceImport;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ETypeFileInterfaceImport:()=>ETypeFileInterfaceImport}),function(ETypeFileInterfaceImport){ETypeFileInterfaceImport.package="package",ETypeFileInterfaceImport.file="file",ETypeFileInterfaceImport.TsType="TsType"}(ETypeFileInterfaceImport=ETypeFileInterfaceImport||{})},"@babel/core":module=>{module.exports=require("@babel/core")},"@babel/generator":module=>{module.exports=require("@babel/generator")},"@babel/parser":module=>{module.exports=require("@babel/parser")},"@babel/plugin-proposal-class-properties/lib/index":module=>{module.exports=require("@babel/plugin-proposal-class-properties/lib/index")},"@babel/plugin-proposal-decorators/lib/index":module=>{module.exports=require("@babel/plugin-proposal-decorators/lib/index")},"@babel/preset-env/lib/index":module=>{module.exports=require("@babel/preset-env/lib/index")},"@babel/preset-flow/lib/index":module=>{module.exports=require("@babel/preset-flow/lib/index")},"@babel/preset-react/lib/index":module=>{module.exports=require("@babel/preset-react/lib/index")},"@babel/preset-typescript/lib/index":module=>{module.exports=require("@babel/preset-typescript/lib/index")},"@babel/traverse/lib/hub":module=>{module.exports=require("@babel/traverse/lib/hub")},"@babel/types":module=>{module.exports=require("@babel/types")},"@vue/compiler-sfc":module=>{module.exports=require("@vue/compiler-sfc")},acorn:module=>{module.exports=require("acorn")},ansicolor:module=>{module.exports=require("ansicolor")},async:module=>{module.exports=require("async")},axios:module=>{module.exports=require("axios")},"body-parser":module=>{module.exports=require("body-parser")},"builtin-modules":module=>{module.exports=require("builtin-modules")},"chrome-remote-interface":module=>{module.exports=require("chrome-remote-interface")},"convert-source-map":module=>{module.exports=require("convert-source-map")},"cookie-parser":module=>{module.exports=require("cookie-parser")},cors:module=>{module.exports=require("cors")},"data-store":module=>{module.exports=require("data-store")},"date-fns":module=>{module.exports=require("date-fns")},"deep-sort-object":module=>{module.exports=require("deep-sort-object")},"deepdash/eachDeep":module=>{module.exports=require("deepdash/eachDeep")},"deepdash/omitDeep":module=>{module.exports=require("deepdash/omitDeep")},"dotenv/config":module=>{module.exports=require("dotenv/config")},express:module=>{module.exports=require("express")},"find-pid-from-port":module=>{module.exports=require("find-pid-from-port")},"fs-extra":module=>{module.exports=require("fs-extra")},glob:module=>{module.exports=require("glob")},"html-to-text":module=>{module.exports=require("html-to-text")},jmespath:module=>{module.exports=require("jmespath")},"js-beautify":module=>{module.exports=require("js-beautify")},jsonpath:module=>{module.exports=require("jsonpath")},lodash:module=>{module.exports=require("lodash")},mongoose:module=>{module.exports=require("mongoose")},nconf:module=>{module.exports=require("nconf")},"neo-async":module=>{module.exports=require("neo-async")},"node-graceful":module=>{module.exports=require("node-graceful")},"node-machine-id":module=>{module.exports=require("node-machine-id")},"object-hash":module=>{module.exports=require("object-hash")},pino:module=>{module.exports=require("pino")},"pino-pretty":module=>{module.exports=require("pino-pretty")},process:module=>{module.exports=require("process")},"ps-tree":module=>{module.exports=require("ps-tree")},recast:module=>{module.exports=require("recast")},"recast/parsers/babel":module=>{module.exports=require("recast/parsers/babel")},"recast/parsers/typescript":module=>{module.exports=require("recast/parsers/typescript")},rxjs:module=>{module.exports=require("rxjs")},"rxjs/operators":module=>{module.exports=require("rxjs/operators")},"segfault-handler":module=>{module.exports=require("segfault-handler")},semver:module=>{module.exports=require("semver")},"serialize-javascript":module=>{module.exports=require("serialize-javascript")},"socket.io":module=>{module.exports=require("socket.io")},"source-map":module=>{module.exports=require("source-map")},typeorm:module=>{module.exports=require("typeorm")},"typeorm-extension":module=>{module.exports=require("typeorm-extension")},uuid:module=>{module.exports=require("uuid")},child_process:module=>{module.exports=require("child_process")},fs:module=>{module.exports=require("fs")},http:module=>{module.exports=require("http")},https:module=>{module.exports=require("https")},net:module=>{module.exports=require("net")},"node:process":module=>{module.exports=require("node:process")},os:module=>{module.exports=require("os")},path:module=>{module.exports=require("path")},vm:module=>{module.exports=require("vm")}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];return void 0!==cachedModule||(cachedModule=__webpack_module_cache__[moduleId]={exports:{}},__webpack_modules__[moduleId](cachedModule,cachedModule.exports,__webpack_require__)),cachedModule.exports}__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.r(__webpack_exports__);__webpack_require__("./dist/tsbuild/common/config/_config.js");var _common_server__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/tsbuild/common/server.js"),_app_initServices__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/tsbuild/app/initServices.js"),_app_routes_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/tsbuild/app/routes/router.js"),_common_config_initConfig__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./dist/tsbuild/common/config/initConfig.js"),_common_logger__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/tsbuild/common/logger.js"),_app_handlers_update_notifier_run_app_notifier__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./dist/tsbuild/app/handlers/update-notifier/run-app-notifier.js");(0,_common_config_initConfig__WEBPACK_IMPORTED_MODULE_4__.loadConfigFromPreviousProjectOrCurrentProject)(()=>{(0,_common_logger__WEBPACK_IMPORTED_MODULE_5__.initLogger)(),(new _common_server__WEBPACK_IMPORTED_MODULE_1__.default).router(_app_routes_router__WEBPACK_IMPORTED_MODULE_3__.routesApi).listen(),(0,_app_initServices__WEBPACK_IMPORTED_MODULE_2__.initServices)(()=>{}),(0,_app_handlers_update_notifier_run_app_notifier__WEBPACK_IMPORTED_MODULE_6__.runUpdateNotifier)()})})()})();
//# sourceMappingURL=main.js.map